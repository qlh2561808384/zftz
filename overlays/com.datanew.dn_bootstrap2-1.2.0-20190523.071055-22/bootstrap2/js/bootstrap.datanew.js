var __bootstrapVersionPath="bootstrap2";(function($){$.extend({getRootPath:function(){var curWwwPath=window.document.location.href;var pathName=window.document.location.pathname;var pos=curWwwPath.indexOf(pathName);var localhostPaht=curWwwPath.substring(0,pos);var projectName=pathName.substring(0,pathName.substr(1).indexOf("/")+1);if("file://"===localhostPaht){var returnstr=$("script[src*='bootstrap.datanew.js']").attr("src").replace("bootstrap.datanew.js","../..")+"";return returnstr}else{return(localhostPaht+projectName)}},include:function(file){var includePath=$.getRootPath();var files=typeof file=="string"?[file]:file;for(var i=0;i<files.length;i++){var values=files[i].split("|");var name=values[0].replace(/^\s|\s$/g,"");var att=name.split(".");var ext=att[att.length-1].toLowerCase();var isCSS;var tag;var attr;if(ext=="css"){isCSS=true;tag="link";attr=" type='text/css' rel='stylesheet' "}else{if(ext=="less"){isCSS=true;tag="link";attr=" type='text/css' rel='stylesheet/less' "}else{isCSS=false;tag="script";attr=" language='javascript' type='text/javascript' "}}var debugParam=$.debugModal==true?"?a="+Math.random():"";var findlink=(isCSS?"href":"src")+"^='"+includePath+"/"+name+"'";var link=(isCSS?"href":"src")+"='"+includePath+"/"+name+debugParam+"'";if($(tag+"["+findlink+"]").length===0){if(values.length==3){var name2=values[2].replace(/^\s|\s$/g,"");var att2=name2.split(".");var ext2=att2[att2.length-1].toLowerCase();var isCSS2=ext2=="css";var tag2=isCSS2?"link":"script";if(values[1]=="before"){findlink=(isCSS2?"href":"src")+"^='"+includePath+"/"+values[2]+"'";if($(tag2+"["+findlink+"]").length!==0){$(tag2+"["+findlink+"]").before("<"+tag+attr+link+"></"+tag+">")}else{$("head").append("<"+tag+attr+link+"></"+tag+">")}}else{if(values[1]=="after"){findlink=(isCSS2?"href":"src")+"^='"+includePath+"/"+values[2]+"'";if($(tag2+"["+findlink+"]").length!==0){$(tag2+"["+findlink+"]").after("<"+tag+attr+link+"></"+tag+">")}else{$("head").append("<"+tag+attr+link+"></"+tag+">")}}else{if(values[1]=="likebefore"){findlink=(isCSS2?"href":"src")+"*='"+values[2]+"'";if($(tag2+"["+findlink+"]").length!=0){$(tag2+"["+findlink+"]").before("<"+tag+attr+link+"></"+tag+">")}else{$("head").append("<"+tag+attr+link+"></"+tag+">")}}else{if(values[1]=="likeafter"){findlink=(isCSS2?"href":"src")+"*='"+values[2]+"'";if($(tag2+"["+findlink+"]").length!=0){$(tag2+"["+findlink+"]").after("<"+tag+attr+link+"></"+tag+">")}else{$("head").append("<"+tag+attr+link+"></"+tag+">")}}else{$("head").append("<"+tag+attr+link+"></"+tag+">")}}}}}else{$("head").append("<"+tag+attr+link+"></"+tag+">")}}}},dcookie:function(){$.include(__bootstrapVersionPath+"/plugins/cookie/jquery.cookie.js");var args=Array.prototype.slice.call(arguments,0);return $.cookie.apply(null,args)},dzoom:function(zoom){$body.css({"-moz-transform":"scale("+zoom+")","transform-origin":"center top"});$body.css("zoom",zoom)},replaceTag:function($target,tagName){var target=$target.get(0),attrs=target.attributes,$newTag=$("<"+tagName+">");if(target.tagName==tagName){return $target}$.each(attrs,function(i,attr){$newTag.attr(attr.name,attr.value)});$target.after($newTag).remove();return $newTag},initPage:function(option,$parentTarget){var $container=$parentTarget==undefined?$(document).find("body"):$parentTarget;if(typeof option!="object"){throw new Error("初始化参数类型不正确")}if($container.length==0){$(document).append("<body></body>");$container=$(document).find("body")}parse(option,$container);function parse(option,$parent){$.each(option,function(k){var $target=$("<DIV>"),dtype=this.dtype,classes=this.classes?this.classes:"",attrs=this.attrs;if(attrs!==undefined){$target.attr(attrs)}if(!!option[k].id){$target.attr("id",option[k].id)}$parent.append($target.addClass(classes));if(dtype=="column"){$target.addClass("column col-sm-"+this.colspan)}else{if(dtype=="row"){$target.addClass("row")}else{if(dtype=="body"){$target.addClass("containerFluid")}else{if(dtype=="div"){}else{if(dtype=="html"){$target.remove();$target=$(this.dragHtml).addClass(classes);$parent.append($target);$target.removeAttr("contenteditable").removeClass("layoutClass");$.each($target,function(i){var othis=$target[i];if(othis.id!=null&&othis.id.indexOf("layoutClass_")!=-1){othis.id=""}if(!!option[k].id){$(othis).attr("id",option[k].id)}})}else{var dId=!!option[k].id?option[k].id:dtype+"-"+Math.floor(Math.random()*1000000);$target.attr("id",dId);$target[dtype](this)}}}}}if(this.plug&&this.plug.length>0){parse(this.plug,$target)}})}}});$.include(__bootstrapVersionPath+"/config/config.js");$.include(__bootstrapVersionPath+"/plugins/input/core1.0.js");$.fn.dform=function(options){$.include([__bootstrapVersionPath+"/plugins/form/jquery.form.js",__bootstrapVersionPath+"/plugins/form/formMethod.js",__bootstrapVersionPath+"/plugins/form/form-common.css",__bootstrapVersionPath+"/plugins/form/form-common-custom.css"]);var target=$.replaceTag($(this),"FORM");if(typeof options=="object"){formMthod.initForm(target,options);if($.plugMiniConfig){target.addClass("miniForm")}}else{if(typeof options=="string"){var param=Array.prototype.slice.call(arguments,1);return formMthod[options].apply(this,param)}}};$.fn.dforms=function(options){$.include([__bootstrapVersionPath+"/plugins/form/jquery.form.js",__bootstrapVersionPath+"/plugins/form/formMethod.js",__bootstrapVersionPath+"/plugins/form/form-common.css",__bootstrapVersionPath+"/plugins/form/form-common-custom.css"]);var target=$.replaceTag($(this),"FORM");if(typeof options=="object"){target.empty();$.each(options.plug,function(){var subTarget=$("<div></div>").appendTo(target);subTarget=$.replaceTag(subTarget,"FORM");if(this.dtype==="dform"){formMthod.initForm(subTarget,this)}else{subTarget[this.dtype](this)}})}else{if(typeof options=="string"){var param=Array.prototype.slice.call(arguments,1);var resData={};target.children("form").each(function(i){var subform=target.children("form").eq(i),formData=formMthod[options].apply(subform,param);resData=$.extend({},resData,formData)});return resData}}};$.fn.ddecimal=function(options){$(this).decimal(options)};$.fn.ddate=function(options){$(this).dateBox(options)};$.extend({putObj:function(id,obj){if($.fn.dobj==null){$.fn.dobj={}}$.fn.dobj[id]=obj},getObj:function(id){return $.fn.dobj[id]}});$.fn.dtree=function(options){$.include([__bootstrapVersionPath+"/css/font-awesome.min.css",__bootstrapVersionPath+"/plugins/tree/css/zTreeStyle/zTreeStyle.css",__bootstrapVersionPath+"/plugins/tree/css/zTreeStyle/bootstrap-zTree-custom.css",__bootstrapVersionPath+"/plugins/tree/js/jquery.ztree.all.min.js"]);var target=$(this);var tree,treeobj,hideInp;var targetId;if(target.attr("id")){targetId=target.attr("id")}else{targetId="id"+(new Date().getTime());target.attr("id",targetId)}var settings={checkType:"nocheck",ISLEAF:false,isOpen:false,isPopupTree:false,rootElement:false,labelVal:"label",check:{},data:{simpleData:{enable:true,idKey:"id",pIdKey:"pId",rootPId:"0"},key:{checked:"checked",children:"children",name:"name",title:"",url:""}},callback:{}};options=$.extend({},settings,options);target.wrap('<div class="ztreeBox"></div>');if(options.isPopupTree){target.addClass("treeSel form-control");target.attr({readonly:"readonly"});target.before("<lable>"+options.labelVal+"</label>");target.wrap('<div class="ztreeBox_inp ztreeBox_down"></div>');target.after('<ul id="'+targetId+'_tree" class="ztree ztree_abs"></ul>');treeobj=$("#"+targetId+"_tree");target.after('<i class="fa fa-angle-down"></i>');target.css({backgroundColor:"#FFF"});target.before('<input type="hidden" id="'+targetId+'_hideInp"name="'+target.attr("name")+'" value="" />');target.removeAttr("name");hideInp=$("#"+targetId+"_hideInp");target.parent().on("click",function(){showMenu(target,treeobj)})}else{treeobj=target;target.addClass("ztree")}if(options.checkType=="radio"){options.check.enable="true";options.check.chkStyle="radio";options.check.radioType="all"}else{if(options.checkType=="checkbox"){options.check.enable="true"}}var func_click=options.callback.onClick;var func_check=options.callback.onCheck;options.callback.onClick=function(e,treeId,treeNode){onClick(e,treeId,treeNode);if(func_click!=null){func_click(e,treeId,treeNode)}};options.callback.onCheck=function(e,treeId,treeNode){onCheck(e,treeId,treeNode);if(func_check!=null){func_check(e,treeId,treeNode)}};if(options.localdata!=null){if(options.rootElement){var obj={};obj[options.data.simpleData.idKey]=options.data.simpleData.rootPId;obj[options.data.simpleData.pId]="";obj.open=true;if(options.data.key.name){obj[options.data.key.name]="全部"}options.localdata.push(obj)}tree=$(this).zTree.init(treeobj,options,options.localdata)}else{if(options.url!=null){$.dajax({url:options.url,async:false,data:options.queryParam,success:function(data1){if(options.rootElement){var obj={};obj[options.data.simpleData.idKey]=options.data.simpleData.rootPId;obj[options.data.simpleData.pId]="";obj.open=true;if(options.data.key.name){obj[options.data.key.name]="全部"}data1.push(obj)}tree=$(this).zTree.init(treeobj,options,data1)}})}else{tree=$(this).zTree.init(treeobj,options)}}if(options.isOpen){tree.expandAll(true)}if(!options.ISLEAF&&options.checkType!="nocheck"){var node=tree.getNodes();var nodes=tree.transformToArray(node);for(var i=0;i<nodes.length;i++){if(nodes[i].ISLEAF==1){nodes[i].nocheck=false;tree.updateNode(nodes[i])}else{nodes[i].nocheck=true;tree.updateNode(nodes[i])}}}function beforeClick(treeId,treeNode){var zTree=$.fn.zTree.getZTreeObj(treeId);zTree.checkNode(treeNode,!treeNode.checked,null,true);return false}function onClick(e,treeId,treeNode){var zTree=$.fn.zTree.getZTreeObj(treeId);zTree.checkNode(treeNode,!treeNode.checked,null,true);return false}function onCheck(e,treeId,treeNode){var zTree=$.fn.zTree.getZTreeObj(treeId),nodes=zTree.getCheckedNodes(true),v="",dv="";for(var i=0,l=nodes.length;i<l;i++){v+=nodes[i][options.data.key.name]+",";dv+=nodes[i][options.data.simpleData.idKey]+","}if(v.length>0){v=v.substring(0,v.length-1);dv=dv.substring(0,dv.length-1)}if(options.isPopupTree){hideInp.attr("value",dv);target.attr("value",v)}}function showMenu(dtreeSel,dtreeObj){var dtreeOffset=dtreeSel.position();dtreeObj.css({left:dtreeOffset.left,top:dtreeSel.outerHeight(),paddingRight:"20px"}).slideDown("fast");$(document).on("mouseup",function(e){if(!dtreeSel.is(e.target)&&!dtreeObj.is(e.target)&&dtreeObj.has(e.target).length===0){dtreeObj.hide()}})}return tree};$.fn.dtable=function(options){var tableObj=$.replaceTag($(this),"TABLE");var setting={height:options.searchbar!=undefined?$(document).height()-60:$(document).height(),cache:false,showRefresh:false,pageNumber:1,pageSize:30,method:"post",pagination:true,paginationHAlign:"left",pageList:[10,20,30],striped:true,queryParamsType:"limit",contentType:"application/x-www-form-urlencoded",editable:false,mode:"inline",resizable:false,fixedColumns:false,autoRefreshTime:false,clickToEditMode:false,ifDrag:false,onResizableResize:function(e){var $table=tableObj.data("bootstrap.table"),$th=$($table.$header[0]).find("th[data-field]"),resizeTableWid=[],tableId=tableObj.attr("id"),itemName="resizeTbWid_"+tableId;$.each($th,function(k,v){resizeTableWid.push({field:$(v).data("field"),width:$(v).width()})});var widthStr=JSON.stringify(resizeTableWid);$.dcookie(itemName,widthStr,{expires:new Date("2099-12-31"),path:window.location.pathname});$table.setTdPopover()}};if(typeof options==="string"&&options){var value,param=Array.prototype.slice.call(arguments,1),obj=tableObj.data("bootstrap.table");value=obj[options].apply(obj,param);return typeof value==="undefined"?this:value}else{if(typeof options==="object"&&options){options=$.extend({},setting,options);var columnSetting={sortable:true};var subColumns=options.columns;var lastRow=[];if(typeof subColumns[0]=="object"&&typeof subColumns[0].length=="number"){for(var k=0;k<subColumns.length;k++){for(var j=0;j<subColumns[k].length;j++){if(subColumns[k][j].colspan==undefined){lastRow.push(subColumns[k][j])}}}}else{lastRow=subColumns}for(var i=0;i<lastRow.length;i++){if(lastRow[i].checkbox||lastRow[i].radio){}else{lastRow[i].sortable=true}}$.include([__bootstrapVersionPath+"/plugins/table/css/bootstrap-table.css",__bootstrapVersionPath+"/plugins/table/js/bootstrap-table_v1.js",__bootstrapVersionPath+"/plugins/table/js/bootstrap-table-zh-CN.js",__bootstrapVersionPath+"/plugins/table/css/bootstrap-table-custom.css",__bootstrapVersionPath+"/plugins/table/js/inlineBox.js"]);$.include([__bootstrapVersionPath+"/plugins/table/js/table_editor.js"]);if(options.editable){if(options.columns!=null){var columndefault={mode:options.mode};for(var i=0;i<options.columns.length;i++){if(options.columns[i].editable!=null){options.columns[i].editable=$.extend({},columndefault,options.columns[i].editable)}}}$.include([__bootstrapVersionPath+"/plugins/table/js/bootstrap-editable.js",__bootstrapVersionPath+"/plugins/table/js/bootstrap-table-editable.js",__bootstrapVersionPath+"/plugins/table/css/bootstrap-editable.css"])}if(options.resizable){$.include([__bootstrapVersionPath+"/plugins/table/js/colResizable-1.6.js",__bootstrapVersionPath+"/plugins/table/js/bootstrap-table-resizable.js"])}if(options.fixedColumns){$.include([__bootstrapVersionPath+"/plugins/table/css/bootstrap-table-fixed-columns.css",__bootstrapVersionPath+"/plugins/table/js/bootstrap-table-fixed-columns.js"])}if(options.showJumpto){$.include([__bootstrapVersionPath+"/plugins/table/css/bootstrap-table-jumpto.css",__bootstrapVersionPath+"/plugins/table/js/bootstrap-table-jumpto.js"])}if(options.autoRefreshTime!==false){var refreshTime=parseInt(options.autoRefreshTime);if(!isNaN(refreshTime)){var timer=setInterval(function(){if(options.url===""||options.url==undefined){tableObj.bootstrapTable("load",options.data)}else{tableObj.bootstrapTable("refresh",{silent:true})}},refreshTime)}}if(options.clickToSelect){options.onClickCell=function(field,value,row,$element){var opts=tableObj.bootstrapTable("getOptions"),resultOpt,checkType=tableObj.find("input[name='btSelectItem']").attr("type");for(var i=0;i<opts.columns.length;i++){var col_lv1=opts.columns[i];for(var j=0;j<col_lv1.length;j++){var col_lv2=col_lv1[j];if(col_lv2.field==field){resultOpt=col_lv2;if(checkType==="checkbox"){if(!resultOpt.clickToSelect){resultOpt.clickToSelect=true}if($element.attr("type")!==undefined){resultOpt.clickToSelect=false}}return false}}}}}if(options.exportExcel&&typeof options.exportExcel==="object"){$.include([__bootstrapVersionPath+"/plugins/table/js/table_excel.js"]);if(!options.toolbar){options.toolbar=[]}if(typeof options.toolbar==="object"){var isAdd=true;$.each(options.toolbar,function(){if(this["data-click"]==="exportExcelBtn"){isAdd=false;return false}else{isAdd=true}});if(isAdd){options.toolbar.unshift({name:"导出至Excel",classes:"bootstrap-table-download",type:"button","data-click":"exportExcelBtn"})}}else{if(typeof options.toolbar==="string"){var excelBtn='<button class="bootstrap-table-download" type="button" data-click="exportExcelBtn">导出至Excel</button>';$(options.toolbar).prepend(excelBtn)}}}var bootstrap_table=tableObj.bootstrapTable(options);if($.plugMiniConfig){bootstrap_table.parents(".bootstrap-table").addClass("miniTable")}if(options.clickToEditMode==="all"){tableObj.tableEditor("initAll")}if(options.exportExcel&&typeof options.exportExcel==="object"){$("[data-click='exportExcelBtn']").on("click",function(){if($(this).find(".exportExcelBtn_link").length===0){$(this).after('<a class="exportExcelBtn_link" href="" style="display:none;"></a>')}exportExcel(tableObj,"",options.exportExcel.fileName+".xls",options.exportExcel)})}return bootstrap_table}}};$.extend({dinit:function(options){var defaultsetting={proving:true};options=$.extend({},defaultsetting,options);if(options.proving){$.include([__bootstrapVersionPath+"/plugins/layer/layer.js"]);$.include([__bootstrapVersionPath+"/plugins/layer/theme/default/layer.css"]);$.include([__bootstrapVersionPath+"/plugins/layer/theme/default/layer.datanew.css"]);$(document).on("change","[proving]",function(){if(!$.dvalidate($(this))){layer.close($(this).attr("tipsid"));var index=layer.tips($("this").attr("title")==null?"输入数据错误":$("this").attr("title"),$(this),{tipsMore:true});$(this).attr("tipsid",index)}else{layer.close($(this).attr("tipsid"))}})}}});$.extend({dvalidate:function(obj){var provings=obj.attr("proving").split("|");for(var i=0;i<provings.length;i++){var value=obj.val();if(provings[i]=="notEmpty"){if(value==""){return false}}else{if(provings[i]=="email"){var myreg=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(value!=""&&!myreg.test(value)){return false}}else{if(provings[i]=="idcard"){if(value!=""&&!/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[12])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(value)){return false}}else{if(provings[i]=="phone"){if(value!=""&&!/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/.test(value)){return false}}else{if(provings[i]=="url"){var RegUrl=new RegExp();RegUrl.compile("^[A-Za-z]+://[A-Za-z0-9-_]+\\.[A-Za-z0-9-_%&?/.=]+$");if(value!=""&&!RegUrl.test(value)){return false}}else{var f=eval(provings[i]);if(!f){return false}}}}}}}return true}});$.extend({dajax:function(options){$.include([__bootstrapVersionPath+"/plugins/layer/layer.js"]);$.include([__bootstrapVersionPath+"/plugins/layer/theme/default/layer.css"]);$.include([__bootstrapVersionPath+"/plugins/layer/theme/default/layer.datanew.css"]);var index;var defaultsetting=$.extend({},{type:"POST",loadMsg:"加载中",dataType:"json",showLoading:true,redirect:false,beforeSend:function(xhr){if(options.showLoading){index=layer.load(1)}if(options.sendbefore){options.sendbefore(xhr)}},complete:function(){if(options.showLoading){layer.close(index)}}},$.dajaxConfig);options=$.extend({},defaultsetting,options);if(options.redirect==true){var temp=document.createElement("form");temp.action=options.url;temp.method=options.type;temp.style.display="none";for(var x in options.data){var opt=document.createElement("textarea");opt.name=x;opt.value=options.data[x];temp.appendChild(opt)}document.body.appendChild(temp);temp.submit()}else{$.ajax(options)}}});$.extend({editTableCell:function(settings){var defaultSettings={tableobj:$("#datatable"),rowNum:1,columnNum:1,editVal:{type:"text",title:"title"}};$.extend(defaultSettings,settings);var rowLen=settings.tableobj.find("tr").length;var columnLen=settings.tableobj.find("tr:eq(0)").children().length;var cell;drowNum=settings.rowNum;dcolumnNum=settings.columnNum-1;if(drowNum!=null&&dcolumnNum!=null){cell=settings.tableobj.find("tr").eq(drowNum).find("td").eq(dcolumnNum)}var tabledata=settings.tableobj.data("bootstrap.table");console.log(tabledata);var index=drowNum-1;var datapk=tabledata.data[index].guid;var datafield=tabledata.columns[drowNum].field;var datavalue=cell.text();cell.wrapInner('<a href="javascript:void(0)" data-name="'+datafield+'" data-pk="'+datapk+'" data-value="'+datavalue+'"></a>');cell.find("a").editable(settings.editVal);return cell}});$.extend({dalert:function(options){$.include([__bootstrapVersionPath+"/plugins/layer/layer.js"]);$.include([__bootstrapVersionPath+"/plugins/layer/theme/default/layer.css"]);$.include([__bootstrapVersionPath+"/plugins/layer/theme/default/layer.datanew.css"]);if(typeof options==="string"){return layer.alert(options)}else{var defaultsetting={text:"",icon:1};options=$.extend({},defaultsetting,$.dalertConfig,options);return layer.alert(options.text,options)}}});$.extend({dconfirm:function(options){$.include([__bootstrapVersionPath+"/plugins/layer/layer.js"]);$.include([__bootstrapVersionPath+"/plugins/layer/theme/default/layer.css"]);$.include([__bootstrapVersionPath+"/plugins/layer/theme/default/layer.datanew.css"]);var defaultsetting={btn:["确定","取消"]};options=$.extend({},defaultsetting,options);var str="layer.confirm(options.text,options";if(options.funs!=null){for(var i=0;i<options.funs.length;i++){str+=",options.funs["+i+"]"}}str+=")";return eval("("+str+")")}});$.extend({dloadformdata:function(obj,data,name){var dname="name";if(name!=null){dname=name}obj.find("["+dname+"]").each(function(){if($(this).attr("boxType")!=undefined){$(this).parent().find(".form-control")[$(this).attr("boxType")]("setValue",data[$(this).attr(dname)])}var key=$(this).attr(dname);if(data[key]!=null){$(this).val(data[key])}else{$(this).val("")}})}});$.extend({ddisable:function(obj,flag,name){var dname="name";if(name!=null){dname=name}obj.find("["+dname+"]").each(function(){$(this).attr("disabled",flag)})}});$.fn.dInputNumberAdd=function(numberType,defaultValue){var inputHtml='<input type="text" class="dnumberInputText" defaultvalue=""><input type="button" class="dnumberInputClear" value="清空">';$(this).append(inputHtml);var inputText=$(this).children("input").eq(0);var inputClear=$(this).children("input").eq(1);inputText.attr("onpaste","return false");inputText.attr("size","22");inputText.attr("style","ime-mode: disabled; margin: 0; padding: 0; text-indent: 5px;");if(numberType=="idcard"){inputText.attr("placeholder","请输入18位身份证号")}else{if(numberType=="tel"){inputText.attr("placeholder","请输入手机号或区号+固话号")}else{if(numberType=="number"){inputText.attr("placeholder","请输入...")}}}var idNo,telNo;if(defaultValue!=undefined&&defaultValue!=null&&$.trim(defaultValue)!="null"&&$.trim(defaultValue)!="undefined"&&$.trim(defaultValue)!=""){var defaultVal=$.trim(defaultValue);inputValChange(defaultVal);inputValNormal()}inputText.on("focus",function(){inputText.val(inputText.val().replace(/[\s\-]/g,""))});inputText.on("input propertychange",function(){inputValChange(inputText.val())});inputText.on("blur",function(){inputValNormal()});inputClear.on("click",function(){inputText.val("");idNo="";telNo="";inputText.focus()});function inputValChange(inputTextVal){if(numberType=="idcard"){if(inputTextVal.length<=17){inputText.val(inputTextVal.replace(/[^0-9]/g,""))}else{if(inputTextVal.length==18){inputText.val(inputTextVal.replace(/[^0-9xX]/g,""));inputText.val(inputTextVal.replace(/[x]/g,"X"))}else{inputText.val(inputTextVal.substring(0,18))}}idNo=inputText.val().substring(0,6)+" "+inputText.val().substring(6,14)+" "+inputText.val().substring(14)}else{if(numberType=="tel"){if(inputTextVal.substring(0,1)=="1"){telChoose(inputTextVal,11);telNo=inputText.val().substring(0,3)+" "+inputText.val().substring(3,7)+" "+inputText.val().substring(7)}else{if(inputTextVal.substring(0,1)=="8"){telChoose(inputTextVal,11);telNo=inputText.val().substring(0,3)+" - "+inputText.val().substring(3,7)+" "+inputText.val().substring(7)}else{if(inputTextVal.substring(0,1)=="0"){if(inputTextVal.substring(1,2)=="1"||inputTextVal.substring(1,2)=="2"){telChoose(inputTextVal,11);telNo=inputText.val().substring(0,3)+" - "+inputText.val().substring(3,7)+" "+inputText.val().substring(7)}else{telChoose(inputTextVal,12);telNo=inputText.val().substring(0,4)+" - "+inputText.val().substring(4,8)+" "+inputText.val().substring(8)}}else{inputText.val("")}}}}else{if(numberType=="number"){inputText.val(inputTextVal.replace(/[^0-9]/g,""))}}}}function telChoose(inputTextVal,telCount){if(inputTextVal.length>=(telCount+1)){inputText.val(inputTextVal.substring(0,telCount))}if(inputTextVal.length<=telCount){inputText.val(inputTextVal.replace(/[^0-9]/g,""))}else{inputText.val(inputTextVal.substring(0,telCount))}}function inputValNormal(){if(numberType=="idcard"&&$.trim(idNo)!=""){inputText.val(idNo)}else{if(numberType=="tel"&&$.trim(telNo)!=""){inputText.val(telNo)}}}};$.fn.dInputNumberValClear=function(isDefaultValue){if(isDefaultValue==false){$(this).children("input").eq(0).val("")}else{if(isDefaultValue==true){$(this).children("input").eq(0).val($(this).children("input").eq(0).attr("defaultValue"))}}};$.fn.dtreetable=function(options){$.include([__bootstrapVersionPath+"/plugins/treegrid/css/jquery.treegrid.css",__bootstrapVersionPath+"/plugins/treegrid/js/jquery.treegrid.js",__bootstrapVersionPath+"/plugins/treegrid/js/jquery.treegrid.bootstrap3.js"]);$this=$(this);if(options.columns){var columns=options.columns;var h="<tr>";for(var i=0;i<columns.length;i++){var st='style="';if(columns[i].width){st+="width: "+columns[i].width+"px;"}if(columns[i].hidden==true){st+="display:none;"}st+='"';h+="<th "+st+">"+columns[i].title+"</th>"}h+="</tr>";$(this).append(h)}if(options.localdata){addtr(options.localdata,options);if(options.loaded&&options.loaded!=null){options.loaded()}}else{if(options.url){$.dajax({url:options.url,data:options.data,success:function(data){addtr(data,options);if(options.loaded&&options.loaded!=null){options.loaded()}}})}}function addtr(datas,options){var parentfield=options.parentfield,selfidfield=options.selfidfield,isLeafField=options.isLeaffield,levelField=options.levelfield;$.each(datas,function(i,data){$tr=$("<tr/>");$tr.attr("treegrid",data[selfidfield]);if(data[parentfield]!=-1){$tr.attr("treegrid-parent",data[parentfield])}$.each(options.columns,function(y,column){$td=$("<td/>");if(column.hidden){$td.css({display:"none"})}if(y==0){for(var enptySpan=0;enptySpan<data[levelField];enptySpan++){$td.append("<span style='width: 16px;height:16px;display:inline-block;'>")}}if(column.isCount==true){var formatedNum=addzero(data[column.field]);if(data[isLeafField]==1){$td.append(' <span class="show_text td_value" >'+formatedNum+'</span><input type="text" class="show_input" style="display: none; margin: 0px;"/>')}else{if(data[selfidfield]!=0){$td.append('<span style="font-weight: bold;color:#0000ff" class="total td_value">'+formatedNum+"</span>")}}}else{$td.append("<span class='td_value'>"+data[column.field]+"</span>")}$tr.append($td)});$this.append($tr)});$(".show_text").parent().off("click").on("click",function(){var moneybox=$(this).children(".show_text");var show_input=moneybox.next(".show_input");show_input.val(moneybox.text());moneybox.hide();show_input.show().select();show_input.focus()});$(".show_input").off("blur").on("blur",function(){var show_input=$(this);var moneybox=show_input.prev(".show_text");moneybox.text(addzero(show_input.val()));moneybox.show();show_input.hide();count(show_input.parent().parent());if(options.onblur&&options.onblur!=null){options.onblur(show_input)}});$(".show_input").off("keypress").on("keypress",function(e){if(e.keyCode==13||e.keyCode==9){var nextrow=$(this).parent().parent().nextAll("tr").find(".show_input").eq(0).parent().parent();if(nextrow.is("tr")){nextrow.find(".show_input").val(nextrow.find(".show_text").text());nextrow.find(".show_input").show().select();nextrow.find(".show_text").hide()}else{$(this).blur()}}})}function count(node){var pid=node.attr("treegrid-parent");selectorP="[treegrid='"+pid+"']";var parentnode=$this.find(selectorP);selector="[treegrid-parent='"+pid+"']";var nodes=$this.find(selector);if(nodes.length==0){return}var t=0;for(var i=0;i<nodes.length;i++){if($(nodes[i]).find(".show_text").length!=0){t+=Number($(nodes[i]).find(".show_text").html())}else{t+=Number($(nodes[i]).find(".total").html())}}$(parentnode).find(".total").html(addzero(t));count(parentnode)}function addzero(value){var value=Math.round(parseFloat(value)*100)/100;var xsd=value.toString().split(".");if(xsd.length==1){value=value.toString()+".00";return value}if(xsd.length>1){if(xsd[1].length<2){value=value.toString()+"0"}return value}}};$.extend({dopen:function(options){$.include([__bootstrapVersionPath+"/plugins/layer/layer.js"]);$.include([__bootstrapVersionPath+"/plugins/layer/theme/default/layer.css"]);$.include([__bootstrapVersionPath+"/plugins/layer/theme/default/layer.datanew.css"]);var defaultsetting={type:1,maxmin:true,parent:false,fixed:true,resize:true};options=$.extend({},defaultsetting,options);var result;if(options.parent&&self.location!=top.location){result=parent.$.dopen(options)}else{if(options.type=="5"){delete options.type;result=layer.tab(options)}else{if(options.type==6){var newContent=createOpenHtml(options.content);options.content=newContent;options.type=1;options.success=function(layero,index){newContent.removeClass("hide")};options.end=function(){newContent.remove()}}else{if(options.type=="2"&&options.data){options.getDataFunc=options.getDataFunc?options.getDataFunc:"getParentData";options.success_=options.success?options.success.toString():"";options.success_=options.success_.substring(options.success_.indexOf("{")+1,options.success_.lastIndexOf("}"));options.success=function(layero,index){var iframeWin=window[layero.find("iframe")[0]["name"]];iframeWin[options.getDataFunc](options.data);eval(options.success_)}}}result=layer.open(options)}}$("div.layui-layer[times]").append('<iframe frameborder= "0" scrolling="no" style="background-color:transparent; position:absolute; z-index: -1; width:100%; height:100%; top:0; left:0;"></iframe>');return result;function createOpenHtml(content){var $parent=$('<div class="dopenPlugs hide"></div>');$("body").append($parent);$.initPage(content,$parent);return $parent}}});$.extend({copyToClipboard:function(elem){var targetId="_hiddenCopyText_";var isInput=elem.tagName==="INPUT"||elem.tagName==="TEXTAREA";var origSelectionStart,origSelectionEnd;if(elem.setSelectionRange===undefined){return false}if(isInput){target=elem;origSelectionStart=elem.selectionStart;origSelectionEnd=elem.selectionEnd}else{target=document.getElementById(targetId);if(!target){var target=document.createElement("textarea");target.style.position="absolute";target.style.left="-9999px";target.style.top="0";target.id=targetId;document.body.appendChild(target)}target.textContent=elem.textContent}var currentFocus=document.activeElement;target.focus();target.setSelectionRange(0,target.value.length);var succeed;try{succeed=document.execCommand("copy")}catch(e){succeed=false}if(currentFocus&&typeof currentFocus.focus==="function"){currentFocus.focus()}if(isInput){elem.setSelectionRange(origSelectionStart,origSelectionEnd)}else{target.textContent=""}return succeed}});$.include([__bootstrapVersionPath+"/config/config.js|likeafter|js/jquery.js",__bootstrapVersionPath+"/js/bootstrap.min.js|likeafter|js/jquery.js",__bootstrapVersionPath+"/css/bootstrap.min.css|likeafter|js/jquery.js",__bootstrapVersionPath+"/css/bootstrap2.css|likeafter|css/bootstrap.min.css"]);if($.plugMiniConfig){$.include([__bootstrapVersionPath+"/css/bootstrap2_mini.css|likeafter|css/bootstrap2.css"])}if(navigator.userAgent.indexOf("MSIE")>0&&(navigator.userAgent.indexOf("MSIE 6.0")>0||navigator.userAgent.indexOf("MSIE 7.0")>0||navigator.userAgent.indexOf("MSIE 8.0")>0)){$.include([__bootstrapVersionPath+"/js/respond.min.js",__bootstrapVersionPath+"/js/html5shiv.min.js"])}$.dinit()})(jQuery);(function(b){var a=function(d,c){this.options=c;this.$el=b(d);this.selectData=this.options.localdata;this.init()};a.defaults={textField:"text",valueField:"id",url:"",localdata:[],onChange:function(c){return false}};a.prototype.appendOption=function(d,e,f){this.$el.find("option").remove();if(this.options.searchOption==true){this.$el.append("<option value=''>全部</option>")}else{if(this.options.searchOption==false){this.$el.append("<option value=''></option>")}}for(var c=0;c<d.length;c++){this.$el.append("<option value='"+d[c][e]+"'>"+d[c][f]+"</option>")}b(this).data("oldValue",this.$el.val())};a.prototype.init=function(){var e,f,c,d;d=this;e=this.options.valueField;f=this.options.textField;c=this.options.url;if(c!=""){b.dajax({url:c,success:function(g){if(g.length==0){return}d.selectData=g;d.appendOption(d.selectData,e,f)}})}this.appendOption(this.selectData,e,f);this.$el.off("change").on("change",function(){var g=d.$el.find("option:selected").index();d.options.onChange.apply(d.options,[d.selectData[g],b(d).data("oldValue")]);b(d).data("oldValue",d.$el.val())})};a.prototype.getValue=function(){return this.$el.val()};a.prototype.setValue=function(c){this.$el.val(c)};a.prototype.disable=function(){this.$el.attr("disabled","disabled")};a.prototype.enable=function(){this.$el.removeAttr("disabled")};a.prototype.loadData=function(c){this.selectData=c;this.$el.children().remove();this.appendOption(c,this.options.valueField,this.options.textField)};b.fn.dselect=function(c){var f=b(this);if(typeof c=="object"){c=b.extend(true,{},a.defaults,c);f.data("Dselect",new a(f,c));return}if(typeof c=="string"){var d,g=Array.prototype.slice.call(arguments,1),e=b(this).data("Dselect");d=e[c].apply(e,g);return typeof d==="undefined"?this:d}}})(jQuery);(function(a){a.extend({buttonDefault:{text:" ",icon:"",size:"",type:"",handler:function(){}}});a.fn.dbutton=function(b){var c=a.replaceTag(a(this),"BUTTON"),b=a.extend({},a.buttonDefault,b);c.attr("type","button").addClass("btn btn-default");if(b.type!=""){c.addClass("btn-"+b.type)}if(b.size!=""){c.addClass("btn-"+b.size)}if(b.icon!=""){if(b.icon.indexOf("glyphicon-")!=-1){a("<span class='glyphicon'>").appendTo(c).addClass(b.icon)}else{c.addClass(b.icon)}}if(b.text!=""){c.append(b.text)}c.on("click",function(){b.handler.apply(this)})}})(jQuery);if(!Array.prototype.map){Array.prototype.map=function(i,h){var b,a,c;if(this==null){throw new TypeError(" this is null or not defined")}var e=Object(this);var f=e.length>>>0;if(Object.prototype.toString.call(i)!="[object Function]"){throw new TypeError(i+" is not a function")}if(h){b=h}a=new Array(f);c=0;while(c<f){var d,g;if(c in e){d=e[c];g=i.call(b,d,c,e);a[c]=g}c++}return a}}if(typeof Array.prototype.forEach!="function"){Array.prototype.forEach=function(b){for(var a=0;a<this.length;a++){b.apply(this,[this[a],a,this])}}}(function(f){f.treeTableDefault={height:"",columns:[],headers:null,treeMode:"gird",useLine:true,useIcon:true,id:"",useCookie:false,onExpandNodeEvents:[],themeName:"arrow",selectMode:"single",idKey:"id",pIdKey:"pid"};var b=function(h){var i={};h.forEach(function(j){i[j.field]=j.title});return i};var a=function(h){return h.map(function(i){return{dataIndex:i.field,width:i.width+"",align:i.align==undefined?"left":i.align,isNodeClick:i.nodeControl==true,renderFunction:i.formatter==undefined?null:i.formatter}})};var g=function(h){return[{columns:a(h).map(function(i){return{dataIndex:i.dataIndex}}),dataObject:b(h),trAttributeNames:["classStyle","style"],trAttributeValueObject:{classStyle:"headerbg",style:""}}]};var e=function(i,h){this.target=i;this.options=h};var d,c;f.fn.treeGrid=function(t){var o=f(this);var s=function(u){return u.map(function(v){if(!v.id){v.id=v[d]}if(!v.pid){v.pid=v[c]}v.dataObject=f.extend(true,{},v);if(t.isOpen==true){v.isOpen=true}return v})};if(typeof t=="object"){f.include([__bootstrapVersionPath+"/plugins/treegrid2/css/tabletree4j.css",__bootstrapVersionPath+"/plugins/treegrid2/js/Core4j.js",__bootstrapVersionPath+"/plugins/treegrid2/js/TableTree4j-debug.js"]);var j=t.columns;d=t.idKey;c=t.pIdKey;t.headers=g(j);t.columns=a(j);t.renderTo=o.attr("id");t=f.extend({},f.treeTableDefault,t);var m=new Core4j.toolbox.TableTree4j(t);o.data("treeGrid",m);if(t.url){f.dajax({url:t.url,success:function(u){m.build(s(u),true)}})}else{m.build(s(t.data),true)}if(o[0].className.indexOf("_subTable")==-1){if(t.height!=""){o.height(t.height).css({overflow:"auto"})}var r=o.wrap("<div class='tableWrap'></div>").parent();var k=t.headers[0].dataObject;var j=t.columns;var p=0;var n=r.prepend("<div class='fixedHeader'><table class='tabletree4j-gird'></table></div>").find(".fixedHeader");if(t.height!=""&&t.height<o.find("table").height()){n.css({"margin-right":i()})}}}if(typeof t=="string"){var q,h=Array.prototype.slice.call(arguments,1),l=o.data("treeGrid");if(t=="transData"){return s(h[0])}q=l[t].apply(l,h);return typeof q==="undefined"?this:q}function i(){var x=document.createElement("p"),w={width:"100px",height:"100px",overflowY:"scroll"},u,v;for(u in w){x.style[u]=w[u]}document.body.appendChild(x);v=x.offsetWidth-x.clientWidth;document.body.removeChild(x);return v}}})(jQuery);(function(a){a.fn.desktop=function(b){var e=a(this),d=null;if(typeof b==="object"){a.include([__bootstrapVersionPath+"/plugins/desktop/css/desktop.css",__bootstrapVersionPath+"/js/jquery-ui.js",__bootstrapVersionPath+"/plugins/desktop/js/desktop.js",__bootstrapVersionPath+"/plugins/contextmenu/contextMenu.js",__bootstrapVersionPath+"/plugins/contextmenu/contextMenu.css"]);d=e.data("desktop");if(d!=null){d.options=a.extend({},d.options,b);return}b=a.extend({},Desktop.DEFAULTS,b);e.data("desktop",new Desktop(e,b));e.data("type","desktop");var g=setInterval(function(){if(a(".glyphicon-trash").width()>0){clearInterval(g);b.onDeskLoaded.call(this,e)}},10);return}if(typeof b==="string"){var c,f=Array.prototype.slice.call(arguments,1),d=e.data("desktop");c=d[b].apply(d,f);return typeof c==="undefined"?this:c}}})(jQuery);(function(a){a.fn.billPrint=function(b){var e=a(this),d=null;if(!b){b={}}if(typeof b==="object"){a.include([__bootstrapVersionPath+"/plugins/billPrint/billPrint.css",__bootstrapVersionPath+"/plugins/ckeditor/ckeditor.js",__bootstrapVersionPath+"/plugins/billPrint/jquery.PrintArea.js",__bootstrapVersionPath+"/plugins/billPrint/billPrint.js"]);d=e.data("billPrint");if(d!=null){d.options=a.extend({},d.options,b);return}b=a.extend({},BillPrint.DEFAULTS,b);e.data("billPrint",new BillPrint(e,b));e.data("type","billPrint");return}else{if(typeof b==="string"){var c,f=Array.prototype.slice.call(arguments,1);d=e.data("billPrint");c=d[b].apply(d,f);return typeof c==="undefined"?this:c}}}})(jQuery);(function(a){a.fn.mediaBox=function(b){var f=a.replaceTag(a(this),"A"),e=null;if(!b){b={}}if(typeof b==="object"){a.include([__bootstrapVersionPath+"/plugins/media/jquery.media.js"]);e=f.data("mediaBox");if(e!=null){e.options=a.extend({},e.options,b);return}var d={width:"100%",height:400};b=a.extend({},d,b);f.data("mediaBox",f.media(b));f.data("type","mediaBox");return}else{if(typeof b==="string"){var c,g=Array.prototype.slice.call(arguments,1);e=f.data("mediaBox");c=e[b].apply(e,g);return typeof c==="undefined"?this:c}}}})(jQuery);(function(a){a.fn.videoBox=function(b){var g=a.replaceTag(a(this),"DIV"),f=null;if(!b){b={}}if(typeof b==="object"){a.include([__bootstrapVersionPath+"/noreduce/videoBox/ckplayer.min.js"]);f=g.data("videoBox");if(f!=null){f.options=a.extend({},f.options,b);return}var e={width:"100%",height:400,container:(g.attr("id")!==undefined?"#"+g.attr("id"):"."+g.attr("class").split(" ")[0])};b=a.extend({},e,b);g.width(b.width).height(b.height);var c=new ckplayer(b);g.data("videoBox",c);g.data("type","videoBox");return c}else{if(typeof b==="string"){var d,h=Array.prototype.slice.call(arguments,1);f=g.data("videoBox");d=f[b].apply(f,h);return typeof d==="undefined"?this:d}}}})(jQuery);(function(a){a.fn.layoutBox=function(b){var f=a.replaceTag(a(this),"DIV"),e=null;if(!b){b={}}if(typeof b==="object"){a.include([__bootstrapVersionPath+"/plugins/layoutBox/layoutBox.css",__bootstrapVersionPath+"/plugins/layoutBox/layoutBox.js"]);e=f.data("layoutBox");if(e!=null){e.options=a.extend({},e.options,b);return}b=a.extend({},LayoutBox.DEFAULTS,b);var c=new LayoutBox(f,b);f.data("layoutBox",c);f.data("type","layoutBox");return c}else{if(typeof b==="string"){var d,g=Array.prototype.slice.call(arguments,1);e=f.data("layoutBox");d=e[b].apply(e,g);return typeof d==="undefined"?this:d}}}})(jQuery);(function(a){a.fn.progressBar=function(b){var f=a.replaceTag(a(this),"DIV"),e=null;if(!b){b={}}if(typeof b==="object"){a.include([__bootstrapVersionPath+"/plugins/progressBar/progressBar.css",__bootstrapVersionPath+"/plugins/progressBar/progressBar.js"]);e=f.data("progressBar");if(e!=null){e.options=a.extend({},e.options,b);return}b=a.extend({},ProgressBar.DEFAULTS,b);var c=new ProgressBar(f,b);f.data("progressBar",c);f.data("type","progressBar");return c}else{if(typeof b==="string"){var d,g=Array.prototype.slice.call(arguments,1);e=f.data("progressBar");d=e[b].apply(e,g);return typeof d==="undefined"?this:d}}}})(jQuery);