(function(f){function d(v,k,w){var q=f(v),u=q.clone(k,w),h=q.find("textarea").add(q.filter("textarea")),x=u.find("textarea").add(u.filter("textarea")),t=q.find("select").add(q.filter("select")),o=u.find("select").add(u.filter("select")),s,p,r,n;for(s=0,p=h.length;s<p;++s){f(x[s]).val(f(h[s]).val())}for(s=0,p=t.length;s<p;++s){for(r=0,n=t[s].options.length;r<n;++r){if(t[s].options[r].selected===true){o[s].options[r].selected=true}}}return u}function g(h){var i=f("");try{i=d(h)}catch(j){i=f("<span />").html(h)}return i}function b(o,l,i){var m=f.Deferred();try{o=o.contentWindow||o.contentDocument||o;var h=o.document||o.contentDocument||o;if(i.doctype){h.write(i.doctype)}h.write(l);h.close();var n=false,j=function(){if(n){return}o.focus();try{if(!o.document.execCommand("print",false,null)){o.print()}f("body").focus()}catch(p){o.print()}o.close();n=true;m.resolve()};f(o).on("load",j);setTimeout(j,i.timeout)}catch(k){m.reject(k)}return m}function c(j,i){var k=f(i.iframe+"");var h=k.length;if(h===0){k=f('<iframe height="0" width="0" border="0" wmode="Opaque"/>').prependTo("body").css({position:"absolute",top:-999,left:-999})}var l=k.get(0);return b(l,j,i).done(function(){setTimeout(function(){if(h===0){k.remove()}},1000)}).fail(function(m){console.error("Failed to print from iframe",m);a(j,i)}).always(function(){try{i.deferred.resolve()}catch(m){console.warn("Error notifying deferred",m)}})}function a(i,h){var j=window.open();return b(j,i,h).always(function(){try{h.deferred.resolve()}catch(k){console.warn("Error notifying deferred",k)}})}function e(h){return !!(typeof Node==="object"?h instanceof Node:h&&typeof h==="object"&&typeof h.nodeType==="number"&&typeof h.nodeName==="string")}f.print=f.fn.print=function(){var q,n,p=this;if(p instanceof f){p=p.get(0)}if(e(p)){n=f(p);if(arguments.length>0){q=arguments[0]}}else{if(arguments.length>0){n=f(arguments[0]);if(e(n[0])){if(arguments.length>1){q=arguments[1]}}else{q=arguments[0];n=f("html")}}else{n=f("html")}}var j={globalStyles:true,mediaPrint:false,stylesheet:null,noPrintSelector:".no-print",iframe:true,append:null,prepend:null,manuallyCopyFormValues:true,deferred:f.Deferred(),timeout:750,title:null,doctype:"<!doctype html>"};q=f.extend({},j,(q||{}));var k=f("");if(q.globalStyles){k=f("style, link, meta, base, title")}else{if(q.mediaPrint){k=f("link[media=print]")}}if(q.stylesheet){k=f.merge(k,f('<link rel="stylesheet" href="'+q.stylesheet+'">'))}var h=d(n);h=f("<span/>").append(h);h.find(q.noPrintSelector).remove();h.append(d(k));if(q.title){var o=f("title",h);if(o.length===0){o=f("<title />");h.append(o)}o.text(q.title)}h.append(g(q.append));h.prepend(g(q.prepend));if(q.manuallyCopyFormValues){h.find("input").each(function(){var r=f(this);if(r.is("[type='radio']")||r.is("[type='checkbox']")){if(r.prop("checked")){r.attr("checked","checked")}}else{r.attr("value",r.val())}});h.find("select").each(function(){var r=f(this);r.find(":selected").attr("selected","selected")});h.find("textarea").each(function(){var r=f(this);r.text(r.val())})}var m=h.html();try{q.deferred.notify("generated_markup",m,h)}catch(i){console.warn("Error notifying deferred",i)}h.remove();if(q.iframe){try{c(m,q)}catch(l){console.error("Failed to print from iframe",l.stack,l.message);a(m,q)}}else{a(m,q)}return this}})(jQuery);