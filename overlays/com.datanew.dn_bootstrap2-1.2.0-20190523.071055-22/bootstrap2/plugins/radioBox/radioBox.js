var RadioBox=function(b,a){this.$target=b;this.options=a;this.$valueBox;this.datas;this.initRadioBox()};RadioBox.prototype.initRadioBox=function(){var d=this,a=d.$target,b=d.options;a.addClass("radioBox").append("<input type='hidden' class='valueBox'/>");d.$valueBox=a.find(".valueBox").attr("boxtype","radioBox");if(b.id){a.attr("id",b.id)}if(b.hasOwnProperty("dname")){d.$valueBox.attr("dname",b.dname)}if(a.attr("dname")!==undefined){d.$valueBox.attr("dname",a.attr("dname"));a.removeAttr("dname")}if(b.hasOwnProperty("name")){d.$valueBox.attr("name",b.name)}if(a.attr("name")!==undefined){d.$valueBox.attr("name",a.attr("name"));a.removeAttr("name")}if(b.url!==""){$.dajax({url:b.url,data:b.queryParam,success:function(e){d.datas=e;c(d.datas)}})}else{if(b.localdata!==undefined){d.datas=b.localdata;c(d.datas)}}function c(g){var f="",e="";if(b.multiple){f="checkbox";e="fa-square-o"}else{f="radio";e="fa-circle-o"}var h=f+"-inline";$.each(g,function(i,k){var j=$('<label class="radio_item '+h+'">    <input type="'+f+'" class="item_input" name="'+b.radioName+'" value="'+k[b.valueField]+'">    <i class="fa '+e+' item_icon"></i>    <span class="item_name">'+k[b.textField]+"</span></label>");d.$valueBox.before(j);if(k.disabled){j.addClass("disabled").find(".item_input").prop("disabled",true)}if(k.readonly){j.addClass("disabled").find(".item_input").prop({disabled:true,readonly:true})}if(k.checked){d.setValue(k[b.valueField])}});if(!!b.defaultValue){d.setValue(b.defaultValue);a.data("oldValue",b.defaultValue)}}a.on("change",".item_input",function(){var l=$(this),i=l.parents(".radio_item"),k=l.prop("checked");if(k){i.addClass("checked")}else{i.removeClass("checked")}if(!b.multiple){i.siblings(".radio_item").removeClass("checked")}var h="",f=d.$valueBox.val(),e=d.getDataById(l.val());var j=a.find(".item_input:checked"),g=[];j.each(function(){g.push($(this).val())});d.$valueBox.val(g.join(","));h=d.$valueBox.val();if(h==f){return}a.data("oldValue",f);d.options.onChange.apply(d,[h,f,e]);d.onTrigger()})};RadioBox.prototype.onTrigger=function(){var c=this,a=this.$target;a.removeClass("has-error");if(c.options.required||c.options.validate){var b=c.validate();if(!b){c.options.validFail.apply(this,[a])}else{c.options.validSuccess.apply(this,[a])}}};RadioBox.prototype.clear=function(){this.$target.find(".radio_item").each(function(){var a=$(this).find(".item_input");a.prop("checked",false);$(this).removeClass("checked")});this.$valueBox.val("");this.$target.data("oldValue","")};RadioBox.prototype.destroy=function(){this.$target.remove()};RadioBox.prototype.validate=function(){var c=true,g=$.trim(this.$valueBox.val()),f=this,d=this.options,b=this.$target;if(b.hasClass("disabled")||b.is(":hidden")){return c}if(d.required&&g==""){f.tips("该选项为必填",b);b.addClass("has-error");return false}if(typeof d.validate=="function"){var h=d.validate.apply(d,[g,b]);if(h&&h.result==false){f.tips(h.msg,b);b.addClass("has-error");return h.result}}else{if(typeof d.validate=="string"){var e=d.validate.split("|"),a;$.each(e,function(j,k){c=$.globalValid[k].reg.test(g);a=$.globalValid[k].text;if(!c){return false}});if(!c){f.tips(a,b)}}}if(c){b.removeClass("has-error")}else{b.addClass("has-error")}return c};RadioBox.prototype.tips=function(b,a){layer.tips(b,a,{tipsMore:true,time:2000})};RadioBox.prototype.getDataById=function(c){var b=this.options,a=null;$.each(this.datas,function(d,e){if(c==e[b.valueField]){a=e;return false}});return a};RadioBox.prototype.getValue=function(){if(!!this.$valueBox.prop("disabled")){return false}return this.$valueBox.val()};RadioBox.prototype.setValue=function(e){var d=this,a=d.$target,c=d.$valueBox;d.clear();e=e+"";if(e===""){d.clear();return false}c.val(e);var b=e.split(",");$.each(b,function(f,g){a.find(".item_input[value='"+g+"']").prop("checked",true).parents(".radio_item").addClass("checked")});d.$target.data("oldValue",e);d.validate()};RadioBox.prototype.readonly=function(){this.$target.find(".radio_item").each(function(){$(this).addClass("disabled").find(".item_input").prop({disabled:true,readonly:true})})};RadioBox.prototype.disable=function(){this.$target.find(".radio_item").each(function(){$(this).addClass("disabled").find(".item_input").prop("disabled",true)})};RadioBox.prototype.enable=function(){this.$target.find(".radio_item").each(function(){$(this).removeClass("disabled").find(".item_input").prop("disabled",false)})};RadioBox.prototype.setDisabled=function(a){if(a==true){this.disable();this.$valueBox.prop("disabled",true)}else{this.enable();this.$valueBox.prop("disabled",false)}};RadioBox.prototype.setReadonly=function(a){if(a==true){this.disable()}else{this.enable()}};