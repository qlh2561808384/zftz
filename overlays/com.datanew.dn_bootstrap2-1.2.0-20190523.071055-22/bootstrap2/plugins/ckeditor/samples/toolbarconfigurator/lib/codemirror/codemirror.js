(function(a){if("object"==typeof exports&&"object"==typeof module){module.exports=a()}else{if("function"==typeof define&&define.amd){return define([],a)}this.CodeMirror=a()}})(function(){function e7(r,q){if(!(this instanceof e7)){return new e7(r,q)}this.options=q=q?fw(q):{};fw(bD,q,!1);I(q);var w=q.value;"string"==typeof w&&(w=new fC(w,q.mode));this.doc=w;var v=new e7.inputStyles[q.inputStyle](this),v=this.display=new bq(r,w,v);v.wrapper.CodeMirror=this;bl(this);aW(this);q.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");q.autofocus&&!gl&&v.input.focus();aK(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new fS,keySeq:null,specialChars:null};var u=this;fV&&11>fT&&setTimeout(function(){u.display.input.reset(!0)},20);a0(this);ay||(aO(),ay=!0);fs(this);this.curOp.forceUpdate=!0;al(this,w);q.autofocus&&!gl||u.hasFocus()?setTimeout(fk(g,this),20):eR(this);for(var t in eZ){if(eZ.hasOwnProperty(t)){eZ[t](this,q[t],l)}}gB(this);q.finishInit&&q.finishInit(this);for(w=0;w<gw.length;++w){gw[w](this)}eL(this);fI&&q.lineWrapping&&"optimizelegibility"==getComputedStyle(v.lineDiv).textRendering&&(v.lineDiv.style.textRendering="auto")}function bq(r,q,t){this.input=t;this.scrollbarFiller=e5("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=e5("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=e5("div",null,"CodeMirror-code");this.selectionDiv=e5("div",null,null,"position: relative; z-index: 1");this.cursorDiv=e5("div",null,"CodeMirror-cursors");this.measure=e5("div",null,"CodeMirror-measure");this.lineMeasure=e5("div",null,"CodeMirror-measure");this.lineSpace=e5("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=e5("div",[e5("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative");this.sizer=e5("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=e5("div",null,null,"position: absolute; height: "+gp+"px; width: 1px;");this.gutters=e5("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=e5("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=e5("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");fV&&8>fT&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);fI||ai&&gl||(this.scroller.draggable=!0);r&&(r.appendChild?r.appendChild(this.wrapper):r(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=q.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;t.init(this)}function f6(q){q.doc.mode=e7.getMode(q.options,q.doc.modeOption);eE(q)}function eE(q){q.doc.iter(function(r){r.stateAfter&&(r.stateAfter=null);r.styles&&(r.styles=null)});q.doc.frontier=q.doc.first;er(q,100);q.state.modeGen++;q.curOp&&fB(q)}function fZ(r){var q=i(r.display),u=r.options.lineWrapping,t=u&&Math.max(5,r.display.scroller.clientWidth/d7(r.display)-3);return function(x){if(gy(r.doc,x)){return 0}var w=0;if(x.widgets){for(var v=0;v<x.widgets.length;v++){x.widgets[v].height&&(w+=x.widgets[v].height)}}return u?w+(Math.ceil(x.text.length/t)||1)*q:w+q}}function bm(r){var q=r.doc,t=fZ(r);q.iter(function(v){var u=t(v);u!=v.height&&fl(v,u)})}function aW(q){q.display.wrapper.className=q.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+q.options.theme.replace(/(^|\s)\s*/g," cm-s-");dU(q)}function dH(q){bl(q);fB(q);setTimeout(function(){aX(q)},20)}function bl(r){var q=r.display.gutters,w=r.options.gutters;f8(q);for(var v=0;v<w.length;++v){var u=w[v],t=q.appendChild(e5("div",null,"CodeMirror-gutter "+u));"CodeMirror-linenumbers"==u&&(r.display.lineGutter=t,t.style.width=(r.display.lineNumWidth||1)+"px")}q.style.display=v?"":"none";aL(r)}function aL(q){q.display.sizer.style.marginLeft=q.display.gutters.offsetWidth+"px"}function eY(r){if(0==r.height){return 0}for(var q=r.text.length,u,t=r;u=bo(t,!0);){u=u.find(0,!0),t=u.from.line,q+=u.from.ch-u.to.ch}for(t=r;u=bo(t,!1);){u=u.find(0,!0),q-=t.text.length-u.from.ch,t=u.to.line,q+=t.text.length-u.to.ch}return q}function az(r){var q=r.display;r=r.doc;q.maxLine=e4(r,r.first);q.maxLineLength=eY(q.maxLine);q.maxLineChanged=!0;r.iter(function(t){var u=eY(t);u>q.maxLineLength&&(q.maxLineLength=u,q.maxLine=t)})}function I(r){var q=fR(r.gutters,"CodeMirror-linenumbers");-1==q&&r.lineNumbers?r.gutters=r.gutters.concat(["CodeMirror-linenumbers"]):-1<q&&!r.lineNumbers&&(r.gutters=r.gutters.slice(0),r.gutters.splice(q,1))}function dv(r){var q=r.display,u=q.gutters.offsetWidth,t=Math.round(r.doc.height+am(r.display));return{clientHeight:q.scroller.clientHeight,viewHeight:q.wrapper.clientHeight,scrollWidth:q.scroller.scrollWidth,clientWidth:q.scroller.clientWidth,viewWidth:q.wrapper.clientWidth,barLeft:r.options.fixedGutter?u:0,docHeight:t,scrollHeight:t+eS(r)+q.barHeight,nativeBarWidth:q.nativeBarWidth,gutterWidth:u}}function m(r,q,v){this.cm=v;var u=this.vert=e5("div",[e5("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),t=this.horiz=e5("div",[e5("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r(u);r(t);e3(u,"scroll",function(){u.clientHeight&&q(u.scrollTop,"vertical")});e3(t,"scroll",function(){t.clientWidth&&q(t.scrollLeft,"horizontal")});this.checkedOverlay=!1;fV&&8>fT&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function a(){}function aK(q){q.display.scrollbars&&(q.display.scrollbars.clear(),q.display.scrollbars.addClass&&dh(q.display.wrapper,q.display.scrollbars.addClass));q.display.scrollbars=new e7.scrollbarModel[q.options.scrollbarStyle](function(r){q.display.wrapper.insertBefore(r,q.display.scrollbarFiller);e3(r,"mousedown",function(){q.state.focused&&setTimeout(function(){q.display.input.focus()},0)});r.setAttribute("cm-not-content","true")},function(r,t){"horizontal"==t?ey(q,r):cX(q,r)},q);q.display.scrollbars.addClass&&cK(q.display.wrapper,q.display.scrollbars.addClass)}function el(r,q){q||(q=dv(r));var v=r.display.barWidth,u=r.display.barHeight;fo(r,q);for(var t=0;4>t&&v!=r.display.barWidth||u!=r.display.barHeight;t++){v!=r.display.barWidth&&r.options.lineWrapping&&eK(r),fo(r,dv(r)),v=r.display.barWidth,u=r.display.barHeight}}function fo(r,q){var u=r.display,t=u.scrollbars.update(q);u.sizer.style.paddingRight=(u.barWidth=t.right)+"px";u.sizer.style.paddingBottom=(u.barHeight=t.bottom)+"px";t.right&&t.bottom?(u.scrollbarFiller.style.display="block",u.scrollbarFiller.style.height=t.bottom+"px",u.scrollbarFiller.style.width=t.right+"px"):u.scrollbarFiller.style.display="";t.bottom&&r.options.coverGutterNextToScrollbar&&r.options.fixedGutter?(u.gutterFiller.style.display="block",u.gutterFiller.style.height=t.bottom+"px",u.gutterFiller.style.width=q.gutterWidth+"px"):u.gutterFiller.style.display=""}function gq(r,q,w){var v=w&&null!=w.top?Math.max(0,w.top):r.scroller.scrollTop,v=Math.floor(v-r.lineSpace.offsetTop),u=w&&null!=w.bottom?w.bottom:v+r.wrapper.clientHeight,v=aZ(q,v),u=aZ(q,u);if(w&&w.ensure){var t=w.ensure.from.line;w=w.ensure.to.line;t<v?(v=t,u=aZ(q,eF(e4(q,t))+r.wrapper.clientHeight)):Math.min(w,q.lastLine())>=u&&(v=aZ(q,eF(e4(q,w))-r.wrapper.clientHeight),u=w)}return{from:v,to:Math.max(u,v+1)}}function aX(z){var y=z.display,x=y.view;if(y.alignWidgets||y.gutters.firstChild&&z.options.fixedGutter){for(var w=f0(y)-y.scroller.scrollLeft+z.doc.scrollLeft,v=y.gutters.offsetWidth,u=w+"px",t=0;t<x.length;t++){if(!x[t].hidden){z.options.fixedGutter&&x[t].gutter&&(x[t].gutter.style.left=u);var r=x[t].alignable;if(r){for(var q=0;q<r.length;q++){r[q].style.left=u}}}}z.options.fixedGutter&&(y.gutters.style.left=w+v+"px")}}function gB(r){if(!r.options.lineNumbers){return !1}var q=r.doc,q=fp(r.options,q.first+q.size-1),v=r.display;if(q.length!=v.lineNumChars){var u=v.measure.appendChild(e5("div",[e5("div",q)],"CodeMirror-linenumber CodeMirror-gutter-elt")),t=u.firstChild.offsetWidth,u=u.offsetWidth-t;v.lineGutter.style.width="";v.lineNumInnerWidth=Math.max(t,v.lineGutter.offsetWidth-u)+1;v.lineNumWidth=v.lineNumInnerWidth+u;v.lineNumChars=v.lineNumInnerWidth?q.length:-1;v.lineGutter.style.width=v.lineNumWidth+"px";aL(r);return !0}return !1}function fp(r,q){return String(r.lineNumberFormatter(q+r.firstLineNumber))}function f0(q){return q.scroller.getBoundingClientRect().left-q.sizer.getBoundingClientRect().left}function ex(r,q,u){var t=r.display;this.viewport=q;this.visible=gq(t,r.doc,q);this.editorIsHidden=!t.wrapper.offsetWidth;this.wrapperHeight=t.wrapper.clientHeight;this.wrapperWidth=t.wrapper.clientWidth;this.oldDisplayWidth=bV(r);this.force=u;this.dims=eW(r);this.events=[]}function eJ(r,q){var x=r.display,w=r.doc;if(q.editorIsHidden){return bI(r),!1}if(!q.force&&q.visible.from>=x.viewFrom&&q.visible.to<=x.viewTo&&(null==x.updateLineNumbers||x.updateLineNumbers>=x.viewTo)&&x.renderedView==x.view&&0==eV(r)){return !1}gB(r)&&(bI(r),q.dims=eW(r));var v=w.first+w.size,u=Math.max(q.visible.from-r.options.viewportMargin,w.first),t=Math.min(v,q.visible.to+r.options.viewportMargin);x.viewFrom<u&&20>u-x.viewFrom&&(u=Math.max(w.first,x.viewFrom));x.viewTo>t&&20>x.viewTo-t&&(t=Math.min(v,x.viewTo));bv&&(u=ew(r.doc,u),t=eI(r.doc,t));w=u!=x.viewFrom||t!=x.viewTo||x.lastWrapHeight!=q.wrapperHeight||x.lastWrapWidth!=q.wrapperWidth;v=r.display;0==v.view.length||u>=v.viewTo||t<=v.viewFrom?(v.view=ek(r,u,t),v.viewFrom=u):(v.viewFrom>u?v.view=ek(r,u,v.viewFrom).concat(v.view):v.viewFrom<u&&(v.view=v.view.slice(aN(r,u))),v.viewFrom=u,v.viewTo<t?v.view=v.view.concat(ek(r,v.viewTo,t)):v.viewTo>t&&(v.view=v.view.slice(0,aN(r,t))));v.viewTo=t;x.viewOffset=eF(e4(r.doc,x.viewFrom));r.display.mover.style.top=x.viewOffset+"px";t=eV(r);if(!w&&0==t&&!q.force&&x.renderedView==x.view&&(null==x.updateLineNumbers||x.updateLineNumbers>=x.viewTo)){return !1}u=es();4<t&&(x.lineDiv.style.display="none");aC(r,x.updateLineNumbers,q.dims);4<t&&(x.lineDiv.style.display="");x.renderedView=x.view;u&&es()!=u&&u.offsetHeight&&u.focus();f8(x.cursorDiv);f8(x.selectionDiv);x.gutters.style.height=0;w&&(x.lastWrapHeight=q.wrapperHeight,x.lastWrapWidth=q.wrapperWidth,er(r,400));x.updateLineNumbers=null;return !0}function ev(r,q){for(var u=q.viewport,t=!0;;t=!1){if(!t||!r.options.lineWrapping||q.oldDisplayWidth==bV(r)){if(u&&null!=u.top&&(u={top:Math.min(r.doc.height+am(r.display)-ej(r),u.top)}),q.visible=gq(r.display,r.doc,u),q.visible.from>=r.display.viewFrom&&q.visible.to<=r.display.viewTo){break}}if(!eJ(r,q)){break}eK(r);t=dv(r);cx(r);dZ(r,t);el(r,t)}q.signal(r,"update",r);if(r.display.viewFrom!=r.display.reportedViewFrom||r.display.viewTo!=r.display.reportedViewTo){q.signal(r,"viewportChange",r,r.display.viewFrom,r.display.viewTo),r.display.reportedViewFrom=r.display.viewFrom,r.display.reportedViewTo=r.display.viewTo}}function dM(r,q){var u=new ex(r,q);if(eJ(r,u)){eK(r);ev(r,u);var t=dv(r);cx(r);dZ(r,t);el(r,t);u.finish()}}function dZ(r,q){r.display.sizer.style.minHeight=q.docHeight+"px";var t=q.docHeight+r.display.barHeight;r.display.heightForcer.style.top=t+"px";r.display.gutters.style.height=Math.max(t+eS(r),q.clientHeight)+"px"}function eK(r){r=r.display;for(var q=r.lineDiv.offsetTop,w=0;w<r.view.length;w++){var v=r.view[w],u;if(!v.hidden){if(fV&&8>fT){var t=v.node.offsetTop+v.node.offsetHeight;u=t-q;q=t}else{u=v.node.getBoundingClientRect(),u=u.bottom-u.top}t=v.line.height-u;2>u&&(u=i(r));if(0.001<t||-0.001>t){if(fl(v.line,u),ei(v.line),v.rest){for(u=0;u<v.rest.length;u++){ei(v.rest[u])}}}}}}function ei(r){if(r.widgets){for(var q=0;q<r.widgets.length;++q){r.widgets[q].height=r.widgets[q].node.offsetHeight}}}function eW(r){for(var q=r.display,x={},w={},v=q.gutters.clientLeft,u=q.gutters.firstChild,t=0;u;u=u.nextSibling,++t){x[r.options.gutters[t]]=u.offsetLeft+u.clientLeft+v,w[r.options.gutters[t]]=u.clientWidth}return{fixedPos:f0(q),gutterTotalWidth:q.gutters.offsetWidth,gutterLeft:x,gutterWidth:w,wrapperWidth:q.wrapper.clientWidth}}function aC(C,B,A){function z(D){var F=D.nextSibling;fI&&fv&&C.display.currentWheelTarget==D?D.style.display="none":D.parentNode.removeChild(D);return F}for(var y=C.display,x=C.options.lineNumbers,w=y.lineDiv,v=w.firstChild,u=y.view,y=y.viewFrom,t=0;t<u.length;t++){var r=u[t];if(!r.hidden){if(r.node&&r.node.parentNode==w){for(;v!=r.node;){v=z(v)}v=x&&null!=B&&B<=y&&r.lineNumber;r.changes&&(-1<fR(r.changes,"gutter")&&(v=!1),dY(C,r,y,A));v&&(f8(r.lineNumber),r.lineNumber.appendChild(document.createTextNode(fp(C.options,y))));v=r.node.nextSibling}else{var q=ap(C,r,y,A);w.insertBefore(q,v)}}y+=r.size}for(;v;){v=z(v)}}function dY(A,z,y,x){for(var w=0;w<z.changes.length;w++){var v=z.changes[w];if("text"==v){var v=z,u=v.text.className,t=dL(A,v);v.text==v.node&&(v.node=t.pre);v.text.parentNode.replaceChild(t.pre,v.text);v.text=t.pre;t.bgClass!=v.bgClass||t.textClass!=v.textClass?(v.bgClass=t.bgClass,v.textClass=t.textClass,dA(v)):u&&(v.text.className=u)}else{if("gutter"==v){dz(A,z,y,x)}else{if("class"==v){dA(z)}else{if("widget"==v){v=A;u=z;t=x;u.alignable&&(u.alignable=null);for(var r=u.node.firstChild,q=void 0;r;r=q){q=r.nextSibling,"CodeMirror-linewidget"==r.className&&u.node.removeChild(r)}dl(v,u,t)}}}}}z.changes=null}function d0(q){q.node==q.text&&(q.node=e5("div",null,null,"position: relative"),q.text.parentNode&&q.text.parentNode.replaceChild(q.node,q.text),q.node.appendChild(q.text),fV&&8>fT&&(q.node.style.zIndex=2));return q.node}function dL(r,q){var t=r.display.externalMeasured;return t&&t.line==q.line?(r.display.externalMeasured=null,q.measure=t.measure,t.built):c1(r,q)}function dA(r){var q=r.bgClass?r.bgClass+" "+(r.line.bgClass||""):r.line.bgClass;q&&(q+=" CodeMirror-linebackground");if(r.background){q?r.background.className=q:(r.background.parentNode.removeChild(r.background),r.background=null)}else{if(q){var t=d0(r);r.background=t.insertBefore(e5("div",null,q),t.firstChild)}}r.line.wrapClass?d0(r).className=r.line.wrapClass:r.node!=r.text&&(r.node.className="");r.text.className=(r.textClass?r.textClass+" "+(r.line.textClass||""):r.line.textClass)||""}function dz(r,q,x,w){q.gutter&&(q.node.removeChild(q.gutter),q.gutter=null);var v=q.line.gutterMarkers;if(r.options.lineNumbers||v){var u=d0(q),t=q.gutter=e5("div",null,"CodeMirror-gutter-wrapper","left: "+(r.options.fixedGutter?w.fixedPos:-w.gutterTotalWidth)+"px; width: "+w.gutterTotalWidth+"px");r.display.input.setUneditable(t);u.insertBefore(t,q.text);q.line.gutterClass&&(t.className+=" "+q.line.gutterClass);!r.options.lineNumbers||v&&v["CodeMirror-linenumbers"]||(q.lineNumber=t.appendChild(e5("div",fp(r.options,x),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+w.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+r.display.lineNumInnerWidth+"px")));if(v){for(q=0;q<r.options.gutters.length;++q){x=r.options.gutters[q],(u=v.hasOwnProperty(x)&&v[x])&&t.appendChild(e5("div",[u],"CodeMirror-gutter-elt","left: "+w.gutterLeft[x]+"px; width: "+w.gutterWidth[x]+"px"))}}}}function ap(r,q,v,u){var t=dL(r,q);q.text=q.node=t.pre;t.bgClass&&(q.bgClass=t.bgClass);t.textClass&&(q.textClass=t.textClass);dA(q);dz(r,q,v,u);dl(r,q,u);return q.node}function dl(r,q,u){cO(r,q.line,q,u,!0);if(q.rest){for(var t=0;t<q.rest.length;t++){cO(r,q.rest[t],q,u,!1)}}}function cO(D,C,B,A,z){if(C.widgets){var y=d0(B),x=0;for(C=C.widgets;x<C.length;++x){var w=C[x],v=e5("div",[w.node],"CodeMirror-linewidget");w.handleMouseEvents||v.setAttribute("cm-ignore-events","true");var u=w,t=v,q=A;if(u.noHScroll){(B.alignable||(B.alignable=[])).push(t);var r=q.wrapperWidth;t.style.left=q.fixedPos+"px";u.coverGutter||(r-=q.gutterTotalWidth,t.style.paddingLeft=q.gutterTotalWidth+"px");t.style.width=r+"px"}u.coverGutter&&(t.style.zIndex=5,t.style.position="relative",u.noHScroll||(t.style.marginLeft=-q.gutterTotalWidth+"px"));D.display.input.setUneditable(v);z&&w.above?y.insertBefore(v,B.gutter||B.text):y.appendChild(v);fG(w,"redraw")}}}function dm(q){return e6(q.line,q.ch)}function dN(r,q){return 0>e0(r,q)?q:r}function dB(r,q){return 0>e0(r,q)?r:q}function cB(q){q.state.focused||(q.display.input.focus(),g(q))}function dn(q){return q.options.readOnly||q.doc.cantEdit}function c2(D,C,B,A,z){var y=D.doc;D.display.shift=!1;A||(A=y.sel);var x=a5(C),w=null;D.state.pasteIncoming&&1<A.ranges.length&&(fu&&fu.join("\n")==C?w=0==A.ranges.length%fu.length&&b7(fu,a5):x.length==A.ranges.length&&(w=b7(x,function(G){return[G]})));for(var v=A.ranges.length-1;0<=v;v--){var u=A.ranges[v],t=u.from(),q=u.to();u.empty()&&(B&&0<B?t=e6(t.line,t.ch-B):D.state.overwrite&&!D.state.pasteIncoming&&(q=e6(q.line,Math.min(e4(y,q.line).text.length,q.ch+fW(x).length))));var r=D.curOp.updateInput,t={from:t,to:q,text:w?w[v%w.length]:x,origin:z||(D.state.pasteIncoming?"paste":D.state.cutIncoming?"cut":"+input")};d1(D.doc,t);fG(D,"inputRead",D,t);if(C&&!D.state.pasteIncoming&&D.options.electricChars&&D.options.smartIndent&&100>u.head.ch&&(!v||A.ranges[v-1].head.line!=u.head.line)){u=D.getModeAt(u.head);t=aT(t);q=!1;if(u.electricChars){for(var F=0;F<u.electricChars.length;F++){if(-1<C.indexOf(u.electricChars.charAt(F))){q=bU(D,t.line,"smart");break}}}else{u.electricInput&&u.electricInput.test(e4(y,t.line).text.slice(0,t.ch))&&(q=bU(D,t.line,"smart"))}q&&fG(D,"electricInput",D,t.line)}}dO(D);D.curOp.updateInput=r;D.curOp.typing=!0;D.state.pasteIncoming=D.state.cutIncoming=!1}function ci(r){for(var q=[],v=[],u=0;u<r.doc.sel.ranges.length;u++){var t=r.doc.sel.ranges[u].head.line,t={anchor:e6(t,0),head:e6(t+1,0)};v.push(t);q.push(r.getRange(t.anchor,t.head))}return{text:q,ranges:v}}function bY(q){q.setAttribute("autocorrect","off");q.setAttribute("autocapitalize","off");q.setAttribute("spellcheck","false")}function cP(q){this.cm=q;this.prevInput="";this.pollingFast=!1;this.polling=new fS;this.hasSelection=this.inaccurateSelection=!1;this.composing=null}function bL(){var r=e5("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),q=e5("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");fI?r.style.width="1000px":r.setAttribute("wrap","off");dC&&(r.style.border="1px solid black");bY(r);return q}function cC(q){this.cm=q;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new fS;this.gracePeriod=!1}function by(r,q){var u=cj(r,q.line);if(!u||u.hidden){return null}var t=e4(r.doc,q.line),u=a8(u,t,q.line);(t=ft(t))&&c3(t,q.ch);t=co(u.map,q.ch,"left");t.offset="right"==t.collapse?t.end:t.start;return t}function dp(r,q){q&&(r.bad=!0);return r}function cQ(r,q,w){var v;if(q==r.display.lineDiv){v=r.display.lineDiv.childNodes[w];if(!v){return dp(r.clipPos(e6(r.display.viewTo-1)),!0)}q=null;w=0}else{for(v=q;;v=v.parentNode){if(!v||v==r.display.lineDiv){return null}if(v.parentNode&&v.parentNode==r.display.lineDiv){break}}}for(var u=0;u<r.display.view.length;u++){var t=r.display.view[u];if(t.node==v){return p(t,q,w)}}}function p(A,z,y){function x(B,J,H){for(var G=-1;G<(q?q.length:0);G++){for(var F=0>G?r.map:q[G],D=0;D<F.length;D+=3){var C=F[D+2];if(C==B||C==J){J=fP(0>G?A.line:A.rest[G]);G=F[D]+H;if(0>H||C!=B){G=F[D+(H?1:0)]}return e6(J,G)}}}}var w=A.text.firstChild,v=!1;if(!z||!bZ(w,z)){return dp(e6(fP(A.line),0),!0)}if(z==w&&(v=!0,z=w.childNodes[y],y=0,!z)){return y=A.rest?fW(A.rest):A.line,dp(e6(fP(y),y.text.length),v)}var u=3==z.nodeType?z:null,t=z;u||1!=z.childNodes.length||3!=z.firstChild.nodeType||(u=z.firstChild,y&&(y=u.nodeValue.length));for(;t.parentNode!=w;){t=t.parentNode}var r=A.measure,q=r.maps;if(z=x(u,t,y)){return dp(z,v)}w=t.nextSibling;for(u=u?u.nodeValue.length-y:0;w;w=w.nextSibling){if(z=x(w,w.firstChild,0)){return dp(e6(z.line,z.ch-u),v)}u+=w.textContent.length}t=t.previousSibling;for(u=y;t;t=t.previousSibling){if(z=x(t,t.firstChild,-1)){return dp(e6(z.line,z.ch+u),v)}u+=w.textContent.length}}function d(z,y,x,w,v){function u(A){return function(B){return B.id==A}}function t(A){if(1==A.nodeType){var C=A.getAttribute("cm-text");if(null!=C){""==C&&(C=A.textContent.replace(/\u200b/g,"")),r+=C}else{var C=A.getAttribute("cm-marker"),B;if(C){A=z.findMarks(e6(w,0),e6(v+1,0),u(+C)),A.length&&(B=A[0].find())&&(r+=aB(z.doc,B.from,B.to).join("\n"))}else{if("false"!=A.getAttribute("contenteditable")){for(B=0;B<A.childNodes.length;B++){t(A.childNodes[B])}/^(pre|div|p)$/i.test(A.nodeName)&&(q=!0)}}}}else{3==A.nodeType&&(A=A.nodeValue)&&(q&&(r+="\n",q=!1),r+=A)}}for(var r="",q=!1;;){t(y);if(y==x){break}y=y.nextSibling}return r}function cY(r,q){this.ranges=r;this.primIndex=q}function eX(r,q){this.anchor=r;this.head=q}function fr(r,q){var x=r[q];r.sort(function(z,y){return e0(z.from(),y.from())});q=fR(r,x);for(x=1;x<r.length;x++){var w=r[x],v=r[x-1];if(0<=e0(v.to(),w.from())){var u=dB(v.from(),w.from()),t=dN(v.to(),w.to()),w=v.empty()?w.from()==w.head:v.from()==v.head;x<=q&&--q;r.splice(--x,2,new eX(w?t:u,w?u:t))}}return new cY(r,q)}function d8(r,q){return new cY([new eX(r,q||r)],0)}function e2(r,q){if(q.line<r.first){return e6(r.first,0)}var u=r.first+r.size-1;if(q.line>u){return e6(u,e4(r,u).text.length)}var u=e4(r,q.line).text.length,t=q.ch,u=null==t||t>u?e6(q.line,u):0>t?e6(q.line,0):q;return u}function bH(r,q){return q>=r.first&&q<r.first+r.size}function bu(r,q,u,t){return r.cm&&r.cm.display.shift||r.extend?(r=q.anchor,t&&(q=0>e0(u,r),q!=0>e0(t,r)?(r=u,u=t):q!=0>e0(u,t)&&(u=t)),new eX(r,u)):new eX(t||u,u)}function cD(r,q,u,t){fK(r,new cY([bu(r,r.sel.primary(),q,u)],0),t)}function gi(r,q,v){for(var u=[],t=0;t<r.sel.ranges.length;t++){u[t]=bu(r,r.sel.ranges[t],q[t],null)}q=fr(u,r.sel.primIndex);fK(r,q,v)}function bM(r,q,v,u){var t=r.sel.ranges.slice(0);t[q]=v;fK(r,fr(t,r.sel.primIndex),u)}function gt(r,q){var t={ranges:q.ranges,update:function(u){this.ranges=[];for(var v=0;v<u.length;v++){this.ranges[v]=new eX(e2(r,u[v].anchor),e2(r,u[v].head))}}};fH(r,"beforeSelectionChange",r,t);r.cm&&fH(r.cm,"beforeSelectionChange",r.cm,t);return t.ranges!=q.ranges?fr(t.ranges,t.ranges.length-1):q}function fN(r,q,v){var u=r.history.done,t=fW(u);t&&t.ranges?(u[u.length-1]=q,ck(r,q,v)):fK(r,q,v)}function fK(r,q,y){ck(r,q,y);q=r.sel;var x=r.cm?r.cm.curOp.id:NaN,w=r.history,v=y&&y.origin,u;if(!(u=x==w.lastSelOp)&&(u=v&&w.lastSelOrigin==v)&&!(u=w.lastModTime==w.lastSelTime&&w.lastOrigin==v)){u=fW(w.done);var t=v.charAt(0);u="*"==t||"+"==t&&u.ranges.length==q.ranges.length&&u.somethingSelected()==q.somethingSelected()&&new Date-r.history.lastSelTime<=(r.cm?r.cm.options.historyEventDelay:500)}u?w.done[w.done.length-1]=q:b0(q,w.done);w.lastSelTime=+new Date;w.lastSelOrigin=v;w.lastSelOp=x;y&&!1!==y.clearRedo&&fh(w.undone)}function ck(r,q,u){if(fz(r,"beforeSelectionChange")||r.cm&&fz(r.cm,"beforeSelectionChange")){q=gt(r,q)}var t=u&&u.bias||(0>e0(q.primary().head,r.sel.primary().head)?-1:1);eO(r,eB(r,q,t,!0));u&&!1===u.scroll||!r.cm||dO(r.cm)}function eO(r,q){q.equals(r.sel)||(r.sel=q,r.cm&&(r.cm.curOp.updateInput=r.cm.curOp.selectionChanged=!0,eo(r.cm)),fG(r,"cursorActivity",r))}function d4(q){eO(q,eB(q,q.sel,null,!1),dV)}function eB(z,y,x,w){for(var v,u=0;u<y.ranges.length;u++){var t=y.ranges[u],r=bN(z,t.anchor,x,w),q=bN(z,t.head,x,w);if(v||r!=t.anchor||q!=t.head){v||(v=y.ranges.slice(0,u)),v[u]=new eX(r,q)}}return v?fr(v,y.primIndex):y}function bN(B,A,z,y){var x=!1,w=A,v=z||1;B.cantEdit=!1;B:for(;;){var u=e4(B,w.line);if(u.markedSpans){for(var t=0;t<u.markedSpans.length;++t){var r=u.markedSpans[t],q=r.marker;if((null==r.from||(q.inclusiveLeft?r.from<=w.ch:r.from<w.ch))&&(null==r.to||(q.inclusiveRight?r.to>=w.ch:r.to>w.ch))){if(y&&(fH(q,"beforeCursorEnter"),q.explicitlyCleared)){if(u.markedSpans){--t;continue}else{break}}if(q.atomic){t=q.find(0>v?-1:1);if(0==e0(t,w)&&(t.ch+=v,0>t.ch?t=t.line>B.first?e2(B,e6(t.line-1)):null:t.ch>u.text.length&&(t=t.line<B.first+B.size-1?e6(t.line+1,0):null),!t)){if(x){if(!y){return bN(B,A,z,!0)}B.cantEdit=!0;return e6(B.first,0)}x=!0;t=A;v=-v}w=t;continue B}}}}return w}}function cx(q){q.display.input.showSelection(q.display.input.prepareSelection())}function dR(D,C){for(var B=D.doc,A={},z=A.cursors=document.createDocumentFragment(),y=A.selection=document.createDocumentFragment(),x=0;x<B.sel.ranges.length;x++){if(!1!==C||x!=B.sel.primIndex){var w=B.sel.ranges[x],v=w.empty();if(v||D.options.showCursorWhenSelecting){var u=D,t=z,q=cL(u,w.head,"div",null,null,!u.options.singleCursorHeightPerLine),r=t.appendChild(e5("div"," ","CodeMirror-cursor"));r.style.left=q.left+"px";r.style.top=q.top+"px";r.style.height=Math.max(0,q.bottom-q.top)*u.options.cursorHeight+"px";q.other&&(u=t.appendChild(e5("div"," ","CodeMirror-cursor CodeMirror-secondarycursor")),u.style.display="",u.style.left=q.other.left+"px",u.style.top=q.other.top+"px",u.style.height=0.85*(q.other.bottom-q.other.top)+"px")}v||f3(D,w,y)}}return A}function f3(C,B,A){function z(F,D,H,G){0>D&&(D=0);D=Math.round(D);G=Math.round(G);v.appendChild(e5("div",null,"CodeMirror-selected","position: absolute; left: "+F+"px; top: "+D+"px; width: "+(null==H?r-F:H)+"px; height: "+(G-D)+"px"))}function y(D,L,K){var H=e4(w,D),G=H.text.length,F,J;bj(ft(H),L||0,null==K?G:K,function(Q,R,P){var O=bA(C,e6(D,Q),"div",H,"left"),N,M;Q==R?(N=O,P=M=O.left):(N=bA(C,e6(D,R-1),"div",H,"right"),"rtl"==P&&(P=O,O=N,N=P),P=O.left,M=N.right);null==L&&0==Q&&(P=t);3<N.top-O.top&&(z(P,O.top,null,O.bottom),P=t,O.bottom<N.top&&z(P,O.bottom,null,N.top));null==K&&R==G&&(M=r);if(!F||O.top<F.top||O.top==F.top&&O.left<F.left){F=O}if(!J||N.bottom>J.bottom||N.bottom==J.bottom&&N.right>J.right){J=N}P<t+1&&(P=t);z(P,N.top,M-P,N.bottom)});return{start:F,end:J}}var x=C.display,w=C.doc,v=document.createDocumentFragment(),u=dE(C.display),t=u.left,r=Math.max(x.sizerWidth,bV(C)-x.sizer.offsetLeft)-u.right,x=B.from();B=B.to();if(x.line==B.line){y(x.line,x.ch,B.ch)}else{var q=e4(w,x.line),u=e4(w,B.line),u=dI(q)==dI(u),x=y(x.line,x.ch,u?q.text.length+1:null).end;B=y(B.line,u?0:null,B.ch).start;u&&(x.top<B.top-2?(z(x.right,x.top,null,x.bottom),z(t,B.top,B.left,B.bottom)):z(x.right,x.top,B.left-x.right,x.bottom));x.bottom<B.top&&z(t,x.bottom,null,B.top)}A.appendChild(v)}function bz(r){if(r.state.focused){var q=r.display;clearInterval(q.blinker);var t=!0;q.cursorDiv.style.visibility="";0<r.options.cursorBlinkRate?q.blinker=setInterval(function(){q.cursorDiv.style.visibility=(t=!t)?"":"hidden"},r.options.cursorBlinkRate):0>r.options.cursorBlinkRate&&(q.cursorDiv.style.visibility="hidden")}}function er(r,q){r.doc.mode.startState&&r.doc.frontier<r.display.viewTo&&r.state.highlight.set(q,fk(aU,r))}function aU(r){var q=r.doc;q.frontier<q.first&&(q.frontier=q.first);if(!(q.frontier>=r.display.viewTo)){var v=+new Date+r.options.workTime,u=c4(q.mode,a4(r,q.frontier)),t=[];q.iter(q.frontier,Math.min(q.first+q.size,r.display.viewTo+500),function(z){if(q.frontier>=r.display.viewFrom){var y=z.styles,x=ds(r,z,u,!0);z.styles=x.styles;var w=z.styleClasses;(x=x.classes)?z.styleClasses=x:w&&(z.styleClasses=null);w=!y||y.length!=z.styles.length||w!=x&&(!w||!x||w.bgClass!=x.bgClass||w.textClass!=x.textClass);for(x=0;!w&&x<y.length;++x){w=y[x]!=z.styles[x]}w&&t.push(q.frontier);z.stateAfter=c4(q.mode,u)}else{a9(r,z.text,u),z.stateAfter=0==q.frontier%5?c4(q.mode,u):null}++q.frontier;if(+new Date>v){return er(r,r.options.workDelay),!0}});t.length&&fy(r,function(){for(var w=0;w<t.length;w++){cy(r,t[w],"text")}})}}function aI(r,q,y){for(var x,w,v=r.doc,u=y?-1:q-(r.doc.mode.innerMode?1000:100);q>u;--q){if(q<=v.first){return v.first}var t=e4(v,q-1);if(t.stateAfter&&(!y||q<=v.frontier)){return q}t=gm(t.text,null,r.options.tabSize);if(null==w||x>t){w=q-1,x=t}}return w}function a4(r,q,x){var w=r.doc,v=r.display;if(!w.mode.startState){return !0}var u=aI(r,q,x),t=u>w.first&&e4(w,u-1).stateAfter,t=t?c4(w.mode,t):aw(w.mode);w.iter(u,q,function(y){a9(r,y.text,t);y.stateAfter=u==q-1||0==u%5||u>=v.viewFrom&&u<v.viewTo?c4(w.mode,t):null;++u});x&&(w.frontier=u);return t}function am(q){return q.mover.offsetHeight-q.lineSpace.offsetHeight}function dE(r){if(r.cachedPaddingH){return r.cachedPaddingH}var q=fx(r.measure,e5("pre","x")),q=window.getComputedStyle?window.getComputedStyle(q):q.currentStyle,q={left:parseInt(q.paddingLeft),right:parseInt(q.paddingRight)};isNaN(q.left)||isNaN(q.right)||(r.cachedPaddingH=q);return q}function eS(q){return gp-q.display.nativeBarWidth}function bV(q){return q.display.scroller.clientWidth-eS(q)-q.display.barWidth}function ej(q){return q.display.scroller.clientHeight-eS(q)-q.display.barHeight}function a8(r,q,u){if(r.line==q){return{map:r.measure.map,cache:r.measure.cache}}for(var t=0;t<r.rest.length;t++){if(r.rest[t]==q){return{map:r.measure.maps[t],cache:r.measure.caches[t]}}}for(t=0;t<r.rest.length;t++){if(fP(r.rest[t])>u){return{map:r.measure.maps[t],cache:r.measure.caches[t],before:!0}}}}function cj(r,q){if(q>=r.display.viewFrom&&q<r.display.viewTo){return r.display.view[aN(r,q)]}var t=r.display.externalMeasured;if(t&&q>=t.lineN&&q<t.lineN+t.size){return t}}function bh(r,q){var v=fP(q),u=cj(r,v);u&&!u.text?u=null:u&&u.changes&&dY(r,u,v,eW(r));if(!u){var t;t=dI(q);u=fP(t);t=r.display.externalMeasured=new c7(r.doc,t,u);t.lineN=u;u=t.built=c1(r,t);t.text=u.pre;fx(r.display.lineMeasure,u.pre);u=t}v=a8(u,q,v);return{line:q,view:u,rect:null,map:v.map,cache:v.cache,before:v.before,hasHeights:!1}}function cp(D,C,B,A,z){C.before&&(B=-1);var y=B+(A||"");if(C.cache.hasOwnProperty(y)){D=C.cache[y]}else{C.rect||(C.rect=C.view.text.getBoundingClientRect());if(!C.hasHeights){var x=C.view,w=C.rect,v=D.options.lineWrapping,u=v&&bV(D);if(!x.measure.heights||v&&x.measure.width!=u){var t=x.measure.heights=[];if(v){for(x.measure.width=u,x=x.text.firstChild.getClientRects(),v=0;v<x.length-1;v++){var u=x[v],q=x[v+1];2<Math.abs(u.bottom-q.bottom)&&t.push((u.bottom+q.top)/2-w.top)}}t.push(w.bottom-w.top)}C.hasHeights=!0}x=A;v=co(C.map,B,x);A=v.node;w=v.start;u=v.end;B=v.collapse;var r;if(3==A.nodeType){for(t=0;4>t;t++){for(;w&&aS(C.line.text.charAt(v.coverStart+w));){--w}for(;v.coverStart+u<v.coverEnd&&aS(C.line.text.charAt(v.coverStart+u));){++u}if(fV&&9>fT&&0==w&&u==v.coverEnd-v.coverStart){r=A.parentNode.getBoundingClientRect()}else{if(fV&&D.options.lineWrapping){var F=ao(A,w,u).getClientRects();r=F.length?F["right"==x?F.length-1:0]:gj}else{r=ao(A,w,u).getBoundingClientRect()||gj}}if(r.left||r.right||0==w){break}u=w;--w;B="right"}fV&&11>fT&&((F=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=fO?F=fO:(t=fx(D.display.measure,e5("span","x")),F=t.getBoundingClientRect(),t=ao(t,0,1).getBoundingClientRect(),F=fO=1<Math.abs(F.left-t.left)),F=!F),F||(F=screen.logicalXDPI/screen.deviceXDPI,t=screen.logicalYDPI/screen.deviceYDPI,r={left:r.left*F,right:r.right*F,top:r.top*t,bottom:r.bottom*t}))}else{0<w&&(B=x="right"),r=D.options.lineWrapping&&1<(F=A.getClientRects()).length?F["right"==x?F.length-1:0]:A.getBoundingClientRect()}!(fV&&9>fT)||w||r&&(r.left||r.right)||(r=(r=A.parentNode.getClientRects()[0])?{left:r.left,right:r.left+d7(D.display),top:r.top,bottom:r.bottom}:gj);F=r.top-C.rect.top;A=r.bottom-C.rect.top;w=(F+A)/2;x=C.view.measure.heights;for(t=0;t<x.length-1&&!(w<x[t]);t++){}B={left:("right"==B?r.right:r.left)-C.rect.left,right:("left"==B?r.left:r.right)-C.rect.left,top:t?x[t-1]:0,bottom:x[t]};r.left||r.right||(B.bogus=!0);D.options.singleCursorHeightPerLine||(B.rtop=F,B.rbottom=A);D=B;D.bogus||(C.cache[y]=D)}return{left:D.left,right:D.right,top:z?D.rtop:D.top,bottom:z?D.rbottom:D.bottom}}function co(A,z,y){for(var x,w,v,u,t=0;t<A.length;t+=3){var r=A[t],q=A[t+1];if(z<r){w=0,v=1,u="left"}else{if(z<q){w=z-r,v=w+1}else{if(t==A.length-3||z==q&&A[t+3]>z){v=q-r,w=v-1,z>=q&&(u="right")}}}if(null!=w){x=A[t+2];r==q&&y==(x.insertLeft?"left":"right")&&(u=y);if("left"==y&&0==w){for(;t&&A[t-2]==A[t-3]&&A[t-1].insertLeft;){x=A[(t-=3)+2],u="left"}}if("right"==y&&w==q-r){for(;t<A.length-3&&A[t+3]==A[t+4]&&!A[t+5].insertLeft;){x=A[(t+=3)+2],u="right"}}break}}return{node:x,start:w,end:v,collapse:u,coverStart:r,coverEnd:q}}function cU(r){if(r.measure&&(r.measure.cache={},r.measure.heights=null,r.rest)){for(var q=0;q<r.rest.length;q++){r.measure.caches[q]={}}}}function cH(r){r.display.externalMeasure=null;f8(r.display.lineMeasure);for(var q=0;q<r.display.view.length;q++){cU(r.display.view[q])}}function dU(q){cH(q);q.display.cachedCharWidth=q.display.cachedTextHeight=q.display.cachedPaddingH=null;q.options.lineWrapping||(q.display.maxLineChanged=!0);q.display.lineNumChars=null}function fi(r,q,w,v){if(q.widgets){for(var u=0;u<q.widgets.length;++u){if(q.widgets[u].above){var t=aG(q.widgets[u]);w.top+=t;w.bottom+=t}}}if("line"==v){return w}v||(v="local");q=eF(q);q="local"==v?q+r.display.lineSpace.offsetTop:q-r.display.viewOffset;if("page"==v||"window"==v){r=r.display.lineSpace.getBoundingClientRect(),q+=r.top+("window"==v?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),v=r.left+("window"==v?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),w.left+=v,w.right+=v}w.top+=q;w.bottom+=q;return w}function cu(r,q,u){if("div"==u){return q}var t=q.left;q=q.top;"page"==u?(t-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,q-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=u&&u||(u=r.display.sizer.getBoundingClientRect(),t+=u.left,q+=u.top);r=r.display.lineSpace.getBoundingClientRect();return{left:t-r.left,top:q-r.top}}function bA(r,q,w,v,u){v||(v=e4(r.doc,q.line));var t=v;q=q.ch;v=cp(r,bh(r,v),q,u);return fi(r,t,v,w)}function cL(A,z,y,x,w,v){function u(B,D){var C=cp(A,w,B,D?"right":"left",v);D?C.left=C.right:C.right=C.left;return fi(A,x,C,y)}function t(C,B){var F=r[B],D=F.level%2;C==eP(F)&&B&&F.level<r[B-1].level?(F=r[--B],C=eC(F)-(F.level%2?0:1),D=!0):C==eC(F)&&B<r.length-1&&F.level<r[B+1].level&&(F=r[++B],C=eP(F)-F.level%2,D=!1);return D&&C==F.to&&C>F.from?u(C-1):u(C,D)}x=x||e4(A.doc,z.line);w||(w=bh(A,x));var r=ft(x);z=z.ch;if(!r){return u(z)}var q=c3(r,z),q=t(z,q);null!=au&&(q.other=t(z,au));return q}function b4(r,q){var v=0;q=e2(r.doc,q);r.options.lineWrapping||(v=d7(r.display)*q.ch);var u=e4(r.doc,q.line),t=eF(u)+r.display.lineSpace.offsetTop;return{left:v,right:v,top:t,bottom:t+u.height}}function cq(r,q,u,t){r=e6(r,q);r.xRel=t;u&&(r.outside=!0);return r}function ep(r,q,w){var v=r.doc;w+=r.display.viewOffset;if(0>w){return cq(v.first,0,!0,-1)}var u=aZ(v,w),t=v.first+v.size-1;if(u>t){return cq(v.first+v.size-1,e4(v,t).text.length,!0,1)}0>q&&(q=0);for(v=e4(v,u);;){if(u=aj(r,v,u,q,w),t=(v=bo(v,!1))&&v.find(0,!0),v&&(u.ch>t.from.ch||u.ch==t.from.ch&&0<u.xRel)){u=fP(v=t.to.line)}else{return u}}}function aj(S,R,Q,P,O){function N(q){q=cL(S,e6(Q,q),"line",R,J);L=!0;if(M>q.bottom){return q.left-K}if(M<q.top){return q.left+K}L=!1;return q.left}var M=O-eF(R),L=!1,K=2*S.display.wrapper.clientWidth,J=bh(S,R),H=ft(R),F=R.text.length;O=gk(R);var G=fQ(R),B=N(O),D=L,C=N(G),A=L;if(P>C){return cq(Q,G,A,1)}for(;;){if(H?G==O||G==d5(R,O,1):1>=G-O){H=P<B||P-B<=C-P?O:G;for(P-=H==O?B:C;aS(R.text.charAt(H));){++H}return cq(Q,H,H==O?D:A,-1>P?-1:1<P?1:0)}var z=Math.ceil(F/2),y=O+z;if(H){for(var y=O,r=0;r<z;++r){y=d5(R,y,1)}}r=N(y);if(r>P){G=y;C=r;if(A=L){C+=1000}F=z}else{O=y,B=r,D=L,F-=z}}}function i(r){if(null!=r.cachedTextHeight){return r.cachedTextHeight}if(null==o){o=e5("pre");for(var q=0;49>q;++q){o.appendChild(document.createTextNode("x")),o.appendChild(e5("br"))}o.appendChild(document.createTextNode("x"))}fx(r.measure,o);q=o.offsetHeight/50;3<q&&(r.cachedTextHeight=q);f8(r.measure);return q||1}function d7(r){if(null!=r.cachedCharWidth){return r.cachedCharWidth}var q=e5("span","xxxxxxxxxx"),t=e5("pre",[q]);fx(r.measure,t);q=q.getBoundingClientRect();q=(q.right-q.left)/10;2<q&&(r.cachedCharWidth=q);return q||10}function fs(q){q.curOp={cm:q,viewChanged:!1,startHeight:q.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++j};cR?cR.ops.push(q.curOp):q.curOp.ownsGroup=cR={ops:[q.curOp],delayedCallbacks:[]}}function eL(J){if(J=J.curOp.ownsGroup){try{var H=J.delayedCallbacks,G=0;do{for(;G<H.length;G++){H[G]()}for(var F=0;F<J.ops.length;F++){var D=J.ops[F];if(D.cursorActivityHandlers){for(;D.cursorActivityCalled<D.cursorActivityHandlers.length;){D.cursorActivityHandlers[D.cursorActivityCalled++](D.cm)}}}}while(G<H.length)}finally{cR=null;for(H=0;H<J.ops.length;H++){J.ops[H].cm.curOp=null}J=J.ops;for(H=0;H<J.length;H++){var D=J[H],G=D.cm,C=F=G.display;!C.scrollbarsClipped&&C.scroller.offsetWidth&&(C.nativeBarWidth=C.scroller.offsetWidth-C.scroller.clientWidth,C.heightForcer.style.height=eS(G)+"px",C.sizer.style.marginBottom=-C.nativeBarWidth+"px",C.sizer.style.borderRightWidth=eS(G)+"px",C.scrollbarsClipped=!0);D.updateMaxLine&&az(G);D.mustUpdate=D.viewChanged||D.forceUpdate||null!=D.scrollTop||D.scrollToPos&&(D.scrollToPos.from.line<F.viewFrom||D.scrollToPos.to.line>=F.viewTo)||F.maxLineChanged&&G.options.lineWrapping;D.update=D.mustUpdate&&new ex(G,D.mustUpdate&&{top:D.scrollTop,ensure:D.scrollToPos},D.forceUpdate)}for(H=0;H<J.length;H++){D=J[H],D.updatedDisplay=D.mustUpdate&&eJ(D.cm,D.update)}for(H=0;H<J.length;H++){if(D=J[H],G=D.cm,F=G.display,D.updatedDisplay&&eK(G),D.barMeasure=dv(G),F.maxLineChanged&&!G.options.lineWrapping&&(C=void 0,C=F.maxLine.text.length,C=cp(G,bh(G,F.maxLine),C,void 0),D.adjustWidthTo=C.left+3,G.display.sizerWidth=D.adjustWidthTo,D.barMeasure.scrollWidth=Math.max(F.scroller.clientWidth,F.sizer.offsetLeft+D.adjustWidthTo+eS(G)+G.display.barWidth),D.maxScrollLeft=Math.max(0,F.sizer.offsetLeft+D.adjustWidthTo-bV(G))),D.updatedDisplay||D.selectionChanged){D.preparedSelection=F.input.prepareSelection()}}for(H=0;H<J.length;H++){D=J[H],G=D.cm,null!=D.adjustWidthTo&&(G.display.sizer.style.minWidth=D.adjustWidthTo+"px",D.maxScrollLeft<G.doc.scrollLeft&&ey(G,Math.min(G.display.scroller.scrollLeft,D.maxScrollLeft),!0),G.display.maxLineChanged=!1),D.preparedSelection&&G.display.input.showSelection(D.preparedSelection),D.updatedDisplay&&dZ(G,D.barMeasure),(D.updatedDisplay||D.startHeight!=G.doc.height)&&el(G,D.barMeasure),D.selectionChanged&&bz(G),G.state.focused&&D.updateInput&&G.display.input.reset(D.typing),D.focus&&D.focus==es()&&cB(D.cm)}for(H=0;H<J.length;H++){D=J[H];G=D.cm;F=G.display;C=G.doc;D.updatedDisplay&&ev(G,D.update);null==F.wheelStartX||null==D.scrollTop&&null==D.scrollLeft&&!D.scrollToPos||(F.wheelStartX=F.wheelStartY=null);null==D.scrollTop||F.scroller.scrollTop==D.scrollTop&&!D.forceScroll||(C.scrollTop=Math.max(0,Math.min(F.scroller.scrollHeight-F.scroller.clientHeight,D.scrollTop)),F.scrollbars.setScrollTop(C.scrollTop),F.scroller.scrollTop=C.scrollTop);null==D.scrollLeft||F.scroller.scrollLeft==D.scrollLeft&&!D.forceScroll||(C.scrollLeft=Math.max(0,Math.min(F.scroller.scrollWidth-bV(G),D.scrollLeft)),F.scrollbars.setScrollLeft(C.scrollLeft),F.scroller.scrollLeft=C.scrollLeft,aX(G));if(D.scrollToPos){var B=void 0,A=e2(C,D.scrollToPos.from),B=e2(C,D.scrollToPos.to),z=D.scrollToPos.margin;null==z&&(z=0);for(var y=0;5>y;y++){var x=!1,v=cL(G,A),w=B&&B!=A?cL(G,B):v,w=fj(G,Math.min(v.left,w.left),Math.min(v.top,w.top)-z,Math.max(v.left,w.left),Math.max(v.bottom,w.bottom)+z),u=G.doc.scrollTop,t=G.doc.scrollLeft;null!=w.scrollTop&&(cX(G,w.scrollTop),1<Math.abs(G.doc.scrollTop-u)&&(x=!0));null!=w.scrollLeft&&(ey(G,w.scrollLeft),1<Math.abs(G.doc.scrollLeft-t)&&(x=!0));if(!x){break}}B=v;D.scrollToPos.isCursor&&G.state.focused&&(dw(G,"scrollCursorIntoView")||(z=G.display,y=z.sizer.getBoundingClientRect(),A=null,0>B.top+y.top?A=!0:B.bottom+y.top>(window.innerHeight||document.documentElement.clientHeight)&&(A=!1),null==A||gz||(B=e5("div","",null,"position: absolute; top: "+(B.top-z.viewOffset-G.display.lineSpace.offsetTop)+"px; height: "+(B.bottom-B.top+eS(G)+z.barHeight)+"px; left: "+B.left+"px; width: 2px;"),G.display.lineSpace.appendChild(B),B.scrollIntoView(A),G.display.lineSpace.removeChild(B))))}A=D.maybeHiddenMarkers;B=D.maybeUnhiddenMarkers;if(A){for(z=0;z<A.length;++z){A[z].lines.length||fH(A[z],"hide")}}if(B){for(z=0;z<B.length;++z){B[z].lines.length&&fH(B[z],"unhide")}}F.wrapper.offsetHeight&&(C.scrollTop=G.display.scroller.scrollTop);D.changeObjs&&fH(G,"changes",G,D.changeObjs);D.update&&D.update.finish()}}}}function fy(r,q){if(r.curOp){return q()}fs(r);try{return q()}finally{eL(r)}}function fM(r,q){return function(){if(r.curOp){return q.apply(r,arguments)}fs(r);try{return q.apply(r,arguments)}finally{eL(r)}}}function fF(q){return function(){if(this.curOp){return q.apply(this,arguments)}fs(this);try{return q.apply(this,arguments)}finally{eL(this)}}}function fE(q){return function(){var r=this.cm;if(!r||r.curOp){return q.apply(this,arguments)}fs(r);try{return q.apply(this,arguments)}finally{eL(r)}}}function c7(r,q,v){for(var u=this.line=q,t;u=bo(u,!1);){u=u.find(1,!0).line,(t||(t=[])).push(u)}this.size=(this.rest=t)?fP(fW(this.rest))-v+1:1;this.node=this.text=null;this.hidden=gy(r,q)}function ek(r,q,v){var u=[],t;for(t=q;t<v;){q=new c7(r.doc,e4(r.doc,t),t),t+=q.size,u.push(q)}return u}function fB(r,q,x,w){null==q&&(q=r.doc.first);null==x&&(x=r.doc.first+r.doc.size);w||(w=0);var v=r.display;w&&x<v.viewTo&&(null==v.updateLineNumbers||v.updateLineNumbers>q)&&(v.updateLineNumbers=q);r.curOp.viewChanged=!0;if(q>=v.viewTo){bv&&ew(r.doc,q)<v.viewTo&&bI(r)}else{if(x<=v.viewFrom){bv&&eI(r.doc,x+w)>v.viewFrom?bI(r):(v.viewFrom+=w,v.viewTo+=w)}else{if(q<=v.viewFrom&&x>=v.viewTo){bI(r)}else{if(q<=v.viewFrom){var u=eQ(r,x,x+w,1);u?(v.view=v.view.slice(u.index),v.viewFrom=u.lineN,v.viewTo+=w):bI(r)}else{if(x>=v.viewTo){(u=eQ(r,q,q,-1))?(v.view=v.view.slice(0,u.index),v.viewTo=u.lineN):bI(r)}else{var u=eQ(r,q,q,-1),t=eQ(r,x,x+w,1);u&&t?(v.view=v.view.slice(0,u.index).concat(ek(r,u.lineN,t.lineN)).concat(v.view.slice(t.index)),v.viewTo+=w):bI(r)}}}}}if(r=v.externalMeasured){x<r.lineN?r.lineN+=w:q<r.lineN+r.size&&(v.externalMeasured=null)}}function cy(r,q,v){r.curOp.viewChanged=!0;var u=r.display,t=r.display.externalMeasured;t&&q>=t.lineN&&q<t.lineN+t.size&&(u.externalMeasured=null);q<u.viewFrom||q>=u.viewTo||(r=u.view[aN(r,q)],null!=r.node&&(r=r.changes||(r.changes=[]),-1==fR(r,v)&&r.push(v)))}function bI(q){q.display.viewFrom=q.display.viewTo=q.doc.first;q.display.view=[];q.display.viewOffset=0}function aN(r,q){if(q>=r.display.viewTo){return null}q-=r.display.viewFrom;if(0>q){return null}for(var u=r.display.view,t=0;t<u.length;t++){if(q-=u[t].size,0>q){return t}}}function eQ(r,q,y,x){var w=aN(r,q),v=r.display.view;if(!bv||y==r.doc.first+r.doc.size){return{index:w,lineN:y}}for(var u=0,t=r.display.viewFrom;u<w;u++){t+=v[u].size}if(t!=q){if(0<x){if(w==v.length-1){return null}q=t+v[w].size-q;w++}else{q=t-q}y+=q}for(;ew(r.doc,y)!=y;){if(w==(0>x?0:v.length-1)){return null}y+=x*v[w-(0>x?1:0)].size;w+=x}return{index:w,lineN:y}}function eV(r){r=r.display.view;for(var q=0,u=0;u<r.length;u++){var t=r[u];t.hidden||t.node&&!t.changes||++q}return q}function a0(r){function q(){w.activeTouch&&(v=setTimeout(function(){w.activeTouch=null},1000),u=w.activeTouch,u.end=+new Date)}function x(z,y){if(null==y.left){return !0}var B=y.left-z.left,A=y.top-z.top;return 400<B*B+A*A}var w=r.display;e3(w.scroller,"mousedown",fM(r,bR));fV&&11>fT?e3(w.scroller,"dblclick",fM(r,function(y){if(!dw(r,y)){var z=cE(r,y);!z||dS(r,y,"gutterClick",!0,fG)||b8(r.display,y)||(fD(y),y=r.findWordAt(z),cD(r.doc,y.anchor,y.head))}})):e3(w.scroller,"dblclick",function(y){dw(r,y)||fD(y)});dF||e3(w.scroller,"contextmenu",function(y){bE(r,y)});var v,u={end:0};e3(w.scroller,"touchstart",function(z){var y;1!=z.touches.length?y=!1:(y=z.touches[0],y=1>=y.radiusX&&1>=y.radiusY);y||(clearTimeout(v),y=+new Date,w.activeTouch={start:y,moved:!1,prev:300>=y-u.end?u:null},1==z.touches.length&&(w.activeTouch.left=z.touches[0].pageX,w.activeTouch.top=z.touches[0].pageY))});e3(w.scroller,"touchmove",function(){w.activeTouch&&(w.activeTouch.moved=!0)});e3(w.scroller,"touchend",function(A){var z=w.activeTouch;if(z&&!b8(w,A)&&null!=z.left&&!z.moved&&300>new Date-z.start){var y=r.coordsChar(w.activeTouch,"page"),z=!z.prev||x(z,z.prev)?new eX(y,y):!z.prev.prev||x(z,z.prev.prev)?r.findWordAt(y):new eX(e6(y.line,0),e2(r.doc,e6(y.line+1,0)));r.setSelection(z.anchor,z.head);r.focus();fD(A)}q()});e3(w.scroller,"touchcancel",q);e3(w.scroller,"scroll",function(){w.scroller.clientHeight&&(cX(r,w.scroller.scrollTop),ey(r,w.scroller.scrollLeft,!0),fH(r,"scroll",r))});e3(w.scroller,"mousewheel",function(y){br(r,y)});e3(w.scroller,"DOMMouseScroll",function(y){br(r,y)});e3(w.wrapper,"scroll",function(){w.wrapper.scrollTop=w.wrapper.scrollLeft=0});w.dragFunctions={simple:function(y){dw(r,y)||dt(y)},start:function(y){if(fV&&(!r.state.draggingText||100>+new Date-a1)){dt(y)}else{if(!dw(r,y)&&!b8(r.display,y)&&(y.dataTransfer.setData("Text",r.getSelection()),y.dataTransfer.setDragImage&&!aP)){var z=e5("img",null,null,"position: fixed; left: 0; top: 0;");z.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw\x3d\x3d";fU&&(z.width=z.height=1,r.display.wrapper.appendChild(z),z._top=z.offsetTop);y.dataTransfer.setDragImage(z,0,0);fU&&z.parentNode.removeChild(z)}}},drop:fM(r,gn)};var t=w.input.getField();e3(t,"keyup",function(y){aD.call(r,y)});e3(t,"keydown",fM(r,aq));e3(t,"keypress",fM(r,s));e3(t,"focus",fk(g,r));e3(t,"blur",fk(eR,r))}function fX(r){var q=r.display;if(q.lastWrapHeight!=q.wrapper.clientHeight||q.lastWrapWidth!=q.wrapper.clientWidth){q.cachedCharWidth=q.cachedTextHeight=q.cachedPaddingH=null,q.scrollbarsClipped=!1,r.setSize()}}function b8(r,q){for(var t=q.target||q.srcElement;t!=r.wrapper;t=t.parentNode){if(!t||1==t.nodeType&&"true"==t.getAttribute("cm-ignore-events")||t.parentNode==r.sizer&&t!=r.mover){return !0}}}function cE(z,y,x,w){var v=z.display;if(!x&&"true"==(y.target||y.srcElement).getAttribute("cm-not-content")){return null}var u,t;x=v.lineSpace.getBoundingClientRect();try{u=y.clientX-x.left,t=y.clientY-x.top}catch(r){return null}y=ep(z,u,t);var q;w&&1==y.xRel&&(q=e4(z.doc,y.line).text).length==y.ch&&(w=gm(q,q.length,z.options.tabSize)-q.length,y=e6(y.line,Math.max(0,Math.round((u-dE(z.display).left)/d7(z.display))-w)));return y}function bR(r){var q=this.display;if(!(q.activeTouch&&q.input.supportsTouch()||dw(this,r))){if(q.shift=r.shiftKey,b8(q,r)){fI||(q.scroller.draggable=!1,setTimeout(function(){q.scroller.draggable=!0},100))}else{if(!dS(this,r,"gutterClick",!0,fG)){var t=cE(this,r);window.focus();switch(e(r)){case 1:t?fm(this,r,t):(r.target||r.srcElement)==q.scroller&&fD(r);break;case 2:fI&&(this.state.lastMiddleDown=+new Date);t&&cD(this.doc,t);setTimeout(function(){q.input.focus()},20);fD(r);break;case 3:dF?bE(this,r):eT(this)}}}}}function fm(r,q,x){fV?setTimeout(fk(cB,r),0):r.curOp.focus=es();var w=+new Date,v;eD&&eD.time>w-400&&0==e0(eD.pos,x)?v="triple":eq&&eq.time>w-400&&0==e0(eq.pos,x)?(v="double",eD={time:w,pos:x}):(v="single",eq={time:w,pos:x});var w=r.doc.sel,u=fv?q.metaKey:q.ctrlKey,t;r.options.dragDrop&&eG&&!dn(r)&&"single"==v&&-1<(t=w.contains(x))&&!w.ranges[t].empty()?et(r,q,x,u):d9(r,q,x,v,u)}function et(r,q,x,w){var v=r.display,u=+new Date,t=fM(r,function(y){fI&&(v.scroller.draggable=!1);r.state.draggingText=!1;di(document,"mouseup",t);di(v.scroller,"drop",t);10>Math.abs(q.clientX-y.clientX)+Math.abs(q.clientY-y.clientY)&&(fD(y),!w&&+new Date-200<u&&cD(r.doc,x),fI||fV&&9==fT?setTimeout(function(){document.body.focus();v.input.focus()},20):v.input.focus())});fI&&(v.scroller.draggable=!0);r.state.draggingText=t;v.scroller.dragDrop&&v.scroller.dragDrop();e3(document,"mouseup",t);e3(v.scroller,"drop",t)}function d9(T,S,R,Q,P){function O(V){if(0!=e0(r,V)){if(r=V,"rect"==Q){for(var U=[],F=T.options.tabSize,C=gm(e4(K,R.line).text,R.ch,F),B=gm(e4(K,V.line).text,V.ch,F),A=Math.min(C,B),C=Math.max(C,B),B=Math.min(R.line,V.line),x=Math.min(T.lastLine(),Math.max(R.line,V.line));B<=x;B++){var X=e4(K,B).text,W=gu(X,A,F);A==C?U.push(new eX(e6(B,W),e6(B,W))):X.length>W&&U.push(new eX(e6(B,W),e6(B,gu(X,C,F))))}U.length||U.push(new eX(R,R));fK(K,fr(H.ranges.slice(0,G).concat(U),G),{origin:"*mouse",scroll:!1});T.scrollIntoView(V)}else{U=J,F=U.anchor,A=V,"single"!=Q&&(V="double"==Q?T.findWordAt(V):new eX(e6(V.line,0),e2(K,e6(V.line+1,0))),0<e0(V.anchor,F)?(A=V.head,F=dB(U.from(),V.anchor)):(A=V.anchor,F=dN(U.to(),V.head))),U=H.ranges.slice(0),U[G]=new eX(e2(K,F),A),fK(K,fr(U,G),c8)}}}function N(t){var B=++D,A=cE(T,t,!0,"rect"==Q);if(A){if(0!=e0(A,r)){T.curOp.focus=es();O(A);var x=gq(L,K);(A.line>=x.to||A.line<x.from)&&setTimeout(fM(T,function(){D==B&&N(t)}),150)}else{var q=t.clientY<y.top?-20:t.clientY>y.bottom?20:0;q&&setTimeout(fM(T,function(){D==B&&(L.scroller.scrollTop+=q,N(t))}),50)}}}function M(q){D=Infinity;fD(q);L.input.focus();di(document,"mousemove",u);di(document,"mouseup",w);K.history.lastSelOrigin=null}var L=T.display,K=T.doc;fD(S);var J,G,H=K.sel,z=H.ranges;P&&!S.shiftKey?(G=K.sel.contains(R),J=-1<G?z[G]:new eX(R,R)):(J=K.sel.primary(),G=K.sel.primIndex);if(S.altKey){Q="rect",P||(J=new eX(R,R)),R=cE(T,S,!0,!0),G=-1}else{if("double"==Q){var v=T.findWordAt(R);J=T.display.shift||K.extend?bu(K,J,v.anchor,v.head):v}else{"triple"==Q?(v=new eX(e6(R.line,0),e2(K,e6(R.line+1,0))),J=T.display.shift||K.extend?bu(K,J,v.anchor,v.head):v):J=bu(K,J,R)}}P?-1==G?(G=z.length,fK(K,fr(z.concat([J]),G),{scroll:!1,origin:"*mouse"})):1<z.length&&z[G].empty()&&"single"==Q&&!S.shiftKey?(fK(K,fr(z.slice(0,G).concat(z.slice(G+1)),0)),H=K.sel):bM(K,G,J,c8):(G=0,fK(K,new cY([J],0),c8),H=K.sel);var r=R,y=L.wrapper.getBoundingClientRect(),D=0,u=fM(T,function(q){e(q)?N(q):M(q)}),w=fM(T,M);e3(document,"mousemove",u);e3(document,"mouseup",w)}function dS(A,z,y,x,w){try{var v=z.clientX,u=z.clientY}catch(t){return !1}if(v>=Math.floor(A.display.gutters.getBoundingClientRect().right)){return !1}x&&fD(z);x=A.display;var r=x.lineDiv.getBoundingClientRect();if(u>r.bottom||!fz(A,y)){return cV(z)}u-=r.top-x.viewOffset;for(r=0;r<A.options.gutters.length;++r){var q=x.gutters.childNodes[r];if(q&&q.getBoundingClientRect().right>=v){return v=aZ(A.doc,u),w(A,y,A,v,A.options.gutters[r],z),cV(z)}}}function gn(A){var z=this;if(!dw(z,A)&&!b8(z.display,A)){fD(A);fV&&(a1=+new Date);var y=cE(z,A,!0),x=A.dataTransfer.files;if(y&&!dn(z)){if(x&&x.length&&window.FileReader&&window.File){var w=x.length,v=Array(w),u=0;A=function(B,D){var C=new FileReader;C.onload=fM(z,function(){v[D]=C.result;if(++u==w){y=e2(z.doc,y);var F={from:y,to:y,text:a5(v.join("\n")),origin:"paste"};d1(z.doc,F);fN(z.doc,d8(y,aT(F)))}});C.readAsText(B)};for(var t=0;t<w;++t){A(x[t],t)}}else{if(z.state.draggingText&&-1<z.doc.sel.contains(y)){z.state.draggingText(A),setTimeout(function(){z.display.input.focus()},20)}else{try{if(v=A.dataTransfer.getData("Text")){if(z.state.draggingText&&(fv?!A.altKey:!A.ctrlKey)){var r=z.listSelections()}ck(z.doc,d8(y,y));if(r){for(t=0;t<r.length;++t){ah(z.doc,"",r[t].anchor,r[t].head,"drag")}}z.replaceSelection(v,"around","paste");z.display.input.focus()}}catch(q){}}}}}}function cX(r,q){2>Math.abs(r.doc.scrollTop-q)||(r.doc.scrollTop=q,ai||dM(r,{top:q}),r.display.scroller.scrollTop!=q&&(r.display.scroller.scrollTop=q),r.display.scrollbars.setScrollTop(q),ai&&dM(r),er(r,100))}function ey(r,q,t){(t?q==r.doc.scrollLeft:2>Math.abs(r.doc.scrollLeft-q))||(q=Math.min(q,r.display.scroller.scrollWidth-r.display.scroller.clientWidth),r.doc.scrollLeft=q,aX(r),r.display.scroller.scrollLeft!=q&&(r.display.scroller.scrollLeft=q),r.display.scrollbars.setScrollLeft(q))}function br(z,y){var x=f4(y),w=x.x,x=x.y,v=z.display,u=v.scroller;if(w&&u.scrollWidth>u.clientWidth||x&&u.scrollHeight>u.clientHeight){if(x&&fv&&fI){var t=y.target,r=v.view;z:for(;t!=u;t=t.parentNode){for(var q=0;q<r.length;q++){if(r[q].node==t){z.display.currentWheelTarget=t;break z}}}}!w||ai||fU||null==fA?(x&&null!=fA&&(t=x*fA,r=z.doc.scrollTop,q=r+v.wrapper.clientHeight,0>t?r=Math.max(0,r+t-50):q=Math.min(z.doc.height,q+t+50),dM(z,{top:r,bottom:q})),20>d6&&(null==v.wheelStartX?(v.wheelStartX=u.scrollLeft,v.wheelStartY=u.scrollTop,v.wheelDX=w,v.wheelDY=x,setTimeout(function(){if(null!=v.wheelStartX){var B=u.scrollLeft-v.wheelStartX,A=u.scrollTop-v.wheelStartY,B=A&&v.wheelDY&&A/v.wheelDY||B&&v.wheelDX&&B/v.wheelDX;v.wheelStartX=v.wheelStartY=null;B&&(fA=(fA*d6+B)/(d6+1),++d6)}},200)):(v.wheelDX+=w,v.wheelDY+=x))):(x&&cX(z,Math.max(0,Math.min(u.scrollTop+x*fA,u.scrollHeight-u.clientHeight))),ey(z,Math.max(0,Math.min(u.scrollLeft+w*fA,u.scrollWidth-u.clientWidth))),fD(y),v.wheelStartX=null)}}function dT(r,q,v){if("string"==typeof q&&(q=dG[q],!q)){return !1}r.display.input.ensurePolled();var u=r.display.shift,t=!1;try{dn(r)&&(r.state.suppressEdits=!0),v&&(r.display.shift=!1),t=q(r)!=bk}finally{r.display.shift=u,r.state.suppressEdits=!1}return t}function dW(r,q,v){for(var u=0;u<r.state.keyMaps.length;u++){var t=h(q,r.state.keyMaps[u],v,r);if(t){return t}}return r.options.extraKeys&&h(q,r.options.extraKeys,v,r)||h(q,r.options.keyMap,v,r)}function du(r,q,v,u){var t=r.state.keySeq;if(t){if(dJ(q)){return"handled"}dx.set(50,function(){r.state.keySeq==t&&(r.state.keySeq=null,r.display.input.reset())});q=t+" "+q}u=dW(r,q,u);"multi"==u&&(r.state.keySeq=q);"handled"==u&&fG(r,"keyHandled",r,q,v);if("handled"==u||"multi"==u){fD(v),bz(r)}return t&&!u&&/\'$/.test(q)?(fD(v),!0):!!u}function aV(r,q){var t=dj(q,!0);return t?q.shiftKey&&!r.state.keySeq?du(r,"Shift-"+t,q,function(u){return dT(r,u,!0)})||du(r,t,q,function(u){if("string"==typeof u?/^go[A-Z]/.test(u):u.motion){return dT(r,u)}}):du(r,t,q,function(u){return dT(r,u)}):!1}function cZ(r,q,t){return du(r,"'"+t+"'",q,function(u){return dT(r,u,!0)})}function aq(r){this.curOp.focus=es();if(!dw(this,r)){fV&&11>fT&&27==r.keyCode&&(r.returnValue=!1);var q=r.keyCode;this.display.shift=16==q||r.shiftKey;var t=aV(this,r);fU&&(cI=t?q:null,!t&&88==q&&!aJ&&(fv?r.metaKey:r.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=q||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||cM(this)}}function cM(r){function q(u){18!=u.keyCode&&u.altKey||(dh(t,"CodeMirror-crosshair"),di(document,"keyup",q),di(document,"mouseover",q))}var t=r.display.lineDiv;cK(t,"CodeMirror-crosshair");e3(document,"keyup",q);e3(document,"mouseover",q)}function aD(q){16==q.keyCode&&(this.doc.sel.shift=!1);dw(this,q)}function s(r){if(!(b8(this.display,r)||dw(this,r)||r.ctrlKey&&!r.altKey||fv&&r.metaKey)){var q=r.keyCode,t=r.charCode;if(fU&&q==cI){cI=null,fD(r)}else{if(!fU||r.which&&!(10>r.which)||!aV(this,r)){if(q=String.fromCharCode(null==t?q:t),!cZ(this,r,q)){this.display.input.onKeyPress(r)}}}}}function eT(q){q.state.delayingBlurEvent=!0;setTimeout(function(){q.state.delayingBlurEvent&&(q.state.delayingBlurEvent=!1,eR(q))},100)}function g(q){q.state.delayingBlurEvent&&(q.state.delayingBlurEvent=!1);"nocursor"!=q.options.readOnly&&(q.state.focused||(fH(q,"focus",q),q.state.focused=!0,cK(q.display.wrapper,"CodeMirror-focused"),q.curOp||q.display.selForContextMenu==q.doc.sel||(q.display.input.reset(),fI&&setTimeout(function(){q.display.input.reset(!0)},20)),q.display.input.receivedFocus()),bz(q))}function eR(q){q.state.delayingBlurEvent||(q.state.focused&&(fH(q,"blur",q),q.state.focused=!1,dh(q.display.wrapper,"CodeMirror-focused")),clearInterval(q.display.blinker),setTimeout(function(){q.state.focused||(q.display.shift=!1)},150))}function bE(r,q){var t;(t=b8(r.display,q))||(t=fz(r,"gutterContextMenu")?dS(r,q,"gutterContextMenu",!1,fH):!1);if(!t){r.display.input.onContextMenu(q)}}function ax(r,q){if(0>e0(r,q.from)){return r}if(0>=e0(r,q.to)){return aT(q)}var u=r.line+q.text.length-(q.to.line-q.from.line)-1,t=r.ch;r.line==q.to.line&&(t+=aT(q).ch-q.to.ch);return e6(u,t)}function cv(r,q){for(var v=[],u=0;u<r.sel.ranges.length;u++){var t=r.sel.ranges[u];v.push(new eX(ax(t.anchor,q),ax(t.head,q)))}return fr(v,r.sel.primIndex)}function ak(r,q,t){return r.line==q.line?e6(t.line,r.ch-q.ch+t.ch):e6(t.line+(r.line-q.line),r.ch)}function k(r,q,t){q={canceled:!1,from:q.from,to:q.to,text:q.text,origin:q.origin,cancel:function(){this.canceled=!0}};t&&(q.update=function(u,x,w,v){u&&(this.from=e2(r,u));x&&(this.to=e2(r,x));w&&(this.text=w);void 0!==v&&(this.origin=v)});fH(r,"beforeChange",r,q);r.cm&&fH(r.cm,"beforeChange",r.cm,q);return q.canceled?null:{from:q.from,to:q.to,text:q.text,origin:q.origin}}function d1(r,q,u){if(r.cm){if(!r.cm.curOp){return fM(r.cm,d1)(r,q,u)}if(r.cm.state.suppressEdits){return}}if(fz(r,"beforeChange")||r.cm&&fz(r.cm,"beforeChange")){if(q=k(r,q,!0),!q){return}}if(u=gA&&!u&&cz(r,q.from,q.to)){for(var t=u.length-1;0<=t;--t){go(r,{from:u[t].from,to:u[t].to,text:t?[""]:q.text})}}else{go(r,q)}}function go(r,q){if(1!=q.text.length||""!=q.text[0]||0!=e0(q.from,q.to)){var u=cv(r,q);fY(r,q,u,r.cm?r.cm.curOp.id:NaN);gx(r,q,u,b5(r,q));var t=[];c(r,function(v,w){w||-1!=fR(t,v.history)||(fn(v.history,q),t.push(v.history));gx(v,q,null,b5(v,q))})}}function c9(B,A,z){if(!B.cm||!B.cm.state.suppressEdits){for(var y=B.history,x,w=B.sel,v="undo"==A?y.done:y.undone,u="undo"==A?y.undone:y.done,t=0;t<v.length&&(x=v[t],z?!x.ranges||x.equals(B.sel):x.ranges);t++){}if(t!=v.length){for(y.lastOrigin=y.lastSelOrigin=null;;){if(x=v.pop(),x.ranges){b0(x,u);if(z&&!x.equals(B.sel)){fK(B,x,{clearRedo:!1});return}w=x}else{break}}z=[];b0(w,u);u.push({changes:z,generation:y.generation});y.generation=x.generation||++y.maxGeneration;y=fz(B,"beforeChange")||B.cm&&fz(B.cm,"beforeChange");for(t=x.changes.length-1;0<=t;--t){var r=x.changes[t];r.origin=A;if(y&&!k(B,r,!1)){v.length=0;break}z.push(bS(B,r));w=t?cv(B,r):fW(v);gx(B,r,w,eU(B,r));!t&&B.cm&&B.cm.scrollIntoView({from:r.from,to:aT(r)});var q=[];c(B,function(D,C){C||-1!=fR(q,D.history)||(fn(D.history,r),q.push(D.history));gx(D,r,null,eU(D,r))})}}}}function eH(r,q){if(0!=q&&(r.first+=q,r.sel=new cY(b7(r.sel.ranges,function(v){return new eX(e6(v.anchor.line+q,v.anchor.ch),e6(v.head.line+q,v.head.ch))}),r.sel.primIndex),r.cm)){fB(r.cm,r.first,r.first-q,q);for(var u=r.cm.display,t=u.viewFrom;t<u.viewTo;t++){cy(r.cm,t,"gutter")}}}function gx(r,q,v,u){if(r.cm&&!r.cm.curOp){return fM(r.cm,gx)(r,q,v,u)}if(q.to.line<r.first){eH(r,q.text.length-1-(q.to.line-q.from.line))}else{if(!(q.from.line>r.lastLine())){if(q.from.line<r.first){var t=q.text.length-1-(r.first-q.from.line);eH(r,t);q={from:e6(r.first,0),to:e6(q.to.line+t,q.to.ch),text:[fW(q.text)],origin:q.origin}}t=r.lastLine();q.to.line>t&&(q={from:q.from,to:e6(t,e4(r,t).text.length),text:[q.text[0]],origin:q.origin});q.removed=aB(r,q.from,q.to);v||(v=cv(r,q));r.cm?b9(r.cm,q,u):bF(r,q,u);ck(r,v,dV)}}}function b9(z,y,x){var w=z.doc,v=z.display,u=y.from,t=y.to,r=!1,q=u.line;z.options.lineWrapping||(q=fP(dI(e4(w,u.line))),w.iter(q,t.line+1,function(A){if(A==v.maxLine){return r=!0}}));-1<w.sel.contains(y.from,y.to)&&eo(z);bF(w,y,x,fZ(z));z.options.lineWrapping||(w.iter(q,u.line+y.text.length,function(B){var A=eY(B);A>v.maxLineLength&&(v.maxLine=B,v.maxLineLength=A,v.maxLineChanged=!0,r=!1)}),r&&(z.curOp.updateMaxLine=!0));w.frontier=Math.min(w.frontier,u.line);er(z,400);x=y.text.length-(t.line-u.line)-1;y.full?fB(z):u.line!=t.line||1!=y.text.length||eu(z.doc,y)?fB(z,u.line,t.line+1,x):cy(z,u.line,"text");x=fz(z,"changes");if((w=fz(z,"change"))||x){y={from:u,to:t,text:y.text,removed:y.removed,origin:y.origin},w&&fG(z,"change",z,y),x&&(z.curOp.changeObjs||(z.curOp.changeObjs=[])).push(y)}z.display.selForContextMenu=null}function ah(r,q,w,v,u){v||(v=w);if(0>e0(v,w)){var t=v;v=w;w=t}"string"==typeof q&&(q=a5(q));d1(r,{from:w,to:v,text:q,origin:u})}function fj(C,B,A,z,y){var x=C.display,w=i(C.display);0>A&&(A=0);var v=C.curOp&&null!=C.curOp.scrollTop?C.curOp.scrollTop:x.scroller.scrollTop,u=ej(C),t={};y-A>u&&(y=A+u);var r=C.doc.height+am(x),q=A<w,w=y>r-w;A<v?t.scrollTop=q?0:A:y>v+u&&(A=Math.min(A,(w?r:y)-u),A!=v&&(t.scrollTop=A));v=C.curOp&&null!=C.curOp.scrollLeft?C.curOp.scrollLeft:x.scroller.scrollLeft;C=bV(C)-(C.options.fixedGutter?x.gutters.offsetWidth:0);(x=z-B>C)&&(z=B+C);10>B?t.scrollLeft=0:B<v?t.scrollLeft=Math.max(0,B-(x?0:10)):z>C+v-3&&(t.scrollLeft=z+(x?0:10)-C);return t}function cW(r,q,t){null==q&&null==t||cJ(r);null!=q&&(r.curOp.scrollLeft=(null==r.curOp.scrollLeft?r.doc.scrollLeft:r.curOp.scrollLeft)+q);null!=t&&(r.curOp.scrollTop=(null==r.curOp.scrollTop?r.doc.scrollTop:r.curOp.scrollTop)+t)}function dO(r){cJ(r);var q=r.getCursor(),u=q,t=q;r.options.lineWrapping||(u=q.ch?e6(q.line,q.ch-1):q,t=e6(q.line,q.ch+1));r.curOp.scrollToPos={from:u,to:t,margin:r.options.cursorScrollMargin,isCursor:!0}}function cJ(r){var q=r.curOp.scrollToPos;if(q){r.curOp.scrollToPos=null;var u=b4(r,q.from),t=b4(r,q.to),q=fj(r,Math.min(u.left,t.left),Math.min(u.top,t.top)-q.margin,Math.max(u.right,t.right),Math.max(u.bottom,t.bottom)+q.margin);r.scrollTo(q.scrollLeft,q.scrollTop)}}function bU(B,A,z,y){var x=B.doc,w;null==z&&(z="add");"smart"==z&&(x.mode.indent?w=a4(B,A):z="prev");var v=B.options.tabSize,u=e4(x,A),t=gm(u.text,null,v);u.stateAfter&&(u.stateAfter=null);var r=u.text.match(/^\s*/)[0],q;if(!y&&!/\S/.test(u.text)){q=0,z="not"}else{if("smart"==z&&(q=x.mode.indent(w,u.text.slice(r.length),u.text),q==bk||150<q)){if(!y){return}z="prev"}}"prev"==z?q=A>x.first?gm(e4(x,A-1).text,null,v):0:"add"==z?q=t+B.options.indentUnit:"subtract"==z?q=t-B.options.indentUnit:"number"==typeof z&&(q=t+z);q=Math.max(0,q);z="";y=0;if(B.options.indentWithTabs){for(B=Math.floor(q/v);B;--B){y+=v,z+="\t"}}y<q&&(z+=eh(q-y));if(z!=r){return ah(x,z,e6(A,0),e6(A,r.length),"+input"),u.stateAfter=null,!0}for(B=0;B<x.sel.ranges.length;B++){if(v=x.sel.ranges[B],v.head.line==A&&v.head.ch<r.length){y=e6(A,r.length);bM(x,B,new eX(y,y));break}}}function cw(r,q,w,v){var u=q,t=q;"number"==typeof q?t=e4(r,Math.max(r.first,Math.min(q,r.first+r.size-1))):u=fP(q);if(null==u){return null}v(t,u)&&r.cm&&cy(r.cm,u,w);return t}function cl(r,q){for(var x=r.doc.sel.ranges,w=[],v=0;v<x.length;v++){for(var u=q(x[v]);w.length&&0>=e0(u.from,fW(w).to);){var t=w.pop();if(0>e0(t.from,u.from)){u.from=t.from;break}}w.push(u)}fy(r,function(){for(var y=w.length-1;0<=y;y--){ah(r.doc,"",w[y].from,w[y].to,"+delete")}dO(r)})}function bs(G,F,D,C,B){function A(q){var H=(B?d5:dX)(w,y,D,!0);if(null==H){if(q=!q){q=z+D,q<G.first||q>=G.first+G.size?q=v=!1:(z=q,q=w=e4(G,q))}if(q){y=B?(0>D?fQ:gk)(w):0>D?w.text.length:0}else{return v=!1}}else{y=H}return !0}var z=F.line,y=F.ch,x=D,w=e4(G,z),v=!0;if("char"==C){A()}else{if("column"==C){A(!0)}else{if("word"==C||"group"==C){var t=null;C="group"==C;F=G.cm&&G.cm.getHelper(F,"wordChars");for(var u=!0;!(0>D)||A(!u);u=!1){var r=w.text.charAt(y)||"\n",r=b6(r,F)?"w":C&&"\n"==r?"n":!C||/\s/.test(r)?null:"p";!C||u||r||(r="s");if(t&&t!=r){0>D&&(D=1,A());break}r&&(t=r);if(0<D&&!A(!u)){break}}}}}x=bN(G,e6(z,y),x,!0);v||(x.hitSide=!0);return x}function dK(r,q,x,w){var v=r.doc,u=q.left,t;"page"==w?(t=Math.min(r.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),t=q.top+x*(t-(0>x?1.5:0.5)*i(r.display))):"line"==w&&(t=0<x?q.bottom+3:q.top-3);for(;;){q=ep(r,u,t);if(!q.outside){break}if(0>x?0>=t:t>=v.height){q.hitSide=!0;break}t+=5*x}return q}function e1(r,q,u,t){e7.defaults[r]=q;u&&(eZ[r]=t?function(w,v,x){x!=l&&u(w,v,x)}:u)}function bW(r){var q=r.split(/-(?!$)/);r=q[q.length-1];for(var y,x,w,v,u=0;u<q.length-1;u++){var t=q[u];if(/^(cmd|meta|m)$/i.test(t)){v=!0}else{if(/^a(lt)?$/i.test(t)){y=!0}else{if(/^(c|ctrl|control)$/i.test(t)){x=!0}else{if(/^s(hift)$/i.test(t)){w=!0}else{throw Error("Unrecognized modifier name: "+t)}}}}}y&&(r="Alt-"+r);x&&(r="Ctrl-"+r);v&&(r="Cmd-"+r);w&&(r="Shift-"+r);return r}function bT(q){return"string"==typeof q?aH[q]:q}function b1(z,y,x,w,v){if(w&&w.shared){return bJ(z,y,x,w,v)}if(z.cm&&!z.cm.curOp){return fM(z.cm,b1)(z,y,x,w,v)}var u=new gs(z,v);v=e0(y,x);w&&fw(w,u,!1);if(0<v||0==v&&!1!==u.clearWhenEmpty){return u}u.replacedWith&&(u.collapsed=!0,u.widgetNode=e5("span",[u.replacedWith],"CodeMirror-widget"),w.handleMouseEvents||u.widgetNode.setAttribute("cm-ignore-events","true"),w.insertLeft&&(u.widgetNode.insertLeft=!0));if(u.collapsed){if(dy(z,y.line,y,x,u)||y.line!=x.line&&dy(z,x.line,y,x,u)){throw Error("Inserting collapsed marker partially overlapping an existing one")}bv=!0}u.addToHistory&&fY(z,{from:y,to:x,origin:"markText"},z.sel,NaN);var t=y.line,r=z.cm,q;z.iter(t,x.line+1,function(A){r&&u.collapsed&&!r.options.lineWrapping&&dI(A)==r.display.maxLine&&(q=!0);u.collapsed&&t!=y.line&&fl(A,0);var B=new bG(u,t==y.line?y.ch:null,t==x.line?x.ch:null);A.markedSpans=A.markedSpans?A.markedSpans.concat([B]):[B];B.marker.attachLine(A);++t});u.collapsed&&z.iter(y.line,x.line+1,function(A){gy(z,A)&&fl(A,0)});u.clearOnEnter&&e3(u,"beforeCursorEnter",function(){u.clear()});u.readOnly&&(gA=!0,(z.history.done.length||z.history.undone.length)&&z.clearHistory());u.collapsed&&(u.id=++a2,u.atomic=!0);if(r){q&&(r.curOp.updateMaxLine=!0);if(u.collapsed){fB(r,y.line,x.line+1)}else{if(u.className||u.title||u.startStyle||u.endStyle||u.css){for(w=y.line;w<=x.line;w++){cy(r,w,"text")}}}u.atomic&&d4(r.doc);fG(r,"markerAdded",r,u)}return u}function bJ(r,q,y,x,w){x=fw(x);x.shared=!1;var v=[b1(r,q,y,x,w)],u=v[0],t=x.widgetNode;c(r,function(A){t&&(x.widgetNode=t.cloneNode(!0));v.push(b1(A,e2(A,q),e2(A,y),x,w));for(var z=0;z<A.linked.length;++z){if(A.linked[z].isParent){return}}u=fW(v)});return new bt(v,u)}function dk(q){return q.findMarks(e6(q.first,0),q.clipPos(e6(q.lastLine())),function(r){return r.parent})}function bw(r){for(var q=0;q<r.length;q++){var w=r[q],v=[w.primary.doc];c(w.primary.doc,function(x){v.push(x)});for(var u=0;u<w.markers.length;u++){var t=w.markers[u];-1==fR(v,t.doc)&&(t.parent=null,w.markers.splice(u--,1))}}}function bG(r,q,t){this.marker=r;this.from=q;this.to=t}function f7(r,q){if(r){for(var u=0;u<r.length;++u){var t=r[u];if(t.marker==q){return t}}}}function b5(G,F){if(F.full){return null}var D=bH(G,F.from.line)&&e4(G,F.from.line).markedSpans,C=bH(G,F.to.line)&&e4(G,F.to.line).markedSpans;if(!D&&!C){return null}var B=F.from.ch,A=F.to.ch,z=0==e0(F.from,F.to);if(D){for(var y=0,x;y<D.length;++y){var w=D[y],v=w.marker;if(null==w.from||(v.inclusiveLeft?w.from<=B:w.from<B)||!(w.from!=B||"bookmark"!=v.type||z&&w.marker.insertLeft)){var t=null==w.to||(v.inclusiveRight?w.to>=B:w.to>B);(x||(x=[])).push(new bG(v,w.from,t?null:w.to))}}}D=x;if(C){for(var y=0,u;y<C.length;++y){if(x=C[y],w=x.marker,null==x.to||(w.inclusiveRight?x.to>=A:x.to>A)||x.from==A&&"bookmark"==w.type&&(!z||x.marker.insertLeft)){v=null==x.from||(w.inclusiveLeft?x.from<=A:x.from<A),(u||(u=[])).push(new bG(w,v?null:x.from-A,null==x.to?null:x.to-A))}}}C=u;z=1==F.text.length;u=fW(F.text).length+(z?B:0);if(D){for(A=0;A<D.length;++A){if(y=D[A],null==y.to){(x=f7(C,y.marker),x)?z&&(y.to=null==x.to?null:x.to+u):y.to=B}}}if(C){for(A=0;A<C.length;++A){y=C[A],null!=y.to&&(y.to+=u),null==y.from?(x=f7(D,y.marker),x||(y.from=u,z&&(D||(D=[])).push(y))):(y.from+=u,z&&(D||(D=[])).push(y))}}D&&(D=c0(D));C&&C!=D&&(C=c0(C));B=[D];if(!z){var z=F.text.length-2,r;if(0<z&&D){for(A=0;A<D.length;++A){null==D[A].to&&(r||(r=[])).push(new bG(D[A].marker,null,null))}}for(A=0;A<z;++A){B.push(r)}B.push(C)}return B}function c0(r){for(var q=0;q<r.length;++q){var t=r[q];null!=t.from&&t.from==t.to&&!1!==t.marker.clearWhenEmpty&&r.splice(q--,1)}return r.length?r:null}function eU(A,z){var y;if(y=z["spans_"+A.id]){for(var x=0,w=[];x<z.text.length;++x){w.push(a6(y[x]))}y=w}else{y=null}x=b5(A,z);if(!y){return x}if(!x){return y}for(w=0;w<y.length;++w){var v=y[w],u=x[w];if(v&&u){var t=0;A:for(;t<u.length;++t){for(var r=u[t],q=0;q<v.length;++q){if(v[q].marker==r.marker){continue A}}v.push(r)}}else{u&&(y[w]=u)}}return y}function cz(A,z,y){var x=null;A.iter(z.line,y.line+1,function(C){if(C.markedSpans){for(var B=0;B<C.markedSpans.length;++B){var D=C.markedSpans[B].marker;!D.readOnly||x&&-1!=fR(x,D)||(x||(x=[])).push(D)}}});if(!x){return null}A=[{from:z,to:y}];for(z=0;z<x.length;++z){y=x[z];for(var w=y.find(0),v=0;v<A.length;++v){var u=A[v];if(!(0>e0(u.to,w.from)||0<e0(u.from,w.to))){var t=[v,1],r=e0(u.from,w.from),q=e0(u.to,w.to);(0>r||!y.inclusiveLeft&&!r)&&t.push({from:u.from,to:w.from});(0<q||!y.inclusiveRight&&!q)&&t.push({from:w.to,to:u.to});A.splice.apply(A,t);v+=t.length-1}}}return A}function cN(r){var q=r.markedSpans;if(q){for(var t=0;t<q.length;++t){q[t].marker.detachLine(r)}r.markedSpans=null}}function cA(r,q){if(q){for(var t=0;t<q.length;++t){q[t].marker.attachLine(r)}r.markedSpans=q}}function ch(r,q){var v=r.lines.length-q.lines.length;if(0!=v){return v}var v=r.find(),u=q.find(),t=e0(v.from,u.from)||(r.inclusiveLeft?-1:0)-(q.inclusiveLeft?-1:0);return t?-t:(v=e0(v.to,u.to)||(r.inclusiveRight?1:0)-(q.inclusiveRight?1:0))?v:q.id-r.id}function bo(r,q){var w=bv&&r.markedSpans,v;if(w){for(var u,t=0;t<w.length;++t){u=w[t],u.marker.collapsed&&null==(q?u.from:u.to)&&(!v||0>ch(v,u.marker))&&(v=u.marker)}}return v}function dy(z,y,x,w,v){z=e4(z,y);if(z=bv&&z.markedSpans){for(y=0;y<z.length;++y){var u=z[y];if(u.marker.collapsed){var t=u.marker.find(0),r=e0(t.from,x)||(u.marker.inclusiveLeft?-1:0)-(v.inclusiveLeft?-1:0),q=e0(t.to,w)||(u.marker.inclusiveRight?1:0)-(v.inclusiveRight?1:0);if(!(0<=r&&0>=q||0>=r&&0<=q)&&(0>=r&&(0<e0(t.to,x)||u.marker.inclusiveRight&&v.inclusiveLeft)||0<=r&&(0>e0(t.from,w)||u.marker.inclusiveLeft&&v.inclusiveRight))){return !0}}}}}function dI(r){for(var q;q=bo(r,!0);){r=q.find(-1,!0).line}return r}function ew(r,q){var u=e4(r,q),t=dI(u);return u==t?q:fP(t)}function eI(r,q){if(q>r.lastLine()){return q}var u=e4(r,q),t;if(!gy(r,u)){return q}for(;t=bo(u,!1);){u=t.find(1,!0).line}return fP(u)+1}function gy(r,q){var v=bv&&q.markedSpans;if(v){for(var u,t=0;t<v.length;++t){if(u=v[t],u.marker.collapsed&&(null==u.from||!u.marker.widgetNode&&0==u.from&&u.marker.inclusiveLeft&&aQ(r,q,u))){return !0}}}}function aQ(r,q,v){if(null==v.to){return q=v.marker.find(1,!0),aQ(r,q.line,f7(q.line.markedSpans,v.marker))}if(v.marker.inclusiveRight&&v.to==q.text.length){return !0}for(var u,t=0;t<q.markedSpans.length;++t){if(u=q.markedSpans[t],u.marker.collapsed&&!u.marker.widgetNode&&u.from==v.to&&(null==u.to||u.to!=v.from)&&(u.marker.inclusiveLeft||v.marker.inclusiveRight)&&aQ(r,q,u)){return !0}}}function aG(r){if(null!=r.height){return r.height}var q=r.doc.cm;if(!q){return 0}if(!bZ(document.body,r.node)){var t="position: relative;";r.coverGutter&&(t+="margin-left: -"+q.display.gutters.offsetWidth+"px;");r.noHScroll&&(t+="width: "+q.display.wrapper.clientWidth+"px;");fx(q.display.measure,e5("div",[r.node],null,t))}return r.height=r.node.offsetHeight}function cm(r,q,w,v){var u=new a3(r,w,v),t=r.cm;t&&u.noHScroll&&(t.display.alignWidgets=!0);cw(r,q,"widget",function(x){var y=x.widgets||(x.widgets=[]);null==u.insertAt?y.push(u):y.splice(Math.min(y.length-1,Math.max(0,u.insertAt)),0,u);u.line=x;t&&!gy(r,x)&&(y=eF(x)<r.scrollTop,fl(x,x.height+aG(u)),y&&cW(t,null,u.height),t.curOp.forceUpdate=!0);return !0});return u}function bX(r,q){if(r){for(;;){var u=r.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!u){break}r=r.slice(0,u.index)+r.slice(u.index+u[0].length);var t=u[1]?"bgClass":"textClass";null==q[t]?q[t]=u[2]:(new RegExp("(?:^|s)"+u[2]+"(?:$|s)")).test(q[t])||(q[t]+=" "+u[2])}}return r}function bK(r,q){if(r.blankLine){return r.blankLine(q)}if(r.innerMode){var t=e7.innerMode(r,q);if(t.mode.blankLine){return t.mode.blankLine(t.state)}}}function aE(r,q,w,v){for(var u=0;10>u;u++){v&&(v[0]=e7.innerMode(r,w).mode);var t=r.token(q,w);if(q.pos>q.start){return t}}throw Error("Mode "+r.name+" failed to advance stream.")}function bx(C,B,A,z){function y(D){return{start:r.start,end:r.pos,string:r.current(),type:v||null,state:D?c4(x.mode,t):t}}var x=C.doc,w=x.mode,v;B=e2(x,B);var u=e4(x,B.line),t=a4(C,B.line,A),r=new aR(u.text,C.options.tabSize),q;for(z&&(q=[]);(z||r.pos<B.ch)&&!r.eol();){r.start=r.pos,v=aE(w,r,t),z&&q.push(y(!0))}return z?q:y()}function a7(G,F,D,C,B,A,z){var y=D.flattenSpans;null==y&&(y=G.options.flattenSpans);var x=0,w=null,v=new aR(F,G.options.tabSize),t,u=G.options.addModeClass&&[null];for(""==F&&bX(bK(D,C),A);!v.eol();){v.pos>G.options.maxHighlightLength?(y=!1,z&&a9(G,F,C,v.pos),v.pos=F.length,t=null):t=bX(aE(D,v,C,u),A);if(u){var r=u[0].name;r&&(t="m-"+(t?r+" "+t:r))}if(!y||w!=t){for(;x<v.start;){x=Math.min(v.start,x+50000),B(x,w)}w=t}v.start=v.pos}for(;x<v.pos;){G=Math.min(v.pos,x+50000),B(G,w),x=G}}function ds(z,y,x,w){var v=[z.state.modeGen],u={};a7(z,y.text,z.doc.mode,x,function(B,A){v.push(B,A)},u,w);for(x=0;x<z.state.overlays.length;++x){var t=z.state.overlays[x],r=1,q=0;a7(z,y.text,t.mode,!0,function(B,A){for(var D=r;q<B;){var C=v[r];C>B&&v.splice(r,1,B,v[r+1],C);r+=2;q=Math.min(B,C)}if(A){if(t.opaque){v.splice(D,r-D,B,"cm-overlay "+A),r=D+2}else{for(;D<r;D+=2){C=v[D+1],v[D+1]=(C?C+" ":"")+"cm-overlay "+A}}}},u)}return{styles:v,classes:u.bgClass||u.textClass?u:null}}function cn(r,q,u){if(!q.styles||q.styles[0]!=r.state.modeGen){var t=ds(r,q,q.stateAfter=a4(r,fP(q)));q.styles=t.styles;t.classes?q.styleClasses=t.classes:q.styleClasses&&(q.styleClasses=null);u===r.doc.frontier&&r.doc.frontier++}return q.styles}function a9(r,q,w,v){var u=r.doc.mode,t=new aR(q,r.options.tabSize);t.start=t.pos=v||0;for(""==q&&bK(u,w);!t.eol()&&t.pos<=r.options.maxHighlightLength;){aE(u,t,w),t.start=t.pos}}function gh(r,q){if(!r||/^\s*$/.test(r)){return null}var t=q.addModeClass?f9:fJ;return t[r]||(t[r]=r.replace(/\S+/g,"cm-$\x26"))}function c1(ag,af){var ae=e5("span",null,null,fI?"padding-right: .1px":null),ae={pre:e5("pre",[ae]),content:ae,col:0,pos:0,cm:ag,splitSpaces:(fV||fI)&&ag.getOption("lineWrapping")};af.measure={};for(var ad=0;ad<=(af.rest?af.rest.length:0);ad++){var ac=ad?af.rest[ad-1]:af.line,ab;ae.pos=0;ae.addToken=e8;var aa;if(null!=ar){aa=ar}else{aa=fx(ag.display.measure,document.createTextNode("AخA"));var Z=ao(aa,0,1).getBoundingClientRect();aa=Z&&Z.left!=Z.right?ar=3>ao(aa,1,2).getBoundingClientRect().right-Z.right:!1}aa&&(ab=ft(ac))&&(ae.addToken=eM(ae.addToken,ab));ae.map=[];Z=af!=ag.display.externalMeasured&&fP(ac);ag:{aa=ae;var Z=cn(ag,ac,Z),Y=ac.markedSpans,X=ac.text,W=0;if(Y){for(var U=X.length,V=0,S=1,R="",O=void 0,N=void 0,L=0,J=void 0,B=void 0,T=void 0,Q=void 0,t=void 0;;){if(L==V){for(var J=B=T=Q=N="",t=null,L=Infinity,M=[],K=0;K<Y.length;++K){var F=Y[K],P=F.marker;"bookmark"==P.type&&F.from==V&&P.widgetNode?M.push(P):F.from<=V&&(null==F.to||F.to>V||P.collapsed&&F.to==V&&F.from==V)?(null!=F.to&&F.to!=V&&L>F.to&&(L=F.to,B=""),P.className&&(J+=" "+P.className),P.css&&(N=P.css),P.startStyle&&F.from==V&&(T+=" "+P.startStyle),P.endStyle&&F.to==L&&(B+=" "+P.endStyle),P.title&&!Q&&(Q=P.title),P.collapsed&&(!t||0>ch(t.marker,P))&&(t=F)):F.from>V&&L>F.from&&(L=F.from)}if(t&&(t.from||0)==V){fL(aa,(null==t.to?U+1:t.to)-V,t.marker,null==t.from);if(null==t.to){break ag}t.to==V&&(t=!1)}if(!t&&M.length){for(K=0;K<M.length;++K){fL(aa,0,M[K])}}}if(V>=U){break}for(M=Math.min(U,L);;){if(R){K=V+R.length;t||(F=K>M?R.slice(0,M-V):R,aa.addToken(aa,F,O?O+J:J,T,V+F.length==L?B:"",Q,N));if(K>=M){R=R.slice(M-V);V=M;break}V=K;T=""}R=X.slice(W,W=Z[S++]);O=gh(Z[S++],aa.cm.options)}}}else{for(var S=1;S<Z.length;S+=2){aa.addToken(aa,X.slice(W,W=Z[S]),gh(Z[S+1],aa.cm.options))}}}ac.styleClasses&&(ac.styleClasses.bgClass&&(ae.bgClass=E(ac.styleClasses.bgClass,ae.bgClass||"")),ac.styleClasses.textClass&&(ae.textClass=E(ac.styleClasses.textClass,ae.textClass||"")));0==ae.map.length&&ae.map.push(0,0,ae.content.appendChild(ez(ag.display.measure)));0==ad?(af.measure.map=ae.map,af.measure.cache={}):((af.measure.maps||(af.measure.maps=[])).push(ae.map),(af.measure.caches||(af.measure.caches=[])).push({}))}fI&&/\bcm-tab\b/.test(ae.content.lastChild.className)&&(ae.content.className="cm-tab-wrap-hack");fH(ag,"renderLine",ag,af.line,ae.pre);ae.pre.className&&(ae.textClass=E(ae.pre.className,ae.textClass||""));return ae}function e8(J,H,G,F,D,C,B){if(H){var A=J.splitSpaces?H.replace(/ {3,}/g,em):H,z=J.cm.state.specialChars,y=!1;if(z.test(H)){for(var x=document.createDocumentFragment(),v=0;;){z.lastIndex=v;var w=z.exec(H),u=w?w.index-v:H.length-v;if(u){var t=document.createTextNode(A.slice(v,v+u));fV&&9>fT?x.appendChild(e5("span",[t])):x.appendChild(t);J.map.push(J.pos,J.pos+u,t);J.col+=u;J.pos+=u}if(!w){break}v+=u+1;"\t"==w[0]?(t=J.cm.options.tabSize,w=t-J.col%t,t=x.appendChild(e5("span",eh(w),"cm-tab")),t.setAttribute("role","presentation"),t.setAttribute("cm-text","\t"),J.col+=w):(t=J.cm.options.specialCharPlaceholder(w[0]),t.setAttribute("cm-text",w[0]),fV&&9>fT?x.appendChild(e5("span",[t])):x.appendChild(t),J.col+=1);J.map.push(J.pos,J.pos+1,t);J.pos++}}else{J.col+=H.length;var x=document.createTextNode(A);J.map.push(J.pos,J.pos+H.length,x);fV&&9>fT&&(y=!0);J.pos+=H.length}if(G||F||D||y||B){return H=G||"",F&&(H+=F),D&&(H+=D),F=e5("span",[x],H,B),C&&(F.title=C),J.content.appendChild(F)}J.content.appendChild(x)}}function em(r){for(var q=" ",t=0;t<r.length-2;++t){q+=t%2?" ":" "}return q+" "}function eM(r,q){return function(D,C,B,A,z,y,x){B=B?B+" cm-force-border":"cm-force-border";for(var w=D.pos,v=w+C.length;;){for(var t=0;t<q.length;t++){var u=q[t];if(u.to>w&&u.from<=w){break}}if(u.to>=v){return r(D,C,B,A,z,y,x)}r(D,C.slice(0,u.to-w),B,A,null,y,x);A=null;C=C.slice(u.to-w);w=u.to}}}function fL(r,q,v,u){var t=!u&&v.widgetNode;t&&r.map.push(r.pos,r.pos+q,t);!u&&r.cm.display.input.needsContentAttribute&&(t||(t=r.content.appendChild(document.createElement("span"))),t.setAttribute("cm-marker",v.id));t&&(r.cm.display.input.setUneditable(t),r.content.appendChild(t));r.pos+=q}function eu(r,q){return 0==q.from.ch&&0==q.to.ch&&""==fW(q.text)&&(!r.cm||r.cm.options.wholeLineUpdateBefore)}function bF(J,H,G,F){function D(q,K,r){q.text=K;q.stateAfter&&(q.stateAfter=null);q.styles&&(q.styles=null);null!=q.order&&(q.order=null);cN(q);cA(q,r);K=F?F(q):1;K!=q.height&&fl(q,K);fG(q,"change",q,H)}function C(r,q){for(var L=r,K=[];L<q;++L){K.push(new bn(z[L],G?G[L]:null,F))}return K}var B=H.from,A=H.to,z=H.text,y=e4(J,B.line),x=e4(J,A.line),v=fW(z),w=G?G[z.length-1]:null,u=A.line-B.line;if(H.full){J.insert(0,C(0,z.length)),J.remove(z.length,J.size-z.length)}else{if(eu(J,H)){var t=C(0,z.length-1);D(x,x.text,w);u&&J.remove(B.line,u);t.length&&J.insert(B.line,t)}else{y==x?1==z.length?D(y,y.text.slice(0,B.ch)+v+y.text.slice(A.ch),w):(t=C(1,z.length-1),t.push(new bn(v+y.text.slice(A.ch),w,F)),D(y,y.text.slice(0,B.ch)+z[0],G?G[0]:null),J.insert(B.line+1,t)):1==z.length?(D(y,y.text.slice(0,B.ch)+z[0]+x.text.slice(A.ch),G?G[0]:null),J.remove(B.line+1,u)):(D(y,y.text.slice(0,B.ch)+z[0],G?G[0]:null),D(x,v+x.text.slice(A.ch),w),t=C(1,z.length-1),1<u&&J.remove(B.line+1,u-1),J.insert(B.line+1,t))}}fG(J,"change",J,H)}function aY(r){this.lines=r;this.parent=null;for(var q=0,t=0;q<r.length;++q){r[q].parent=this,t+=r[q].height}this.height=t}function aM(r){this.children=r;for(var q=0,v=0,u=0;u<r.length;++u){var t=r[u],q=q+t.chunkSize(),v=v+t.height;t.parent=this}this.size=q;this.height=v;this.parent=null}function c(r,q,u){function t(w,A,z){if(w.linked){for(var y=0;y<w.linked.length;++y){var x=w.linked[y];if(x.doc!=A){var v=z&&x.sharedHist;if(!u||v){q(x.doc,v),t(x.doc,w,v)}}}}}t(r,null,!0)}function al(r,q){if(q.cm){throw Error("This document is already in use.")}r.doc=q;q.cm=r;bm(r);f6(r);r.options.lineWrapping||az(r);r.options.mode=q.modeOption;fB(r)}function e4(r,q){q-=r.first;if(0>q||q>=r.size){throw Error("There is no line "+(q+r.first)+" in the document.")}for(var w=r;!w.lines;){for(var v=0;;++v){var u=w.children[v],t=u.chunkSize();if(q<t){w=u;break}q-=t}}return w.lines[q]}function aB(r,q,v){var u=[],t=q.line;r.iter(q.line,v.line+1,function(w){w=w.text;t==v.line&&(w=w.slice(0,v.ch));t==q.line&&(w=w.slice(q.ch));u.push(w);++t});return u}function f(r,q,u){var t=[];r.iter(q,u,function(v){t.push(v.text)});return t}function fl(r,q){var u=q-r.height;if(u){for(var t=r;t;t=t.parent){t.height+=u}}}function fP(r){if(null==r.parent){return null}var q=r.parent;r=fR(q.lines,r);for(var u=q.parent;u;q=u,u=u.parent){for(var t=0;u.children[t]!=q;++t){r+=u.children[t].chunkSize()}}return r+q.first}function aZ(r,q){var w=r.first;r:do{for(var v=0;v<r.children.length;++v){var u=r.children[v],t=u.height;if(q<t){r=u;continue r}q-=t;w+=u.chunkSize()}return w}while(!r.lines);for(v=0;v<r.lines.length;++v){u=r.lines[v].height;if(q<u){break}q-=u}return w+v}function eF(r){r=dI(r);for(var q=0,v=r.parent,u=0;u<v.lines.length;++u){var t=v.lines[u];if(t==r){break}else{q+=t.height}}for(r=v.parent;r;v=r,r=v.parent){for(u=0;u<r.children.length&&(t=r.children[u],t!=v);++u){q+=t.height}}return q}function ft(r){var q=r.order;null==q&&(q=r.order=d2(r.text));return q}function aF(q){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=q||1}function bS(r,q){var t={from:dm(q.from),to:aT(q),text:aB(r,q.from,q.to)};e9(r,t,q.from.line,q.to.line+1);c(r,function(u){e9(u,t,q.from.line,q.to.line+1)},!0);return t}function fh(q){for(;q.length;){if(fW(q).ranges){q.pop()}else{break}}}function fY(z,y,x,w){var v=z.history;v.undone.length=0;var u=+new Date,t,r;if(r=v.lastOp==w||v.lastOrigin==y.origin&&y.origin&&("+"==y.origin.charAt(0)&&z.cm&&v.lastModTime>u-z.cm.options.historyEventDelay||"*"==y.origin.charAt(0))){v.lastOp==w?(fh(v.done),t=fW(v.done)):v.done.length&&!fW(v.done).ranges?t=fW(v.done):1<v.done.length&&!v.done[v.done.length-2].ranges?(v.done.pop(),t=fW(v.done)):t=void 0,r=t}if(r){var q=fW(t.changes);0==e0(y.from,y.to)&&0==e0(y.from,q.to)?q.to=aT(y):t.changes.push(bS(z,y))}else{for((t=fW(v.done))&&t.ranges||b0(z.sel,v.done),t={changes:[bS(z,y)],generation:v.generation},v.done.push(t);v.done.length>v.undoDepth;){v.done.shift(),v.done[0].ranges||v.done.shift()}}v.done.push(x);v.generation=++v.maxGeneration;v.lastModTime=v.lastSelTime=u;v.lastOp=v.lastSelOp=w;v.lastOrigin=v.lastSelOrigin=y.origin;q||fH(z,"historyAdded")}function b0(r,q){var t=fW(q);t&&t.ranges&&t.equals(r)||q.push(r)}function e9(r,q,w,v){var u=q["spans_"+r.id],t=0;r.iter(Math.max(r.first,w),Math.min(r.first+r.size,v),function(x){x.markedSpans&&((u||(u=q["spans_"+r.id]={}))[t]=x.markedSpans);++t})}function a6(r){if(!r){return null}for(var q=0,t;q<r.length;++q){r[q].marker.explicitlyCleared?t||(t=r.slice(0,q)):t&&t.push(r[q])}return t?t.length?t:null:r}function bO(B,A,z){for(var y=0,x=[];y<B.length;++y){var w=B[y];if(w.ranges){x.push(z?cY.prototype.deepCopy.call(w):w)}else{var w=w.changes,v=[];x.push({changes:v});for(var u=0;u<w.length;++u){var t=w[u],r;v.push({from:t.from,to:t.to,text:t.text});if(A){for(var q in t){(r=q.match(/^spans_(\d+)$/))&&-1<fR(A,Number(r[1]))&&(fW(v)[q]=t[q],delete t[q])}}}}}return x}function eN(r,q,u,t){u<r.line?r.line+=t:q<r.line&&(r.line=q,r.ch=0)}function eA(z,y,x,w){for(var v=0;v<z.length;++v){var u=z[v],t=!0;if(u.ranges){u.copied||(u=z[v]=u.deepCopy(),u.copied=!0);for(var r=0;r<u.ranges.length;r++){eN(u.ranges[r].anchor,y,x,w),eN(u.ranges[r].head,y,x,w)}}else{for(r=0;r<u.changes.length;++r){var q=u.changes[r];if(x<q.from.line){q.from=e6(q.from.line+w,q.from.ch),q.to=e6(q.to.line+w,q.to.ch)}else{if(y<=q.to.line){t=!1;break}}}t||(z.splice(0,v+1),v=0)}}}function fn(r,q){var v=q.from.line,u=q.to.line,t=q.text.length-(u-v)-1;eA(r.done,v,u,t);eA(r.undone,v,u,t)}function cV(q){return null!=q.defaultPrevented?q.defaultPrevented:0==q.returnValue}function e(r){var q=r.which;null==q&&(r.button&1?q=1:r.button&2?q=3:r.button&4&&(q=2));fv&&r.ctrlKey&&1==q&&(q=3);return q}function fG(r,q){function x(y){return function(){y.apply(null,v)}}var w=r._handlers&&r._handlers[q];if(w){var v=Array.prototype.slice.call(arguments,2),u;cR?u=cR.delayedCallbacks:aA?u=aA:(u=aA=[],setTimeout(dP,0));for(var t=0;t<w.length;++t){u.push(x(w[t]))}}}function dP(){var r=aA;aA=null;for(var q=0;q<r.length;++q){r[q]()}}function dw(r,q,t){"string"==typeof q&&(q={type:q,preventDefault:function(){this.defaultPrevented=!0}});fH(r,t||q.type,r,q);return cV(q)||q.codemirrorIgnore}function eo(r){var q=r._handlers&&r._handlers.cursorActivity;if(q){r=r.curOp.cursorActivityHandlers||(r.curOp.cursorActivityHandlers=[]);for(var t=0;t<q.length;++t){-1==fR(r,q[t])&&r.push(q[t])}}}function fz(r,q){var t=r._handlers&&r._handlers[q];return t&&0<t.length}function bB(q){q.prototype.on=function(r,t){e3(this,r,t)};q.prototype.off=function(r,t){di(this,r,t)}}function fS(){this.id=null}function gu(r,q,x){for(var w=0,v=0;;){var u=r.indexOf("\t",w);-1==u&&(u=r.length);var t=u-w;if(u==r.length||v+t>=q){return w+Math.min(t,q-v)}v+=u-w;v+=x-v%x;w=u+1;if(v>=q){return w}}}function eh(q){for(;at.length<=q;){at.push(fW(at)+" ")}return at[q]}function fW(q){return q[q.length-1]}function fR(r,q){for(var t=0;t<r.length;++t){if(r[t]==q){return t}}return -1}function b7(r,q){for(var u=[],t=0;t<r.length;t++){u[t]=q(r[t],t)}return u}function an(){}function en(r,q){var t;Object.create?t=Object.create(r):(an.prototype=r,t=new an);q&&fw(q,t);return t}function fw(r,q,u){q||(q={});for(var t in r){!r.hasOwnProperty(t)||!1===u&&q.hasOwnProperty(t)||(q[t]=r[t])}return q}function fk(r){var q=Array.prototype.slice.call(arguments,1);return function(){return r.apply(null,q)}}function b6(r,q){return q?-1<q.source.indexOf("\\w")&&d3(r)?!0:q.test(r):d3(r)}function dQ(r){for(var q in r){if(r.hasOwnProperty(q)&&r[q]){return !1}}return !0}function aS(q){return 768<=q.charCodeAt(0)&&dD.test(q)}function e5(r,q,u,t){r=document.createElement(r);u&&(r.className=u);t&&(r.style.cssText=t);if("string"==typeof q){r.appendChild(document.createTextNode(q))}else{if(q){for(u=0;u<q.length;++u){r.appendChild(q[u])}}}return r}function f8(r){for(var q=r.childNodes.length;0<q;--q){r.removeChild(r.firstChild)}return r}function fx(r,q){return f8(r).appendChild(q)}function es(){return document.activeElement}function n(q){return new RegExp("(^|\\s)"+q+"(?:$|\\s)\\s*")}function E(r,q){for(var u=r.split(" "),t=0;t<u.length;t++){u[t]&&!n(u[t]).test(q)&&(q+=" "+u[t])}return q}function dr(r){if(document.body.getElementsByClassName){for(var q=document.body.getElementsByClassName("CodeMirror"),u=0;u<q.length;u++){var t=q[u].CodeMirror;t&&r(t)}}}function aO(){var q;e3(window,"resize",function(){null==q&&(q=setTimeout(function(){q=null;dr(fX)},100))});e3(window,"blur",function(){dr(eR)})}function ez(r){if(null==gv){var q=e5("span","");fx(r,e5("span",[q,document.createTextNode("x")]));0!=r.firstChild.offsetHeight&&(gv=1>=q.offsetWidth&&2<q.offsetHeight&&!(fV&&8>fT))}r=gv?e5("span",""):e5("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");r.setAttribute("cm-text","");return r}function bj(r,q,x,w){if(!r){return w(q,x,"ltr")}for(var v=!1,u=0;u<r.length;++u){var t=r[u];if(t.from<x&&t.to>q||q==x&&t.to==q){w(Math.max(t.from,q),Math.min(t.to,x),1==t.level?"rtl":"ltr"),v=!0}}v||w(q,x,"ltr")}function eP(q){return q.level%2?q.to:q.from}function eC(q){return q.level%2?q.from:q.to}function gk(q){return(q=ft(q))?eP(q[0]):0}function fQ(r){var q=ft(r);return q?eC(fW(q)):r.text.length}function c6(r,q){var u=e4(r.doc,q),t=dI(u);t!=u&&(q=fP(t));t=(u=ft(t))?u[0].level%2?fQ(t):gk(t):0;return e6(q,t)}function cT(r,q){var v=c6(r,q.line),u=e4(r.doc,v.line),t=ft(u);return t&&0!=t[0].level?v:(u=Math.max(0,u.text.search(/\S/)),e6(v.line,q.line==v.line&&q.ch<=u&&q.ch?0:u))}function c3(r,q){au=null;for(var y=0,x;y<r.length;++y){var w=r[y];if(w.from<q&&w.to>q){return y}if(w.from==q||w.to==q){if(null==x){x=y}else{var v;v=w.level;var u=r[x].level,t=r[0].level;v=v==t?!0:u==t?!1:v<u;if(v){return w.from!=w.to&&(au=x),y}w.from!=w.to&&(au=y);break}}}return x}function f5(r,q,u,t){if(!t){return q+u}do{q+=u}while(0<q&&aS(r.text.charAt(q)));return q}function d5(r,q,x,w){var v=ft(r);if(!v){return dX(r,q,x,w)}var u=c3(v,q),t=v[u];for(q=f5(r,q,t.level%2?-x:x,w);;){if(q>t.from&&q<t.to){return q}if(q==t.from||q==t.to){if(c3(v,q)==u){return q}t=v[u+x];return 0<x==t.level%2?t.to:t.from}t=v[u+=x];if(!t){return null}q=0<x==t.level%2?f5(r,t.to,-1,w):f5(r,t.from,1,w)}}function dX(r,q,u,t){q+=u;if(t){for(;0<q&&aS(r.text.charAt(q));){q+=u}}return 0>q||q>r.text.length?null:q}var ai=/gecko\/\d/i.test(navigator.userAgent),cG=/MSIE \d/.test(navigator.userAgent),ct=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),fV=cG||ct,fT=fV&&(cG?document.documentMode||6:ct[1]),fI=/WebKit\//.test(navigator.userAgent),dq=fI&&/Qt\/\d+\.\d+/.test(navigator.userAgent),c5=/Chrome\//.test(navigator.userAgent),fU=/Opera\//.test(navigator.userAgent),aP=/Apple Computer/.test(navigator.vendor),cS=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),gz=/PhantomJS/.test(navigator.userAgent),dC=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),gl=dC||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),fv=dC||/Mac/.test(navigator.platform),cF=/win/i.test(navigator.platform),f2=fU&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);f2&&(f2=Number(f2[1]));f2&&15<=f2&&(fU=!1,fI=!0);var b3=fv&&(dq||fU&&(null==f2||12.11>f2)),dF=ai||fV&&9<=fT,gA=!1,bv=!1;m.prototype=fw({update:function(r){var q=r.scrollWidth>r.clientWidth+1,u=r.scrollHeight>r.clientHeight+1,t=r.nativeBarWidth;u?(this.vert.style.display="block",this.vert.style.bottom=q?t+"px":"0",this.vert.firstChild.style.height=Math.max(0,r.scrollHeight-r.clientHeight+(r.viewHeight-(q?t:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");q?(this.horiz.style.display="block",this.horiz.style.right=u?t+"px":"0",this.horiz.style.left=r.barLeft+"px",this.horiz.firstChild.style.width=r.scrollWidth-r.clientWidth+(r.viewWidth-r.barLeft-(u?t:0))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedOverlay&&0<r.clientHeight&&(0==t&&this.overlayHack(),this.checkedOverlay=!0);return{right:u?t:0,bottom:q?t:0}},setScrollLeft:function(q){this.horiz.scrollLeft!=q&&(this.horiz.scrollLeft=q)},setScrollTop:function(q){this.vert.scrollTop!=q&&(this.vert.scrollTop=q)},overlayHack:function(){this.horiz.style.minHeight=this.vert.style.minWidth=fv&&!cS?"12px":"18px";var r=this,q=function(t){(t.target||t.srcElement)!=r.vert&&(t.target||t.srcElement)!=r.horiz&&fM(r.cm,bR)(t)};e3(this.vert,"mousedown",q);e3(this.horiz,"mousedown",q)},clear:function(){var q=this.horiz.parentNode;q.removeChild(this.horiz);q.removeChild(this.vert)}},m.prototype);a.prototype=fw({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},a.prototype);e7.scrollbarModel={"native":m,"null":a};ex.prototype.signal=function(r,q){fz(r,q)&&this.events.push(arguments)};ex.prototype.finish=function(){for(var q=0;q<this.events.length;q++){fH.apply(null,this.events[q])}};var e6=e7.Pos=function(r,q){if(!(this instanceof e6)){return new e6(r,q)}this.line=r;this.ch=q},e0=e7.cmpPos=function(r,q){return r.line-q.line||r.ch-q.ch},fu=null;cP.prototype=fw({init:function(r){function q(y){if(v.somethingSelected()){fu=v.getSelections(),w.inaccurateSelection&&(w.prevInput="",w.inaccurateSelection=!1,t.value=fu.join("\n"),bi(t))}else{if(v.options.lineWiseCopyCut){var x=ci(v);fu=x.text;"cut"==y.type?v.setSelections(x.ranges,null,dV):(w.prevInput="",t.value=x.text.join("\n"),bi(t))}else{return}}"cut"==y.type&&(v.state.cutIncoming=!0)}var w=this,v=this.cm,u=this.wrapper=bL(),t=this.textarea=u.firstChild;r.wrapper.insertBefore(u,r.wrapper.firstChild);dC&&(t.style.width="0px");e3(t,"input",function(){fV&&9<=fT&&w.hasSelection&&(w.hasSelection=null);w.poll()});e3(t,"paste",function(){if(fI&&!v.state.fakedLastChar&&!(200>new Date-v.state.lastMiddleDown)){var y=t.selectionStart,x=t.selectionEnd;t.value+="$";t.selectionEnd=x;t.selectionStart=y;v.state.fakedLastChar=!0}v.state.pasteIncoming=!0;w.fastPoll()});e3(t,"cut",q);e3(t,"copy",q);e3(r.scroller,"paste",function(x){b8(r,x)||(v.state.pasteIncoming=!0,w.focus())});e3(r.lineSpace,"selectstart",function(x){b8(r,x)||fD(x)});e3(t,"compositionstart",function(){var x=v.getCursor("from");w.composing={start:x,range:v.markText(x,v.getCursor("to"),{className:"CodeMirror-composing"})}});e3(t,"compositionend",function(){w.composing&&(w.poll(),w.composing.range.clear(),w.composing=null)})},prepareSelection:function(){var r=this.cm,q=r.display,v=r.doc,u=dR(r);if(r.options.moveInputWithCursor){var r=cL(r,v.sel.primary().head,"div"),v=q.wrapper.getBoundingClientRect(),t=q.lineDiv.getBoundingClientRect();u.teTop=Math.max(0,Math.min(q.wrapper.clientHeight-10,r.top+t.top-v.top));u.teLeft=Math.max(0,Math.min(q.wrapper.clientWidth-10,r.left+t.left-v.left))}return u},showSelection:function(r){var q=this.cm.display;fx(q.cursorDiv,r.cursors);fx(q.selectionDiv,r.selection);null!=r.teTop&&(this.wrapper.style.top=r.teTop+"px",this.wrapper.style.left=r.teLeft+"px")},reset:function(r){if(!this.contextMenuPending){var q,v,u=this.cm,t=u.doc;u.somethingSelected()?(this.prevInput="",q=t.sel.primary(),v=(q=aJ&&(100<q.to().line-q.from().line||1000<(v=u.getSelection()).length))?"-":v||u.getSelection(),this.textarea.value=v,u.state.focused&&bi(this.textarea),fV&&9<=fT&&(this.hasSelection=v)):r||(this.prevInput=this.textarea.value="",fV&&9<=fT&&(this.hasSelection=null));this.inaccurateSelection=q}},getField:function(){return this.textarea},supportsTouch:function(){return !1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!gl||es()!=this.textarea)){try{this.textarea.focus()}catch(q){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var q=this;q.pollingFast||q.polling.set(this.cm.options.pollInterval,function(){q.poll();q.cm.state.focused&&q.slowPoll()})},fastPoll:function(){function r(){t.poll()||q?(t.pollingFast=!1,t.slowPoll()):(q=!0,t.polling.set(60,r))}var q=!1,t=this;t.pollingFast=!0;t.polling.set(20,r)},poll:function(){var r=this.cm,q=this.textarea,x=this.prevInput;if(!r.state.focused||cs(q)&&!x||dn(r)||r.options.disableInput||r.state.keySeq){return !1}r.state.pasteIncoming&&r.state.fakedLastChar&&(q.value=q.value.substring(0,q.value.length-1),r.state.fakedLastChar=!1);var w=q.value;if(w==x&&!r.somethingSelected()){return !1}if(fV&&9<=fT&&this.hasSelection===w||fv&&/[\uf700-\uf7ff]/.test(w)){return r.display.input.reset(),!1}if(r.doc.sel==r.display.selForContextMenu){var v=w.charCodeAt(0);8203!=v||x||(x="");if(8666==v){return this.reset(),this.cm.execCommand("undo")}}for(var u=0,v=Math.min(x.length,w.length);u<v&&x.charCodeAt(u)==w.charCodeAt(u);){++u}var t=this;fy(r,function(){c2(r,w.slice(u),x.length-u,null,t.composing?"*compose":null);1000<w.length||-1<w.indexOf("\n")?q.value=t.prevInput="":t.prevInput=w;t.composing&&(t.composing.range.clear(),t.composing.range=r.markText(t.composing.start,r.getCursor("to"),{className:"CodeMirror-composing"}))});return !0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){fV&&9<=fT&&(this.hasSelection=null);this.fastPoll()},onContextMenu:function(C){function B(){if(null!=w.selectionStart){var F=y.somethingSelected(),D=""+(F?w.value:"");w.value="⇚";w.value=D;z.prevInput=F?"":"";w.selectionStart=1;w.selectionEnd=D.length;x.selForContextMenu=y.doc.sel}}function A(){z.contextMenuPending=!1;z.wrapper.style.position="relative";w.style.cssText=t;fV&&9>fT&&x.scrollbars.setScrollTop(x.scroller.scrollTop=u);if(null!=w.selectionStart){(!fV||fV&&9>fT)&&B();var D=0,F=function(){x.selForContextMenu==y.doc.sel&&0==w.selectionStart&&0<w.selectionEnd&&""==z.prevInput?fM(y,dG.selectAll)(y):10>D++?x.detectingSelectAll=setTimeout(F,500):x.input.reset()};x.detectingSelectAll=setTimeout(F,200)}}var z=this,y=z.cm,x=y.display,w=z.textarea,v=cE(y,C),u=x.scroller.scrollTop;if(v&&!fU){y.options.resetSelectionOnContextMenu&&-1==y.doc.sel.contains(v)&&fM(y,fK)(y.doc,d8(v),dV);var t=w.style.cssText;z.wrapper.style.position="absolute";w.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(C.clientY-5)+"px; left: "+(C.clientX-5)+"px; z-index: 1000; background: "+(fV?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity\x3d5);";if(fI){var r=window.scrollY}x.input.focus();fI&&window.scrollTo(null,r);x.input.reset();y.somethingSelected()||(w.value=z.prevInput=" ");z.contextMenuPending=!0;x.selForContextMenu=y.doc.sel;clearTimeout(x.detectingSelectAll);fV&&9<=fT&&B();if(dF){dt(C);var q=function(){di(window,"mouseup",q);setTimeout(A,20)};e3(window,"mouseup",q)}else{setTimeout(A,50)}}},setUneditable:an,needsContentAttribute:!1},cP.prototype);cC.prototype=fw({init:function(r){function q(w){if(t.somethingSelected()){fu=t.getSelections(),"cut"==w.type&&t.replaceSelection("",null,"cut")}else{if(t.options.lineWiseCopyCut){var v=ci(t);fu=v.text;"cut"==w.type&&t.operation(function(){t.setSelections(v.ranges,0,dV);t.replaceSelection("",null,"cut")})}else{return}}if(w.clipboardData&&!dC){w.preventDefault(),w.clipboardData.clearData(),w.clipboardData.setData("text/plain",fu.join("\n"))}else{var y=bL();w=y.firstChild;t.display.lineSpace.insertBefore(y,t.display.lineSpace.firstChild);w.value=fu.join("\n");var x=document.activeElement;bi(w);setTimeout(function(){t.display.lineSpace.removeChild(y);x.focus()},50)}}var u=this,t=u.cm;r=u.div=r.lineDiv;r.contentEditable="true";bY(r);e3(r,"paste",function(w){var v=w.clipboardData&&w.clipboardData.getData("text/plain");v&&(w.preventDefault(),t.replaceSelection(v,null,"paste"))});e3(r,"compositionstart",function(w){w=w.data;u.composing={sel:t.doc.sel,data:w,startData:w};if(w){var v=t.doc.sel.primary(),x=t.getLine(v.head.line).indexOf(w,Math.max(0,v.head.ch-w.length));-1<x&&x<=v.head.ch&&(u.composing.sel=d8(e6(v.head.line,x),e6(v.head.line,x+w.length)))}});e3(r,"compositionupdate",function(v){u.composing.data=v.data});e3(r,"compositionend",function(w){var v=u.composing;v&&(w.data==v.startData||/\u200b/.test(w.data)||(v.data=w.data),setTimeout(function(){v.handled||u.applyComposition(v);u.composing==v&&(u.composing=null)},50))});e3(r,"touchstart",function(){u.forceCompositionEnd()});e3(r,"input",function(){u.composing||u.pollContent()||fy(u.cm,function(){fB(t)})});e3(r,"copy",q);e3(r,"cut",q)},prepareSelection:function(){var q=dR(this.cm,!1);q.focus=this.cm.state.focused;return q},showSelection:function(q){q&&this.cm.display.view.length&&(q.focus&&this.showPrimarySelection(),this.showMultipleSelections(q))},showPrimarySelection:function(){var r=window.getSelection(),q=this.cm.doc.sel.primary(),x=cQ(this.cm,r.anchorNode,r.anchorOffset),w=cQ(this.cm,r.focusNode,r.focusOffset);if(!x||x.bad||!w||w.bad||0!=e0(dB(x,w),q.from())||0!=e0(dN(x,w),q.to())){if(x=by(this.cm,q.from()),w=by(this.cm,q.to()),x||w){var v=this.cm.display.view,q=r.rangeCount&&r.getRangeAt(0);x?w||(w=v[v.length-1].measure,w=w.maps?w.maps[w.maps.length-1]:w.map,w={node:w[w.length-1],offset:w[w.length-2]-w[w.length-3]}):x={node:v[0].measure.map[2],offset:0};try{var u=ao(x.node,x.offset,w.offset,w.node)}catch(t){}u&&(r.removeAllRanges(),r.addRange(u),q&&null==r.anchorNode?r.addRange(q):ai&&this.startGracePeriod());this.rememberSelection()}}},startGracePeriod:function(){var q=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){q.gracePeriod=!1;q.selectionChanged()&&q.cm.operation(function(){q.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(q){fx(this.cm.display.cursorDiv,q.cursors);fx(this.cm.display.selectionDiv,q.selection)},rememberSelection:function(){var q=window.getSelection();this.lastAnchorNode=q.anchorNode;this.lastAnchorOffset=q.anchorOffset;this.lastFocusNode=q.focusNode;this.lastFocusOffset=q.focusOffset},selectionInEditor:function(){var q=window.getSelection();if(!q.rangeCount){return !1}q=q.getRangeAt(0).commonAncestorContainer;return bZ(this.div,q)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return !0},receivedFocus:function(){function r(){q.cm.state.focused&&(q.pollSelection(),q.polling.set(q.cm.options.pollInterval,r))}var q=this;this.selectionInEditor()?this.pollSelection():fy(this.cm,function(){q.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,r)},selectionChanged:function(){var q=window.getSelection();return q.anchorNode!=this.lastAnchorNode||q.anchorOffset!=this.lastAnchorOffset||q.focusNode!=this.lastFocusNode||q.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var r=window.getSelection(),q=this.cm;this.rememberSelection();var u=cQ(q,r.anchorNode,r.anchorOffset),t=cQ(q,r.focusNode,r.focusOffset);u&&t&&fy(q,function(){fK(q.doc,d8(u,t),dV);if(u.bad||t.bad){q.curOp.selectionChanged=!0}})}},pollContent:function(){var A=this.cm,z=A.display,y=A.doc.sel.primary(),x=y.from(),y=y.to();if(x.line<z.viewFrom||y.line>z.viewTo-1){return !1}var w;x.line==z.viewFrom||0==(w=aN(A,x.line))?(x=fP(z.view[0].line),w=z.view[0].node):(x=fP(z.view[w].line),w=z.view[w-1].node.nextSibling);var v=aN(A,y.line);v==z.view.length-1?(y=z.viewTo-1,z=z.view[v].node):(y=fP(z.view[v+1].line)-1,z=z.view[v+1].node.previousSibling);z=a5(d(A,w,z,x,y));for(w=aB(A.doc,e6(x,0),e6(y,e4(A.doc,y).text.length));1<z.length&&1<w.length;){if(fW(z)==fW(w)){z.pop(),w.pop(),y--}else{if(z[0]==w[0]){z.shift(),w.shift(),x++}else{break}}}for(var u=0,v=0,t=z[0],r=w[0],q=Math.min(t.length,r.length);u<q&&t.charCodeAt(u)==r.charCodeAt(u);){++u}t=fW(z);r=fW(w);for(q=Math.min(t.length-(1==z.length?u:0),r.length-(1==w.length?u:0));v<q&&t.charCodeAt(t.length-v-1)==r.charCodeAt(r.length-v-1);){++v}z[z.length-1]=t.slice(0,t.length-v);z[0]=z[0].slice(u);x=e6(x,u);y=e6(y,w.length?fW(w).length-v:0);if(1<z.length||z[0]||e0(x,y)){return ah(A.doc,z,x,y,"+input"),!0}},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(q){q.data&&q.data!=q.startData&&fM(this.cm,c2)(this.cm,q.data,0,q.sel)},setUneditable:function(q){q.setAttribute("contenteditable","false")},onKeyPress:function(q){q.preventDefault();fM(this.cm,c2)(this.cm,String.fromCharCode(null==q.charCode?q.keyCode:q.charCode),0)},onContextMenu:an,resetPosition:an,needsContentAttribute:!0},cC.prototype);e7.inputStyles={textarea:cP,contenteditable:cC};cY.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(r){if(r==this){return !0}if(r.primIndex!=this.primIndex||r.ranges.length!=this.ranges.length){return !1}for(var q=0;q<this.ranges.length;q++){var u=this.ranges[q],t=r.ranges[q];if(0!=e0(u.anchor,t.anchor)||0!=e0(u.head,t.head)){return !1}}return !0},deepCopy:function(){for(var r=[],q=0;q<this.ranges.length;q++){r[q]=new eX(dm(this.ranges[q].anchor),dm(this.ranges[q].head))}return new cY(r,this.primIndex)},somethingSelected:function(){for(var q=0;q<this.ranges.length;q++){if(!this.ranges[q].empty()){return !0}}return !1},contains:function(r,q){q||(q=r);for(var u=0;u<this.ranges.length;u++){var t=this.ranges[u];if(0<=e0(q,t.from())&&0>=e0(r,t.to())){return u}}return -1}};eX.prototype={from:function(){return dB(this.anchor,this.head)},to:function(){return dN(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var gj={left:0,right:0,top:0,bottom:0},o,cR=null,j=0,eq,eD,a1=0,d6=0,fA=null;fV?fA=-0.53:ai?fA=15:c5?fA=-0.7:aP&&(fA=-1/3);var f4=function(r){var q=r.wheelDeltaX,t=r.wheelDeltaY;null==q&&r.detail&&r.axis==r.HORIZONTAL_AXIS&&(q=r.detail);null==t&&r.detail&&r.axis==r.VERTICAL_AXIS?t=r.detail:null==t&&(t=r.wheelDelta);return{x:q,y:t}};e7.wheelEventPixels=function(q){q=f4(q);q.x*=fA;q.y*=fA;return q};var dx=new fS,cI=null,aT=e7.changeEnd=function(q){return q.text?e6(q.from.line+q.text.length-1,fW(q.text).length+(1==q.text.length?q.from.ch:0)):q.to};e7.prototype={constructor:e7,focus:function(){window.focus();this.display.input.focus()},setOption:function(r,q){var u=this.options,t=u[r];if(u[r]!=q||"mode"==r){u[r]=q,eZ.hasOwnProperty(r)&&fM(this,eZ[r])(this,q,t)}},getOption:function(q){return this.options[q]},getDoc:function(){return this.doc},addKeyMap:function(r,q){this.state.keyMaps[q?"push":"unshift"](bT(r))},removeKeyMap:function(r){for(var q=this.state.keyMaps,t=0;t<q.length;++t){if(q[t]==r||q[t].name==r){return q.splice(t,1),!0}}},addOverlay:fF(function(r,q){var t=r.token?r:e7.getMode(this.options,r);if(t.startState){throw Error("Overlays may not be stateful.")}this.state.overlays.push({mode:t,modeSpec:r,opaque:q&&q.opaque});this.state.modeGen++;fB(this)}),removeOverlay:fF(function(r){for(var q=this.state.overlays,u=0;u<q.length;++u){var t=q[u].modeSpec;if(t==r||"string"==typeof r&&t.name==r){q.splice(u,1);this.state.modeGen++;fB(this);break}}}),indentLine:fF(function(r,q,t){"string"!=typeof q&&"number"!=typeof q&&(q=null==q?this.options.smartIndent?"smart":"prev":q?"add":"subtract");bH(this.doc,r)&&bU(this,r,q,t)}),indentSelection:fF(function(r){for(var q=this.doc.sel.ranges,x=-1,w=0;w<q.length;w++){var v=q[w];if(v.empty()){v.head.line>x&&(bU(this,v.head.line,r,!0),x=v.head.line,w==this.doc.sel.primIndex&&dO(this))}else{for(var u=v.from(),v=v.to(),t=Math.max(x,u.line),x=Math.min(this.lastLine(),v.line-(v.ch?0:1))+1,v=t;v<x;++v){bU(this,v,r)}v=this.doc.sel.ranges;0==u.ch&&q.length==v.length&&0<v[w].from().ch&&bM(this.doc,w,new eX(u,v[w].to()),dV)}}}),getTokenAt:function(r,q){return bx(this,r,q)},getLineTokens:function(r,q){return bx(this,e6(r),q,!0)},getTokenTypeAt:function(r){r=e2(this.doc,r);var q=cn(this,e4(this.doc,r.line)),v=0,u=(q.length-1)/2;r=r.ch;if(0==r){q=q[2]}else{for(;;){var t=v+u>>1;if((t?q[2*t-1]:0)>=r){u=t}else{if(q[2*t+1]<r){v=t+1}else{q=q[2*t+2];break}}}}v=q?q.indexOf("cm-overlay "):-1;return 0>v?q:0==v?null:q.slice(0,v-1)},getModeAt:function(r){var q=this.doc.mode;return q.innerMode?e7.innerMode(q,this.getTokenAt(r).state).mode:q},getHelper:function(r,q){return this.getHelpers(r,q)[0]},getHelpers:function(r,q){var x=[];if(!cr.hasOwnProperty(q)){return x}var w=cr[q],v=this.getModeAt(r);if("string"==typeof v[q]){w[v[q]]&&x.push(w[v[q]])}else{if(v[q]){for(var u=0;u<v[q].length;u++){var t=w[v[q][u]];t&&x.push(t)}}else{v.helperType&&w[v.helperType]?x.push(w[v.helperType]):w[v.name]&&x.push(w[v.name])}}for(u=0;u<w._global.length;u++){t=w._global[u],t.pred(v,this)&&-1==fR(x,t.val)&&x.push(t.val)}return x},getStateAfter:function(r,q){var t=this.doc;r=Math.max(t.first,Math.min(null==r?t.first+t.size-1:r,t.first+t.size-1));return a4(this,r+1,q)},cursorCoords:function(r,q){var t;t=this.doc.sel.primary();t=null==r?t.head:"object"==typeof r?e2(this.doc,r):r?t.from():t.to();return cL(this,t,q||"page")},charCoords:function(r,q){return bA(this,e2(this.doc,r),q||"page")},coordsChar:function(r,q){r=cu(this,r,q||"page");return ep(this,r.left,r.top)},lineAtHeight:function(r,q){r=cu(this,{top:r,left:0},q||"page").top;return aZ(this.doc,r+this.display.viewOffset)},heightAtLine:function(r,q){var u=!1,t;"number"==typeof r?(t=this.doc.first+this.doc.size-1,r<this.doc.first?r=this.doc.first:r>t&&(r=t,u=!0),t=e4(this.doc,r)):t=r;return fi(this,t,{top:0,left:0},q||"page").top+(u?this.doc.height-eF(t):0)},defaultTextHeight:function(){return i(this.display)},defaultCharWidth:function(){return d7(this.display)},setGutterMarker:fF(function(r,q,t){return cw(this.doc,r,"gutter",function(u){var v=u.gutterMarkers||(u.gutterMarkers={});v[q]=t;!t&&dQ(v)&&(u.gutterMarkers=null);return !0})}),clearGutter:fF(function(r){var q=this,u=q.doc,t=u.first;u.iter(function(v){v.gutterMarkers&&v.gutterMarkers[r]&&(v.gutterMarkers[r]=null,cy(q,t,"gutter"),dQ(v.gutterMarkers)&&(v.gutterMarkers=null));++t})}),lineInfo:function(r){if("number"==typeof r){if(!bH(this.doc,r)){return null}var q=r;r=e4(this.doc,r);if(!r){return null}}else{if(q=fP(r),null==q){return null}}return{line:q,handle:r,text:r.text,gutterMarkers:r.gutterMarkers,textClass:r.textClass,bgClass:r.bgClass,wrapClass:r.wrapClass,widgets:r.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(A,z,y,x,w){var v=this.display;A=cL(this,e2(this.doc,A));var u=A.bottom,t=A.left;z.style.position="absolute";z.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(z);v.sizer.appendChild(z);if("over"==x){u=A.top}else{if("above"==x||"near"==x){var r=Math.max(v.wrapper.clientHeight,this.doc.height),q=Math.max(v.sizer.clientWidth,v.lineSpace.clientWidth);("above"==x||A.bottom+z.offsetHeight>r)&&A.top>z.offsetHeight?u=A.top-z.offsetHeight:A.bottom+z.offsetHeight<=r&&(u=A.bottom);t+z.offsetWidth>q&&(t=q-z.offsetWidth)}}z.style.top=u+"px";z.style.left=z.style.right="";"right"==w?(t=v.sizer.clientWidth-z.offsetWidth,z.style.right="0px"):("left"==w?t=0:"middle"==w&&(t=(v.sizer.clientWidth-z.offsetWidth)/2),z.style.left=t+"px");y&&(A=fj(this,t,u,t+z.offsetWidth,u+z.offsetHeight),null!=A.scrollTop&&cX(this,A.scrollTop),null!=A.scrollLeft&&ey(this,A.scrollLeft))},triggerOnKeyDown:fF(aq),triggerOnKeyPress:fF(s),triggerOnKeyUp:aD,execCommand:function(q){if(dG.hasOwnProperty(q)){return dG[q](this)}},findPosH:function(r,q,w,v){var u=1;0>q&&(u=-1,q=-q);var t=0;for(r=e2(this.doc,r);t<q&&(r=bs(this.doc,r,u,w,v),!r.hitSide);++t){}return r},moveH:fF(function(r,q){var t=this;t.extendSelectionsBy(function(u){return t.display.shift||t.doc.extend||u.empty()?bs(t.doc,u.head,r,q,t.options.rtlMoveVisually):0>r?u.from():u.to()},b)}),deleteH:fF(function(r,q){var t=this.doc;this.doc.sel.somethingSelected()?t.replaceSelection("",null,"+delete"):cl(this,function(v){var u=bs(t,v.head,r,q,!1);return 0>r?{from:u,to:v.head}:{from:v.head,to:u}})}),findPosV:function(r,q,w,v){var u=1;0>q&&(u=-1,q=-q);var t=0;for(r=e2(this.doc,r);t<q&&(r=cL(this,r,"div"),null==v?v=r.left:r.left=v,r=dK(this,r,u,w),!r.hitSide);++t){}return r},moveV:fF(function(r,q){var x=this,w=this.doc,v=[],u=!x.display.shift&&!w.extend&&w.sel.somethingSelected();w.extendSelectionsBy(function(A){if(u){return 0>r?A.from():A.to()}var z=cL(x,A.head,"div");null!=A.goalColumn&&(z.left=A.goalColumn);v.push(z.left);var y=dK(x,z,r,q);"page"==q&&A==w.sel.primary()&&cW(x,null,bA(x,y,"div").top-z.top);return y},b);if(v.length){for(var t=0;t<w.sel.ranges.length;t++){w.sel.ranges[t].goalColumn=v[t]}}}),findWordAt:function(r){var q=e4(this.doc,r.line).text,w=r.ch,v=r.ch;if(q){var u=this.getHelper(r,"wordChars");(0>r.xRel||v==q.length)&&w?--w:++v;for(var t=q.charAt(w),t=b6(t,u)?function(x){return b6(x,u)}:/\s/.test(t)?function(x){return/\s/.test(x)}:function(x){return !/\s/.test(x)&&!b6(x)};0<w&&t(q.charAt(w-1));){--w}for(;v<q.length&&t(q.charAt(v));){++v}}return new eX(e6(r.line,w),e6(r.line,v))},toggleOverwrite:function(q){if(null==q||q!=this.state.overwrite){(this.state.overwrite=!this.state.overwrite)?cK(this.display.cursorDiv,"CodeMirror-overwrite"):dh(this.display.cursorDiv,"CodeMirror-overwrite"),fH(this,"overwriteToggle",this,this.state.overwrite)}},hasFocus:function(){return this.display.input.getField()==es()},scrollTo:fF(function(r,q){null==r&&null==q||cJ(this);null!=r&&(this.curOp.scrollLeft=r);null!=q&&(this.curOp.scrollTop=q)}),getScrollInfo:function(){var q=this.display.scroller;return{left:q.scrollLeft,top:q.scrollTop,height:q.scrollHeight-eS(this)-this.display.barHeight,width:q.scrollWidth-eS(this)-this.display.barWidth,clientHeight:ej(this),clientWidth:bV(this)}},scrollIntoView:fF(function(r,q){null==r?(r={from:this.doc.sel.primary().head,to:null},null==q&&(q=this.options.cursorScrollMargin)):"number"==typeof r?r={from:e6(r,0),to:null}:null==r.from&&(r={from:r,to:null});r.to||(r.to=r.from);r.margin=q||0;if(null!=r.from.line){cJ(this),this.curOp.scrollToPos=r}else{var t=fj(this,Math.min(r.from.left,r.to.left),Math.min(r.from.top,r.to.top)-r.margin,Math.max(r.from.right,r.to.right),Math.max(r.from.bottom,r.to.bottom)+r.margin);this.scrollTo(t.scrollLeft,t.scrollTop)}}),setSize:fF(function(r,q){function v(w){return"number"==typeof w||/^\d+$/.test(String(w))?w+"px":w}var u=this;null!=r&&(u.display.wrapper.style.width=v(r));null!=q&&(u.display.wrapper.style.height=v(q));u.options.lineWrapping&&cH(this);var t=u.display.viewFrom;u.doc.iter(t,u.display.viewTo,function(x){if(x.widgets){for(var w=0;w<x.widgets.length;w++){if(x.widgets[w].noHScroll){cy(u,t,"widget");break}}}++t});u.curOp.forceUpdate=!0;fH(u,"refresh",this)}),operation:function(q){return fy(this,q)},refresh:fF(function(){var q=this.display.cachedTextHeight;fB(this);this.curOp.forceUpdate=!0;dU(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);aL(this);(null==q||0.5<Math.abs(q-i(this.display)))&&bm(this);fH(this,"refresh",this)}),swapDoc:fF(function(r){var q=this.doc;q.cm=null;al(this,r);dU(this);this.display.input.reset();this.scrollTo(r.scrollLeft,r.scrollTop);this.curOp.forceScroll=!0;fG(this,"swapDoc",this,q);return q}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bB(e7);var bD=e7.defaults={},eZ=e7.optionHandlers={},l=e7.Init={toString:function(){return"CodeMirror.Init"}};e1("value","",function(r,q){r.setValue(q)},!0);e1("mode",null,function(r,q){r.doc.modeOption=q;f6(r)},!0);e1("indentUnit",2,f6,!0);e1("indentWithTabs",!1);e1("smartIndent",!0);e1("tabSize",4,function(q){eE(q);dU(q);fB(q)},!0);e1("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(r,q,t){r.state.specialChars=new RegExp(q.source+(q.test("\t")?"":"|\t"),"g");t!=e7.Init&&r.refresh()});e1("specialCharPlaceholder",function(r){var q=e5("span","•","cm-invalidchar");q.title="\\u"+r.charCodeAt(0).toString(16);q.setAttribute("aria-label",q.title);return q},function(q){q.refresh()},!0);e1("electricChars",!0);e1("inputStyle",gl?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor")},!0);e1("rtlMoveVisually",!cF);e1("wholeLineUpdateBefore",!0);e1("theme","default",function(q){aW(q);dH(q)},!0);e1("keyMap","default",function(r,q,t){q=bT(q);(t=t!=e7.Init&&bT(t))&&t.detach&&t.detach(r,q);q.attach&&q.attach(r,t||null)});e1("extraKeys",null);e1("lineWrapping",!1,function(q){q.options.lineWrapping?(cK(q.display.wrapper,"CodeMirror-wrap"),q.display.sizer.style.minWidth="",q.display.sizerWidth=null):(dh(q.display.wrapper,"CodeMirror-wrap"),az(q));bm(q);fB(q);dU(q);setTimeout(function(){el(q)},100)},!0);e1("gutters",[],function(q){I(q.options);dH(q)},!0);e1("fixedGutter",!0,function(r,q){r.display.gutters.style.left=q?f0(r.display)+"px":"0";r.refresh()},!0);e1("coverGutterNextToScrollbar",!1,function(q){el(q)},!0);e1("scrollbarStyle","native",function(q){aK(q);el(q);q.display.scrollbars.setScrollTop(q.doc.scrollTop);q.display.scrollbars.setScrollLeft(q.doc.scrollLeft)},!0);e1("lineNumbers",!1,function(q){I(q.options);dH(q)},!0);e1("firstLineNumber",1,dH,!0);e1("lineNumberFormatter",function(q){return q},dH,!0);e1("showCursorWhenSelecting",!1,cx,!0);e1("resetSelectionOnContextMenu",!0);e1("lineWiseCopyCut",!0);e1("readOnly",!1,function(r,q){"nocursor"==q?(eR(r),r.display.input.blur(),r.display.disabled=!0):(r.display.disabled=!1,q||r.display.input.reset())});e1("disableInput",!1,function(r,q){q||r.display.input.reset()},!0);e1("dragDrop",!0,function(r,q,t){!q!=!(t&&t!=e7.Init)&&(t=r.display.dragFunctions,q=q?e3:di,q(r.display.scroller,"dragstart",t.start),q(r.display.scroller,"dragenter",t.simple),q(r.display.scroller,"dragover",t.simple),q(r.display.scroller,"drop",t.drop))});e1("cursorBlinkRate",530);e1("cursorScrollMargin",0);e1("cursorHeight",1,cx,!0);e1("singleCursorHeightPerLine",!0,cx,!0);e1("workTime",100);e1("workDelay",100);e1("flattenSpans",!0,eE,!0);e1("addModeClass",!1,eE,!0);e1("pollInterval",100);e1("undoDepth",200,function(r,q){r.doc.history.undoDepth=q});e1("historyEventDelay",1250);e1("viewportMargin",10,function(q){q.refresh()},!0);e1("maxHighlightLength",10000,eE,!0);e1("moveInputWithCursor",!0,function(r,q){q||r.display.input.resetPosition()});e1("tabindex",null,function(r,q){r.display.input.getField().tabIndex=q||""});e1("autofocus",null);var bQ=e7.modes={},gr=e7.mimeModes={};e7.defineMode=function(r,q){e7.defaults.mode||"null"==r||(e7.defaults.mode=r);2<arguments.length&&(q.dependencies=Array.prototype.slice.call(arguments,2));bQ[r]=q};e7.defineMIME=function(r,q){gr[r]=q};e7.resolveMode=function(r){if("string"==typeof r&&gr.hasOwnProperty(r)){r=gr[r]}else{if(r&&"string"==typeof r.name&&gr.hasOwnProperty(r.name)){var q=gr[r.name];"string"==typeof q&&(q={name:q});r=en(q,r);r.name=q.name}else{if("string"==typeof r&&/^[\w\-]+\/[\w\-]+\+xml$/.test(r)){return e7.resolveMode("application/xml")}}}return"string"==typeof r?{name:r}:r||{name:"null"}};e7.getMode=function(r,q){q=e7.resolveMode(q);var v=bQ[q.name];if(!v){return e7.getMode(r,"text/plain")}v=v(r,q);if(f1.hasOwnProperty(q.name)){var u=f1[q.name],t;for(t in u){u.hasOwnProperty(t)&&(v.hasOwnProperty(t)&&(v["_"+t]=v[t]),v[t]=u[t])}}v.name=q.name;q.helperType&&(v.helperType=q.helperType);if(q.modeProps){for(t in q.modeProps){v[t]=q.modeProps[t]}}return v};e7.defineMode("null",function(){return{token:function(q){q.skipToEnd()}}});e7.defineMIME("text/plain","null");var f1=e7.modeExtensions={};e7.extendMode=function(r,q){var t=f1.hasOwnProperty(r)?f1[r]:f1[r]={};fw(q,t)};e7.defineExtension=function(r,q){e7.prototype[r]=q};e7.defineDocExtension=function(r,q){fC.prototype[r]=q};e7.defineOption=e1;var gw=[];e7.defineInitHook=function(q){gw.push(q)};var cr=e7.helpers={};e7.registerHelper=function(r,q,t){cr.hasOwnProperty(r)||(cr[r]=e7[r]={_global:[]});cr[r][q]=t};e7.registerGlobalHelper=function(r,q,u,t){e7.registerHelper(r,q,t);cr[r]._global.push({pred:u,val:t})};var c4=e7.copyState=function(r,q){if(!0===q){return q}if(r.copyState){return r.copyState(q)}var v={},u;for(u in q){var t=q[u];t instanceof Array&&(t=t.concat([]));v[u]=t}return v},aw=e7.startState=function(r,q,t){return r.startState?r.startState(q,t):!0};e7.innerMode=function(r,q){for(;r.innerMode;){var t=r.innerMode(q);if(!t||t.mode==r){break}q=t.state;r=t.mode}return t||{mode:r,state:q}};var dG=e7.commands={selectAll:function(q){q.setSelection(e6(q.firstLine(),0),e6(q.lastLine()),dV)},singleSelection:function(q){q.setSelection(q.getCursor("anchor"),q.getCursor("head"),dV)},killLine:function(q){cl(q,function(r){if(r.empty()){var t=e4(q.doc,r.head.line).text.length;return r.head.ch==t&&r.head.line<q.lastLine()?{from:r.head,to:e6(r.head.line+1,0)}:{from:r.head,to:e6(r.head.line,t)}}return{from:r.from(),to:r.to()}})},deleteLine:function(q){cl(q,function(r){return{from:e6(r.from().line,0),to:e2(q.doc,e6(r.to().line+1,0))}})},delLineLeft:function(q){cl(q,function(r){return{from:e6(r.from().line,0),to:r.from()}})},delWrappedLineLeft:function(q){cl(q,function(r){var t=q.charCoords(r.head,"div").top+5;return{from:q.coordsChar({left:0,top:t},"div"),to:r.from()}})},delWrappedLineRight:function(q){cl(q,function(r){var t=q.charCoords(r.head,"div").top+5,t=q.coordsChar({left:q.display.lineDiv.offsetWidth+100,top:t},"div");return{from:r.from(),to:t}})},undo:function(q){q.undo()},redo:function(q){q.redo()},undoSelection:function(q){q.undoSelection()},redoSelection:function(q){q.redoSelection()},goDocStart:function(q){q.extendSelection(e6(q.firstLine(),0))},goDocEnd:function(q){q.extendSelection(e6(q.lastLine()))},goLineStart:function(q){q.extendSelectionsBy(function(r){return c6(q,r.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(q){q.extendSelectionsBy(function(r){return cT(q,r.head)},{origin:"+move",bias:1})},goLineEnd:function(q){q.extendSelectionsBy(function(r){r=r.head.line;for(var u,t=e4(q.doc,r);u=bo(t,!1);){t=u.find(1,!0).line,r=null}u=(u=ft(t))?u[0].level%2?gk(t):fQ(t):t.text.length;return e6(null==r?fP(t):r,u)},{origin:"+move",bias:-1})},goLineRight:function(q){q.extendSelectionsBy(function(r){r=q.charCoords(r.head,"div").top+5;return q.coordsChar({left:q.display.lineDiv.offsetWidth+100,top:r},"div")},b)},goLineLeft:function(q){q.extendSelectionsBy(function(r){r=q.charCoords(r.head,"div").top+5;return q.coordsChar({left:0,top:r},"div")},b)},goLineLeftSmart:function(q){q.extendSelectionsBy(function(r){var t=q.charCoords(r.head,"div").top+5,t=q.coordsChar({left:0,top:t},"div");return t.ch<q.getLine(t.line).search(/\S/)?cT(q,r.head):t},b)},goLineUp:function(q){q.moveV(-1,"line")},goLineDown:function(q){q.moveV(1,"line")},goPageUp:function(q){q.moveV(-1,"page")},goPageDown:function(q){q.moveV(1,"page")},goCharLeft:function(q){q.moveH(-1,"char")},goCharRight:function(q){q.moveH(1,"char")},goColumnLeft:function(q){q.moveH(-1,"column")},goColumnRight:function(q){q.moveH(1,"column")},goWordLeft:function(q){q.moveH(-1,"word")},goGroupRight:function(q){q.moveH(1,"group")},goGroupLeft:function(q){q.moveH(-1,"group")},goWordRight:function(q){q.moveH(1,"word")},delCharBefore:function(q){q.deleteH(-1,"char")},delCharAfter:function(q){q.deleteH(1,"char")},delWordBefore:function(q){q.deleteH(-1,"word")},delWordAfter:function(q){q.deleteH(1,"word")},delGroupBefore:function(q){q.deleteH(-1,"group")},delGroupAfter:function(q){q.deleteH(1,"group")},indentAuto:function(q){q.indentSelection("smart")},indentMore:function(q){q.indentSelection("add")},indentLess:function(q){q.indentSelection("subtract")},insertTab:function(q){q.replaceSelection("\t")},insertSoftTab:function(r){for(var q=[],w=r.listSelections(),v=r.options.tabSize,u=0;u<w.length;u++){var t=w[u].from(),t=gm(r.getLine(t.line),t.ch,v);q.push(Array(v-t%v+1).join(" "))}r.replaceSelections(q)},defaultTab:function(q){q.somethingSelected()?q.indentSelection("add"):q.execCommand("insertTab")},transposeChars:function(q){fy(q,function(){for(var r=q.listSelections(),x=[],w=0;w<r.length;w++){var v=r[w].head,u=e4(q.doc,v.line).text;if(u){if(v.ch==u.length&&(v=new e6(v.line,v.ch-1)),0<v.ch){v=new e6(v.line,v.ch+1),q.replaceRange(u.charAt(v.ch-1)+u.charAt(v.ch-2),e6(v.line,v.ch-2),v,"+transpose")}else{if(v.line>q.doc.first){var t=e4(q.doc,v.line-1).text;t&&q.replaceRange(u.charAt(0)+"\n"+t.charAt(t.length-1),e6(v.line-1,t.length-1),e6(v.line,1),"+transpose")}}}x.push(new eX(v,v))}q.setSelections(x)})},newlineAndIndent:function(q){fy(q,function(){for(var r=q.listSelections().length,u=0;u<r;u++){var t=q.listSelections()[u];q.replaceRange("\n",t.anchor,t.head,"+input");q.indentLine(t.from().line+1,null,!0);dO(q)}})},toggleOverwrite:function(q){q.toggleOverwrite()}},aH=e7.keyMap={};aH.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};aH.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};aH.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};aH.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};aH["default"]=fv?aH.macDefault:aH.pcDefault;e7.normalizeKeyMap=function(A){var z={},y;for(y in A){if(A.hasOwnProperty(y)){var x=A[y];if(!/^(name|fallthrough|(de|at)tach)$/.test(y)){if("..."!=x){for(var w=b7(y.split(" "),bW),v=0;v<w.length;v++){var u,t;v==w.length-1?(t=y,u=x):(t=w.slice(0,v+1).join(" "),u="...");var r=z[t];if(!r){z[t]=u}else{if(r!=u){throw Error("Inconsistent bindings for "+t)}}}}delete A[y]}}}for(var q in z){A[q]=z[q]}return A};var h=e7.lookupKey=function(r,q,w,v){q=bT(q);var u=q.call?q.call(r,v):q[r];if(!1===u){return"nothing"}if("..."===u){return"multi"}if(null!=u&&w(u)){return"handled"}if(q.fallthrough){if("[object Array]"!=Object.prototype.toString.call(q.fallthrough)){return h(r,q.fallthrough,w,v)}for(u=0;u<q.fallthrough.length;u++){var t=h(r,q.fallthrough[u],w,v);if(t){return t}}}},dJ=e7.isModifierKey=function(q){q="string"==typeof q?q:av[q.keyCode];return"Ctrl"==q||"Alt"==q||"Shift"==q||"Mod"==q},dj=e7.keyName=function(r,q){if(fU&&34==r.keyCode&&r["char"]){return !1}var u=av[r.keyCode],t=u;if(null==t||r.altGraphKey){return !1}r.altKey&&"Alt"!=u&&(t="Alt-"+t);(b3?r.metaKey:r.ctrlKey)&&"Ctrl"!=u&&(t="Ctrl-"+t);(b3?r.ctrlKey:r.metaKey)&&"Cmd"!=u&&(t="Cmd-"+t);!q&&r.shiftKey&&"Shift"!=u&&(t="Shift-"+t);return t};e7.fromTextArea=function(z,y){function x(){z.value=q.getValue()}y=y?fw(y):{};y.value=z.value;!y.tabindex&&z.tabIndex&&(y.tabindex=z.tabIndex);!y.placeholder&&z.placeholder&&(y.placeholder=z.placeholder);if(null==y.autofocus){var w=es();y.autofocus=w==z||null!=z.getAttribute("autofocus")&&w==document.body}if(z.form&&(e3(z.form,"submit",x),!y.leaveSubmitMethodAlone)){var v=z.form,u=v.submit;try{var t=v.submit=function(){x();v.submit=u;v.submit();v.submit=t}}catch(r){}}y.finishInit=function(A){A.save=x;A.getTextArea=function(){return z};A.toTextArea=function(){A.toTextArea=isNaN;x();z.parentNode.removeChild(A.getWrapperElement());z.style.display="";z.form&&(di(z.form,"submit",x),"function"==typeof z.form.submit&&(z.form.submit=u))}};z.style.display="none";var q=e7(function(A){z.parentNode.insertBefore(A,z.nextSibling)},y);return q};var aR=e7.StringStream=function(r,q){this.pos=this.start=0;this.string=r;this.tabSize=q||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};aR.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(r){var q=this.string.charAt(this.pos);if("string"==typeof r?q==r:q&&(r.test?r.test(q):r(q))){return ++this.pos,q}},eatWhile:function(r){for(var q=this.pos;this.eat(r);){}return this.pos>q},eatSpace:function(){for(var q=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));){++this.pos}return this.pos>q},skipToEnd:function(){this.pos=this.string.length},skipTo:function(q){q=this.string.indexOf(q,this.pos);if(-1<q){return this.pos=q,!0}},backUp:function(q){this.pos-=q},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=gm(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?gm(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return gm(this.string,null,this.tabSize)-(this.lineStart?gm(this.string,this.lineStart,this.tabSize):0)},match:function(r,q,v){if("string"==typeof r){var u=function(w){return v?w.toLowerCase():w},t=this.string.substr(this.pos,r.length);if(u(t)==u(r)){return !1!==q&&(this.pos+=r.length),!0}}else{if((r=this.string.slice(this.pos).match(r))&&0<r.index){return null}r&&!1!==q&&(this.pos+=r[0].length);return r}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(r,q){this.lineStart+=r;try{return q()}finally{this.lineStart-=r}}};var a2=0,gs=e7.TextMarker=function(r,q){this.lines=[];this.type=q;this.doc=r;this.id=++a2};bB(gs);gs.prototype.clear=function(){if(!this.explicitlyCleared){var C=this.doc.cm,B=C&&!C.curOp;B&&fs(C);if(fz(this,"clear")){var A=this.find();A&&fG(this,"clear",A.from,A.to)}for(var z=A=null,y=0;y<this.lines.length;++y){var x=this.lines[y],w=f7(x.markedSpans,this);C&&!this.collapsed?cy(C,fP(x),"text"):C&&(null!=w.to&&(z=fP(x)),null!=w.from&&(A=fP(x)));for(var v=x,u=x.markedSpans,t=w,r=void 0,q=0;q<u.length;++q){u[q]!=t&&(r||(r=[])).push(u[q])}v.markedSpans=r;null==w.from&&this.collapsed&&!gy(this.doc,x)&&C&&fl(x,i(C.display))}if(C&&this.collapsed&&!C.options.lineWrapping){for(y=0;y<this.lines.length;++y){x=dI(this.lines[y]),w=eY(x),w>C.display.maxLineLength&&(C.display.maxLine=x,C.display.maxLineLength=w,C.display.maxLineChanged=!0)}}null!=A&&C&&this.collapsed&&fB(C,A,z+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,C&&d4(C.doc));C&&fG(C,"markerCleared",C,this);B&&eL(C);this.parent&&this.parent.clear()}};gs.prototype.find=function(r,q){null==r&&"bookmark"==this.type&&(r=1);for(var x,w,v=0;v<this.lines.length;++v){var u=this.lines[v],t=f7(u.markedSpans,this);if(null!=t.from&&(x=e6(q?u:fP(u),t.from),-1==r)){return x}if(null!=t.to&&(w=e6(q?u:fP(u),t.to),1==r)){return w}}return x&&{from:x,to:w}};gs.prototype.changed=function(){var r=this.find(-1,!0),q=this,t=this.doc.cm;r&&t&&fy(t,function(){var v=r.line,u=fP(r.line);if(u=cj(t,u)){cU(u),t.curOp.selectionChanged=t.curOp.forceUpdate=!0}t.curOp.updateMaxLine=!0;gy(q.doc,v)||null==q.height||(u=q.height,q.height=null,(u=aG(q)-u)&&fl(v,v.height+u))})};gs.prototype.attachLine=function(r){if(!this.lines.length&&this.doc.cm){var q=this.doc.cm.curOp;q.maybeHiddenMarkers&&-1!=fR(q.maybeHiddenMarkers,this)||(q.maybeUnhiddenMarkers||(q.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(r)};gs.prototype.detachLine=function(q){this.lines.splice(fR(this.lines,q),1);!this.lines.length&&this.doc.cm&&(q=this.doc.cm.curOp,(q.maybeHiddenMarkers||(q.maybeHiddenMarkers=[])).push(this))};var a2=0,bt=e7.SharedTextMarker=function(r,q){this.markers=r;this.primary=q;for(var t=0;t<r.length;++t){r[t].parent=this}};bB(bt);bt.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var q=0;q<this.markers.length;++q){this.markers[q].clear()}fG(this,"clear")}};bt.prototype.find=function(r,q){return this.primary.find(r,q)};var a3=e7.LineWidget=function(r,q,u){if(u){for(var t in u){u.hasOwnProperty(t)&&(this[t]=u[t])}}this.doc=r;this.node=q};bB(a3);a3.prototype.clear=function(){var r=this.doc.cm,q=this.line.widgets,w=this.line,v=fP(w);if(null!=v&&q){for(var u=0;u<q.length;++u){q[u]==this&&q.splice(u--,1)}q.length||(w.widgets=null);var t=aG(this);fl(w,Math.max(0,w.height-t));r&&fy(r,function(){var x=-t;eF(w)<(r.curOp&&r.curOp.scrollTop||r.doc.scrollTop)&&cW(r,null,x);cy(r,v,"widget")})}};a3.prototype.changed=function(){var r=this.height,q=this.doc.cm,u=this.line;this.height=null;var t=aG(this)-r;t&&(fl(u,u.height+t),q&&fy(q,function(){q.curOp.forceUpdate=!0;eF(u)<(q.curOp&&q.curOp.scrollTop||q.doc.scrollTop)&&cW(q,null,t)}))};var bn=e7.Line=function(r,q,t){this.text=r;cA(this,q);this.height=t?t(this):1};bB(bn);bn.prototype.lineNo=function(){return fP(this)};var fJ={},f9={};aY.prototype={chunkSize:function(){return this.lines.length},removeInner:function(r,q){for(var w=r,v=r+q;w<v;++w){var u=this.lines[w];this.height-=u.height;var t=u;t.parent=null;cN(t);fG(u,"delete")}this.lines.splice(r,q)},collapse:function(q){q.push.apply(q,this.lines)},insertInner:function(r,q,t){this.height+=t;this.lines=this.lines.slice(0,r).concat(q).concat(this.lines.slice(r));for(r=0;r<q.length;++r){q[r].parent=this}},iterN:function(r,q,t){for(q=r+q;r<q;++r){if(t(this.lines[r])){return !0}}}};aM.prototype={chunkSize:function(){return this.size},removeInner:function(r,q){this.size-=q;for(var x=0;x<this.children.length;++x){var w=this.children[x],v=w.chunkSize();if(r<v){var u=Math.min(q,v-r),t=w.height;w.removeInner(r,u);this.height-=t-w.height;v==u&&(this.children.splice(x--,1),w.parent=null);if(0==(q-=u)){break}r=0}else{r-=v}}25>this.size-q&&(1<this.children.length||!(this.children[0] instanceof aY))&&(x=[],this.collapse(x),this.children=[new aY(x)],this.children[0].parent=this)},collapse:function(r){for(var q=0;q<this.children.length;++q){this.children[q].collapse(r)}},insertInner:function(r,q,w){this.size+=q.length;this.height+=w;for(var v=0;v<this.children.length;++v){var u=this.children[v],t=u.chunkSize();if(r<=t){u.insertInner(r,q,w);if(u.lines&&50<u.lines.length){for(;50<u.lines.length;){r=u.lines.splice(u.lines.length-25,25),r=new aY(r),u.height-=r.height,this.children.splice(v+1,0,r),r.parent=this}this.maybeSpill()}break}r-=t}},maybeSpill:function(){if(!(10>=this.children.length)){var r=this;do{var q=r.children.splice(r.children.length-5,5),q=new aM(q);if(r.parent){r.size-=q.size;r.height-=q.height;var t=fR(r.parent.children,r);r.parent.children.splice(t+1,0,q)}else{t=new aM(r.children),t.parent=r,r.children=[t,q],r=t}q.parent=r.parent}while(10<r.children.length);r.parent.maybeSpill()}},iterN:function(r,q,w){for(var v=0;v<this.children.length;++v){var u=this.children[v],t=u.chunkSize();if(r<t){t=Math.min(q,t-r);if(u.iterN(r,t,w)){return !0}if(0==(q-=t)){break}r=0}else{r-=t}}}};var b2=0,fC=e7.Doc=function(r,q,t){if(!(this instanceof fC)){return new fC(r,q,t)}null==t&&(t=0);aM.call(this,[new aY([new bn("",null)])]);this.first=t;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=t;t=e6(t,0);this.sel=d8(t);this.history=new aF(null);this.id=++b2;this.modeOption=q;"string"==typeof r&&(r=a5(r));bF(this,{from:t,to:t,text:r});fK(this,d8(t),dV)};fC.prototype=en(aM.prototype,{constructor:fC,iter:function(r,q,t){t?this.iterN(r-this.first,q-r,t):this.iterN(this.first,this.first+this.size,r)},insert:function(r,q){for(var u=0,t=0;t<q.length;++t){u+=q[t].height}this.insertInner(r-this.first,q,u)},remove:function(r,q){this.removeInner(r-this.first,q)},getValue:function(r){var q=f(this,this.first,this.first+this.size);return !1===r?q:q.join(r||"\n")},setValue:fE(function(r){var q=e6(this.first,0),t=this.first+this.size-1;d1(this,{from:q,to:e6(t,e4(this,t).text.length),text:a5(r),origin:"setValue",full:!0},!0);fK(this,d8(q))}),replaceRange:function(r,q,u,t){q=e2(this,q);u=u?e2(this,u):q;ah(this,r,q,u,t)},getRange:function(r,q,t){r=aB(this,e2(this,r),e2(this,q));return !1===t?r:r.join(t||"\n")},getLine:function(q){return(q=this.getLineHandle(q))&&q.text},getLineHandle:function(q){if(bH(this,q)){return e4(this,q)}},getLineNumber:function(q){return fP(q)},getLineHandleVisualStart:function(q){"number"==typeof q&&(q=e4(this,q));return dI(q)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(q){return e2(this,q)},getCursor:function(r){var q=this.sel.primary();return null==r||"head"==r?q.head:"anchor"==r?q.anchor:"end"==r||"to"==r||!1===r?q.to():q.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:fE(function(r,q,t){r=e2(this,"number"==typeof r?e6(r,q||0):r);fK(this,d8(r,null),t)}),setSelection:fE(function(r,q,u){var t=e2(this,r);r=e2(this,q||r);fK(this,d8(t,r),u)}),extendSelection:fE(function(r,q,t){cD(this,e2(this,r),q&&e2(this,q),t)}),extendSelections:fE(function(r,q){for(var u=[],t=0;t<r.length;t++){u[t]=e2(this,r[t])}gi(this,u)}),extendSelectionsBy:fE(function(r,q){gi(this,b7(this.sel.ranges,r),q)}),setSelections:fE(function(r,q,v){if(r.length){for(var u=0,t=[];u<r.length;u++){t[u]=new eX(e2(this,r[u].anchor),e2(this,r[u].head))}null==q&&(q=Math.min(r.length-1,this.sel.primIndex));fK(this,fr(t,q),v)}}),addSelection:fE(function(r,q,u){var t=this.sel.ranges.slice(0);t.push(new eX(e2(this,r),e2(this,q||r)));fK(this,fr(t,t.length-1),u)}),getSelection:function(r){for(var q=this.sel.ranges,v,u=0;u<q.length;u++){var t=aB(this,q[u].from(),q[u].to());v=v?v.concat(t):t}return !1===r?v:v.join(r||"\n")},getSelections:function(r){for(var q=[],v=this.sel.ranges,u=0;u<v.length;u++){var t=aB(this,v[u].from(),v[u].to());!1!==r&&(t=t.join(r||"\n"));q[u]=t}return q},replaceSelection:function(r,q,v){for(var u=[],t=0;t<this.sel.ranges.length;t++){u[t]=r}this.replaceSelections(u,q,v||"+input")},replaceSelections:fE(function(z,y,x){for(var w=[],v=this.sel,u=0;u<v.ranges.length;u++){var t=v.ranges[u];w[u]={from:t.from(),to:t.to(),text:a5(z[u]),origin:x}}if(u=y&&"end"!=y){u=[];x=z=e6(this.first,0);for(v=0;v<w.length;v++){var r=w[v],t=ak(r.from,z,x),q=ak(aT(r),z,x);z=r.to;x=q;"around"==y?(r=this.sel.ranges[v],r=0>e0(r.head,r.anchor),u[v]=new eX(r?q:t,r?t:q)):u[v]=new eX(t,t)}u=new cY(u,this.sel.primIndex)}y=u;for(u=w.length-1;0<=u;u--){d1(this,w[u])}y?fN(this,y):this.cm&&dO(this.cm)}),undo:fE(function(){c9(this,"undo")}),redo:fE(function(){c9(this,"redo")}),undoSelection:fE(function(){c9(this,"undo",!0)}),redoSelection:fE(function(){c9(this,"redo",!0)}),setExtending:function(q){this.extend=q},getExtending:function(){return this.extend},historySize:function(){for(var r=this.history,q=0,u=0,t=0;t<r.done.length;t++){r.done[t].ranges||++q}for(t=0;t<r.undone.length;t++){r.undone[t].ranges||++u}return{undo:q,redo:u}},clearHistory:function(){this.history=new aF(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(q){q&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(q){return this.history.generation==(q||this.cleanGeneration)},getHistory:function(){return{done:bO(this.history.done),undone:bO(this.history.undone)}},setHistory:function(r){var q=this.history=new aF(this.history.maxGeneration);q.done=bO(r.done.slice(0),null,!0);q.undone=bO(r.undone.slice(0),null,!0)},addLineClass:fE(function(r,q,t){return cw(this,r,"gutter"==q?"gutter":"class",function(u){var v="text"==q?"textClass":"background"==q?"bgClass":"gutter"==q?"gutterClass":"wrapClass";if(u[v]){if(n(t).test(u[v])){return !1}u[v]+=" "+t}else{u[v]=t}return !0})}),removeLineClass:fE(function(r,q,t){return cw(this,r,"gutter"==q?"gutter":"class",function(u){var y="text"==q?"textClass":"background"==q?"bgClass":"gutter"==q?"gutterClass":"wrapClass",x=u[y];if(x){if(null==t){u[y]=null}else{var w=x.match(n(t));if(!w){return !1}var v=w.index+w[0].length;u[y]=x.slice(0,w.index)+(w.index&&v!=x.length?" ":"")+x.slice(v)||null}}else{return !1}return !0})}),addLineWidget:fE(function(r,q,t){return cm(this,r,q,t)}),removeLineWidget:function(q){q.clear()},markText:function(r,q,t){return b1(this,e2(this,r),e2(this,q),t,"range")},setBookmark:function(r,q){var t={replacedWith:q&&(null==q.nodeType?q.widget:q),insertLeft:q&&q.insertLeft,clearWhenEmpty:!1,shared:q&&q.shared,handleMouseEvents:q&&q.handleMouseEvents};r=e2(this,r);return b1(this,r,r,t,"bookmark")},findMarksAt:function(r){r=e2(this,r);var q=[],v=e4(this,r.line).markedSpans;if(v){for(var u=0;u<v.length;++u){var t=v[u];(null==t.from||t.from<=r.ch)&&(null==t.to||t.to>=r.ch)&&q.push(t.marker.parent||t.marker)}}return q},findMarks:function(r,q,v){r=e2(this,r);q=e2(this,q);var u=[],t=r.line;this.iter(r.line,q.line+1,function(y){if(y=y.markedSpans){for(var x=0;x<y.length;x++){var w=y[x];t==r.line&&r.ch>w.to||null==w.from&&t!=r.line||t==q.line&&w.from>q.ch||v&&!v(w.marker)||u.push(w.marker.parent||w.marker)}}++t});return u},getAllMarks:function(){var q=[];this.iter(function(r){if(r=r.markedSpans){for(var t=0;t<r.length;++t){null!=r[t].from&&q.push(r[t].marker)}}});return q},posFromIndex:function(r){var q,t=this.first;this.iter(function(u){u=u.text.length+1;if(u>r){return q=r,!0}r-=u;++t});return e2(this,e6(t,q))},indexFromPos:function(r){r=e2(this,r);var q=r.ch;if(r.line<this.first||0>r.ch){return 0}this.iter(this.first,r.line,function(t){q+=t.text.length+1});return q},copy:function(r){var q=new fC(f(this,this.first,this.first+this.size),this.modeOption,this.first);q.scrollTop=this.scrollTop;q.scrollLeft=this.scrollLeft;q.sel=this.sel;q.extend=!1;r&&(q.history.undoDepth=this.history.undoDepth,q.setHistory(this.getHistory()));return q},linkedDoc:function(r){r||(r={});var q=this.first,w=this.first+this.size;null!=r.from&&r.from>q&&(q=r.from);null!=r.to&&r.to<w&&(w=r.to);q=new fC(f(this,q,w),r.mode||this.modeOption,q);r.sharedHist&&(q.history=this.history);(this.linked||(this.linked=[])).push({doc:q,sharedHist:r.sharedHist});q.linked=[{doc:this,isParent:!0,sharedHist:r.sharedHist}];r=dk(this);for(w=0;w<r.length;w++){var v=r[w],u=v.find(),t=q.clipPos(u.from),u=q.clipPos(u.to);e0(t,u)&&(t=b1(q,t,u,v.primary,v.primary.type),v.markers.push(t),t.parent=v)}return q},unlinkDoc:function(r){r instanceof e7&&(r=r.doc);if(this.linked){for(var q=0;q<this.linked.length;++q){if(this.linked[q].doc==r){this.linked.splice(q,1);r.unlinkDoc(this);bw(dk(this));break}}}if(r.history==this.history){var t=[r.id];c(r,function(u){t.push(u.id)},!0);r.history=new aF(null);r.history.done=bO(this.history.done,t);r.history.undone=bO(this.history.undone,t)}},iterLinkedDocs:function(q){c(this,q)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});fC.prototype.eachLine=fC.prototype.iter;var bP=["iter","insert","remove","copy","getEditor"],fq;for(fq in fC.prototype){fC.prototype.hasOwnProperty(fq)&&0>fR(bP,fq)&&(e7.prototype[fq]=function(q){return function(){return q.apply(this.doc,arguments)}}(fC.prototype[fq]))}bB(fC);var fD=e7.e_preventDefault=function(q){q.preventDefault?q.preventDefault():q.returnValue=!1},bC=e7.e_stopPropagation=function(q){q.stopPropagation?q.stopPropagation():q.cancelBubble=!0},dt=e7.e_stop=function(q){fD(q);bC(q)},e3=e7.on=function(r,q,t){r.addEventListener?r.addEventListener(q,t,!1):r.attachEvent?r.attachEvent("on"+q,t):(r=r._handlers||(r._handlers={}),(r[q]||(r[q]=[])).push(t))},di=e7.off=function(r,q,t){if(r.removeEventListener){r.removeEventListener(q,t,!1)}else{if(r.detachEvent){r.detachEvent("on"+q,t)}else{if(r=r._handlers&&r._handlers[q]){for(q=0;q<r.length;++q){if(r[q]==t){r.splice(q,1);break}}}}}},fH=e7.signal=function(r,q){var v=r._handlers&&r._handlers[q];if(v){for(var u=Array.prototype.slice.call(arguments,2),t=0;t<v.length;++t){v[t].apply(null,u)}}},aA=null,gp=30,bk=e7.Pass={toString:function(){return"CodeMirror.Pass"}},dV={scroll:!1},c8={origin:"*mouse"},b={origin:"+move"};fS.prototype.set=function(r,q){clearTimeout(this.id);this.id=setTimeout(q,r)};var gm=e7.countColumn=function(r,q,w,v,u){null==q&&(q=r.search(/[^\s\u00a0]/),-1==q&&(q=r.length));v=v||0;for(u=u||0;;){var t=r.indexOf("\t",v);if(0>t||t>=q){return u+(q-v)}u+=t-v;u+=w-u%w;v=t+1}},at=[""],bi=function(q){q.select()};dC?bi=function(q){q.selectionStart=0;q.selectionEnd=q.value.length}:fV&&(bi=function(r){try{r.select()}catch(q){}});var bp=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,d3=e7.isWordChar=function(q){return/\w/.test(q)||""<q&&(q.toUpperCase()!=q.toLowerCase()||bp.test(q))},dD=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,ao;ao=document.createRange?function(r,q,v,u){var t=document.createRange();t.setEnd(u||r,v);t.setStart(r,q);return t}:function(r,q,v){var u=document.body.createTextRange();try{u.moveToElementText(r.parentNode)}catch(t){return u}u.collapse(!0);u.moveEnd("character",v);u.moveStart("character",q);return u};var bZ=e7.contains=function(r,q){3==q.nodeType&&(q=q.parentNode);if(r.contains){return r.contains(q)}do{if(11==q.nodeType&&(q=q.host),q==r){return !0}}while(q=q.parentNode)};fV&&11>fT&&(es=function(){try{return document.activeElement}catch(q){return document.body}});var dh=e7.rmClass=function(r,q){var v=r.className,u=n(q).exec(v);if(u){var t=v.slice(u.index+u[0].length);r.className=v.slice(0,u.index)+(t?u[1]+t:"")}},cK=e7.addClass=function(r,q){var t=r.className;n(q).test(t)||(r.className+=(t?" ":"")+q)},ay=!1,eG=function(){if(fV&&9>fT){return !1}var q=e5("div");return"draggable" in q||"dragDrop" in q}(),gv,ar,a5=e7.splitLines=3!="\n\nb".split(/\n/).length?function(r){for(var q=0,x=[],w=r.length;q<=w;){var v=r.indexOf("\n",q);-1==v&&(v=r.length);var u=r.slice(q,"\r"==r.charAt(v-1)?v-1:v),t=u.indexOf("\r");-1!=t?(x.push(u.slice(0,t)),q+=t+1):(x.push(u),q=v+1)}return x}:function(q){return q.split(/\r\n?|\n/)},cs=window.getSelection?function(r){try{return r.selectionStart!=r.selectionEnd}catch(q){return !1}}:function(r){try{var q=r.ownerDocument.selection.createRange()}catch(t){}return q&&q.parentElement()==r?0!=q.compareEndPoints("StartToEnd",q):!1},aJ=function(){var q=e5("div");if("oncopy" in q){return !0}q.setAttribute("oncopy","return;");return"function"==typeof q.oncopy}(),fO=null,av={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"\x3d",91:"Mod",92:"Mod",93:"Mod",107:"\x3d",109:"-",127:"Delete",173:"-",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e7.keyNames=av;(function(){for(var q=0;10>q;q++){av[q+48]=av[q+96]=String(q)}for(q=65;90>=q;q++){av[q]=String.fromCharCode(q)}for(q=1;12>=q;q++){av[q+111]=av[q+63235]="F"+q}})();var au,d2=function(){function r(y){return 247>=y?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(y):1424<=y&&1524>=y?"R":1536<=y&&1773>=y?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(y-1536):1774<=y&&2220>=y?"r":8192<=y&&8203>=y?"w":8204==y?"b":"L"}function q(z,y,A){this.level=z;this.from=y;this.to=A}var x=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,w=/[stwN]/,v=/[LRr]/,u=/[Lb1n]/,t=/[1n]/;return function(G){if(!x.test(G)){return !1}for(var F=G.length,D=[],C=0,A;C<F;++C){D.push(r(G.charCodeAt(C)))}for(var C=0,B="L";C<F;++C){A=D[C],"m"==A?D[C]=B:B=A}C=0;for(B="L";C<F;++C){A=D[C],"1"==A&&"r"==B?D[C]="n":v.test(A)&&(B=A,"r"==A&&(D[C]="R"))}C=1;for(B=D[0];C<F-1;++C){A=D[C],"+"==A&&"1"==B&&"1"==D[C+1]?D[C]="1":","!=A||B!=D[C+1]||"1"!=B&&"n"!=B||(D[C]=B),B=A}for(C=0;C<F;++C){if(A=D[C],","==A){D[C]="N"}else{if("%"==A){for(B=C+1;B<F&&"%"==D[B];++B){}var z=C&&"!"==D[C-1]||B<F&&"1"==D[B]?"1":"N";for(A=C;A<B;++A){D[A]=z}C=B-1}}}C=0;for(B="L";C<F;++C){A=D[C],"L"==B&&"1"==A?D[C]="L":v.test(A)&&(B=A)}for(C=0;C<F;++C){if(w.test(D[C])){for(B=C+1;B<F&&w.test(D[B]);++B){}A="L"==(B<F?D[B]:"L");z="L"==(C?D[C-1]:"L")||A?"L":"R";for(A=C;A<B;++A){D[A]=z}C=B-1}}for(var B=[],y,C=0;C<F;){if(u.test(D[C])){A=C;for(++C;C<F&&u.test(D[C]);++C){}B.push(new q(0,A,C))}else{var H=C,z=B.length;for(++C;C<F&&"L"!=D[C];++C){}for(A=H;A<C;){if(t.test(D[A])){H<A&&B.splice(z,0,new q(1,H,A));H=A;for(++A;A<C&&t.test(D[A]);++A){}B.splice(z,0,new q(2,H,A));H=A}else{++A}}H<C&&B.splice(z,0,new q(1,H,C))}}1==B[0].level&&(y=G.match(/^\s+/))&&(B[0].from=y[0].length,B.unshift(new q(0,0,y[0].length)));1==fW(B).level&&(y=G.match(/\s+$/))&&(fW(B).to-=y[0].length,B.push(new q(0,F-y[0].length,F)));2==B[0].level&&B.unshift(new q(1,B[0].to,B[0].to));B[0].level!=fW(B).level&&B.push(new q(B[0].level,F,F));return B}}();e7.version="5.2.0";return e7});