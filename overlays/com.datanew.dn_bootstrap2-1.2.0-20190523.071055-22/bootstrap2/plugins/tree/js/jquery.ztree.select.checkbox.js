$(document).ready(function(){$(".treeSel").attr("readonly","readonly");$(".ztreeBox").each(function(f){f++;var g=$(this);var e=[];var a=0,c=0,h=false,j=false;var b=g.find(".treeSel");var d=g.find(".treeDemo_check");d.attr("id","treeDemo_check"+f);g.find("li").each(function(n){var k=$(this).parents("ul").length;if($(this).find("li").length>0){h=true;j=true}else{h=false;j=false}if(k==1){a=$(this).index()+1;c=0}else{var m=$(this).parent("ul");var l=$(this).index()+1;if(k==2){c=m.parent().index()+1}else{if(k==3){c=(m.parent().parent().parent().index()+1).toString()+(m.parent().index()+1)}else{if(k==4){c=(m.parent().parent().parent().parent().parent().index()+1).toString()+(m.parent().parent().parent().index()+1)+(m.parent().index()+1)}}}a=c+l.toString()}e.push({id:a,pId:c,name:$(this).find("a:eq(0)").text(),open:h})});var i={check:{enable:true,chkboxType:{Y:"ps",N:"ps"}},view:{dblClickExpand:false,selectedMulti:false},data:{simpleData:{enable:true}},callback:{beforeClick:function(m,l){var k=$.fn.zTree.getZTreeObj("treeDemo_check"+f);k.checkNode(l,!l.checked,null,true)},onCheck:function(r,q){var o=$.fn.zTree.getZTreeObj("treeDemo_check"+f);var n=o.getCheckedNodes(true);var m="";for(var p=0,k=n.length;p<k;p++){m+=n[p].name+","}if(m.length>0){m=m.substring(0,m.length-1)}b.attr("value",m)}}};$.fn.zTree.init(d,i,e);b.bind("click",function(){showMenu_r(b,d)})})});function showMenu_r(c,b){var a=c.position();b.css({left:a.left,top:a.top+c.outerHeight()}).slideDown("fast");$(document).bind("mouseup",function(d){if(!b.is(d.target)&&!c.is(d.target)&&b.has(d.target).length===0){b.hide()}})};