(function(v){v.extend(!0,v.fn.zTree._z,{view:{clearOldFirstNode:function(i,f){for(var d=f.getNextNode();d;){if(d.isFirstNode){d.isFirstNode=!1;x.setNodeLineIcos(i,d);break}if(d.isLastNode){break}d=d.getNextNode()}},clearOldLastNode:function(i,f,d){for(f=f.getPreNode();f;){if(f.isLastNode){f.isLastNode=!1;d&&x.setNodeLineIcos(i,f);break}if(f.isFirstNode){break}f=f.getPreNode()}},makeDOMNodeMainBefore:function(i,f,d){i.push("<li ",d.isHidden?"style='display:none;' ":"","id='",d.tId,"' class='",k.className.LEVEL,d.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(f,d){d.isHidden=!1;w.initShowForExCheck(f,d);u(d,f).show()},showNodes:function(p,r,q){if(r&&r.length!=0){var o={},n,d;for(n=0,d=r.length;n<d;n++){var m=r[n];if(!o[m.parentTId]){var l=m.getParentNode();o[m.parentTId]=l===null?w.getRoot(p):m.getParentNode()}x.showNode(p,m,q)}for(var f in o){r=o[f][p.data.key.children],x.setFirstNodeForShow(p,r),x.setLastNodeForShow(p,r)}}},hideNode:function(f,d){d.isHidden=!0;d.isFirstNode=!1;d.isLastNode=!1;w.initHideForExCheck(f,d);x.cancelPreSelectedNode(f,d);u(d,f).hide()},hideNodes:function(p,r,q){if(r&&r.length!=0){var o={},n,d;for(n=0,d=r.length;n<d;n++){var m=r[n];if((m.isFirstNode||m.isLastNode)&&!o[m.parentTId]){var l=m.getParentNode();o[m.parentTId]=l===null?w.getRoot(p):m.getParentNode()}x.hideNode(p,m,q)}for(var f in o){r=o[f][p.data.key.children],x.setFirstNodeForHide(p,r),x.setLastNodeForHide(p,r)}}},setFirstNode:function(j,f){var d=j.data.key.children,i=f[d].length;i>0&&!f[d][0].isHidden?f[d][0].isFirstNode=!0:i>0&&x.setFirstNodeForHide(j,f[d])},setLastNode:function(j,f){var d=j.data.key.children,i=f[d].length;i>0&&!f[d][0].isHidden?f[d][i-1].isLastNode=!0:i>0&&x.setLastNodeForHide(j,f[d])},setFirstNodeForHide:function(l,f){var d,j,i;for(j=0,i=f.length;j<i;j++){d=f[j];if(d.isFirstNode){break}if(!d.isHidden&&!d.isFirstNode){d.isFirstNode=!0;x.setNodeLineIcos(l,d);break}else{d=null}}return d},setFirstNodeForShow:function(o,i){var d,n,l,m,j;for(n=0,l=i.length;n<l;n++){if(d=i[n],!m&&!d.isHidden&&d.isFirstNode){m=d;break}else{if(!m&&!d.isHidden&&!d.isFirstNode){d.isFirstNode=!0,m=d,x.setNodeLineIcos(o,d)}else{if(m&&d.isFirstNode){d.isFirstNode=!1;j=d;x.setNodeLineIcos(o,d);break}}}}return{"new":m,old:j}},setLastNodeForHide:function(j,f){var d,i;for(i=f.length-1;i>=0;i--){d=f[i];if(d.isLastNode){break}if(!d.isHidden&&!d.isLastNode){d.isLastNode=!0;x.setNodeLineIcos(j,d);break}else{d=null}}return d},setLastNodeForShow:function(n,i){var d,m,j,l;for(m=i.length-1;m>=0;m--){if(d=i[m],!j&&!d.isHidden&&d.isLastNode){j=d;break}else{if(!j&&!d.isHidden&&!d.isLastNode){d.isLastNode=!0,j=d,x.setNodeLineIcos(n,d)}else{if(j&&d.isLastNode){d.isLastNode=!1;l=d;x.setNodeLineIcos(n,d);break}}}}return{"new":j,old:l}}},data:{initHideForExCheck:function(f,d){if(d.isHidden&&f.check&&f.check.enable){if(typeof d._nocheck=="undefined"){d._nocheck=!!d.nocheck,d.nocheck=!0}d.check_Child_State=-1;x.repairParentChkClassWithSelf&&x.repairParentChkClassWithSelf(f,d)}},initShowForExCheck:function(i,f){if(!f.isHidden&&i.check&&i.check.enable){if(typeof f._nocheck!="undefined"){f.nocheck=f._nocheck,delete f._nocheck}if(x.setChkClass){var d=u(f,k.id.CHECK,i);x.setChkClass(i,d,f)}x.repairParentChkClassWithSelf&&x.repairParentChkClassWithSelf(i,f)}}}});var v=v.fn.zTree,h=v._z.tools,k=v.consts,x=v._z.view,w=v._z.data,u=h.$;w.addInitNode(function(i,f,d){if(typeof d.isHidden=="string"){d.isHidden=h.eqs(d.isHidden,"true")}d.isHidden=!!d.isHidden;w.initHideForExCheck(i,d)});w.addBeforeA(function(){});w.addZTreeTools(function(i,f){f.showNodes=function(l,j){x.showNodes(i,l,j)};f.showNode=function(l,j){l&&x.showNodes(i,[l],j)};f.hideNodes=function(l,j){x.hideNodes(i,l,j)};f.hideNode=function(l,j){l&&x.hideNodes(i,[l],j)};var d=f.checkNode;if(d){f.checkNode=function(n,m,l,j){(!n||!n.isHidden)&&d.apply(f,arguments)}}});var g=w.initNode;w.initNode=function(q,f,d,p,o,m,n){var l=(p?p:w.getRoot(q))[q.data.key.children];w.tmpHideFirstNode=x.setFirstNodeForHide(q,l);w.tmpHideLastNode=x.setLastNodeForHide(q,l);n&&(x.setNodeLineIcos(q,w.tmpHideFirstNode),x.setNodeLineIcos(q,w.tmpHideLastNode));o=w.tmpHideFirstNode===d;m=w.tmpHideLastNode===d;g&&g.apply(w,arguments);n&&m&&x.clearOldLastNode(q,d,n)};var e=w.makeChkFlag;if(e){w.makeChkFlag=function(f,d){(!d||!d.isHidden)&&e.apply(w,arguments)}}var c=w.getTreeCheckedNodes;if(c){w.getTreeCheckedNodes=function(m,i,f,j){if(i&&i.length>0){var l=i[0].getParentNode();if(l&&l.isHidden){return[]}}return c.apply(w,arguments)}}var b=w.getTreeChangeCheckedNodes;if(b){w.getTreeChangeCheckedNodes=function(l,i,f){if(i&&i.length>0){var j=i[0].getParentNode();if(j&&j.isHidden){return[]}}return b.apply(w,arguments)}}var a=x.expandCollapseSonNode;if(a){x.expandCollapseSonNode=function(m,i,d,l,j){(!i||!i.isHidden)&&a.apply(x,arguments)}}var z=x.setSonNodeCheckBox;if(z){x.setSonNodeCheckBox=function(j,f,d,i){(!f||!f.isHidden)&&z.apply(x,arguments)}}var y=x.repairParentChkClassWithSelf;if(y){x.repairParentChkClassWithSelf=function(f,d){(!d||!d.isHidden)&&y.apply(x,arguments)}}})(jQuery);